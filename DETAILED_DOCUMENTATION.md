# ๐ ุงูุชูุซูู ุงูุดุงูู ูุงูููุตู - ูุธุงู ุฅุฏุงุฑุฉ ุงูููุงู ูุงูุญุถูุฑ

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู](#ูุธุฑุฉ-ุนุงูุฉ-ุนูู-ุงููุธุงู)
2. [ุงูุจููุฉ ุงููุนูุงุฑูุฉ](#ุงูุจููุฉ-ุงููุนูุงุฑูุฉ)
3. [ูุงุนุฏุฉ ุงูุจูุงูุงุช](#ูุงุนุฏุฉ-ุงูุจูุงูุงุช)
4. [ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API)](#ูุงุฌูุงุช-ุจุฑูุฌุฉ-ุงูุชุทุจููุงุช-api)
5. [ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)](#ุงููุงุฌูุฉ-ุงูุฃูุงููุฉ-frontend)
6. [ุงูุฎุงุฏู ุงูุฎููู (Backend)](#ุงูุฎุงุฏู-ุงูุฎููู-backend)
7. [ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ (TV Dashboard)](#ููุญุฉ-ุงูุชุญูู-ุงูุชููุฒููููุฉ-tv-dashboard)
8. [ุงูููุฒุงุช ุงููุชูุฏูุฉ](#ุงูููุฒุงุช-ุงููุชูุฏูุฉ)
9. [ุงูุฃูุงู ูุงูุญูุงูุฉ](#ุงูุฃูุงู-ูุงูุญูุงูุฉ)
10. [ุฏููู ุงููุดุฑ](#ุฏููู-ุงููุดุฑ)
11. [ุฏููู ุงูุชุทููุฑ](#ุฏููู-ุงูุชุทููุฑ)
12. [ุงุณุชูุดุงู ุงูุฃุฎุทุงุก](#ุงุณุชูุดุงู-ุงูุฃุฎุทุงุก)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู

### ุงููุตู
ูุธุงู ุดุงูู ููุชูุฏู ูุฅุฏุงุฑุฉ ุงูููุงู ุงููุฌุฏููุฉ ูุงูุฎุงุตุฉุ ุชุชุจุน ุงูุญุถูุฑุ ูุงูุชูุงุฑูุฑ ุงูุชุญููููุฉ ูุน ููุญุฉ ุชุญูู ุชููุฒููููุฉ ุงุญุชุฑุงููุฉ. ุชู ุชุตูููู ุฎุตูุตุงู ููุณู ุงูุชุณููุงุช ูุงููุทุงุจูุฉ ูู ุดุฑูุฉ ุงูุตุงูู ููุฏูุน ุงูุฅููุชุฑููู.

### ุงููุฏู ุงูุฑุฆูุณู
ุฅุฏุงุฑุฉ ูุนุงูุฉ ูููุธูุฉ ูุฌููุน ุงูููุงู ุงูููููุฉ ูุงูุฃุณุจูุนูุฉ ูุงูุดูุฑูุฉุ ูุน ุชุชุจุน ุฏููู ููุฃุฏุงุก ูุงูุญุถูุฑุ ูุนุฑุถ ุงุญุชุฑุงูู ููุฅุญุตุงุฆูุงุช ุนูู ุดุงุดุงุช ูุจูุฑุฉ.

### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

#### Frontend
- **React 18.2.0**: ููุชุจุฉ JavaScript ูุจูุงุก ูุงุฌูุงุช ุงููุณุชุฎุฏู
- **TypeScript**: ูููุชุงุจุฉ ุงูุขููุฉ ูุงูููุซููุฉ
- **Tailwind CSS 3.4.1**: ุฅุทุงุฑ ุนูู CSS ููุชุตููู ุงูุณุฑูุน ูุงูุงุญุชุฑุงูู
- **Framer Motion 10.16.16**: ููุชุจุฉ ูุชูุฏูุฉ ููุฑุณูู ุงููุชุญุฑูุฉ
- **Zustand 4.4.7**: ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ุงูุฎูููุฉ ูุงูุณุฑูุนุฉ
- **TanStack Query 5.17.0**: ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุฎุงุฏู ูุงูุจูุงูุงุช
- **React Router 6.20.0**: ุงูุชูุฌูู ูุงูุชููู ุจูู ุงูุตูุญุงุช
- **Shadcn/ui + Radix UI**: ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุงุญุชุฑุงููุฉ
- **Lucide React**: ููุชุจุฉ ุงูุฃููููุงุช ุงูุญุฏูุซุฉ
- **Moment.js + Moment Timezone**: ูุนุงูุฌุฉ ุงูุชูุงุฑูุฎ ูุงูุฃููุงุช
- **Axios**: ุทูุจุงุช HTTP
- **Recharts**: ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุฅุญุตุงุฆูุงุช

#### Backend
- **Node.js**: ุจูุฆุฉ ุชุดุบูู JavaScript
- **Express 4.18.2**: ุฅุทุงุฑ ุนูู ุงูููุจ
- **PostgreSQL**: ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุนูุงุฆููุฉ
- **JWT (jsonwebtoken)**: ุงููุตุงุฏูุฉ ูุงูุชูููุถ
- **Bcryptjs**: ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- **Multer**: ุฑูุน ุงููููุงุช
- **Node-cron**: ุงูููุงู ุงููุฌุฏููุฉ
- **Moment-timezone**: ูุนุงูุฌุฉ ุงูุชูุงุฑูุฎ ูุงูุฃููุงุช
- **ExcelJS**: ุชุตุฏูุฑ ูููุงุช Excel
- **PDFKit**: ุชุตุฏูุฑ ูููุงุช PDF
- **WebSocket (ws)**: ุงูุงุชุตุงู ุงูููุฑู
- **Helmet**: ุฃูุงู HTTP headers
- **Express-rate-limit**: ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช
- **Zod**: ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### ุงููููู ุงูุนุงู ูููุดุฑูุน

```
sttlment/
โโโ client/                    # ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (React)
โ   โโโ public/                # ุงููููุงุช ุงูุนุงูุฉ
โ   โ   โโโ index.html
โ   โ   โโโ manifest.json      # PWA manifest
โ   โ   โโโ service-worker.js  # Service Worker
โ   โโโ src/
โ   โ   โโโ components/        # ุงูููููุงุช ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ   โ   โ   โโโ ui/            # ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฃุณุงุณูุฉ
โ   โ   โ   โ   โโโ button.tsx
โ   โ   โ   โ   โโโ badge.tsx
โ   โ   โ   โ   โโโ avatar.tsx
โ   โ   โ   โ   โโโ toast.tsx
โ   โ   โ   โ   โโโ ...
โ   โ   โ   โโโ layout/         # ููููุงุช ุงูุชุฎุทูุท
โ   โ   โ       โโโ sidebar.tsx
โ   โ   โ       โโโ header.tsx
โ   โ   โ       โโโ realtime-indicator.tsx
โ   โ   โโโ pages/             # ุตูุญุงุช ุงูุชุทุจูู
โ   โ   โ   โโโ admin/         # ุตูุญุงุช ุงููุฏูุฑ
โ   โ   โ   โโโ supervisor/   # ุตูุญุงุช ุงููุดุฑู
โ   โ   โ   โโโ employee/      # ุตูุญุงุช ุงูููุธู
โ   โ   โ   โโโ dashboard-v2.tsx
โ   โ   โ   โโโ tasks-v2.tsx
โ   โ   โ   โโโ login-v2.tsx
โ   โ   โ   โโโ tv-dashboard-premium.tsx  # ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ
โ   โ   โ   โโโ ...
โ   โ   โโโ hooks/             # React Hooks ูุฎุตุตุฉ
โ   โ   โ   โโโ use-toast.ts
โ   โ   โ   โโโ use-websocket.ts
โ   โ   โ   โโโ ...
โ   โ   โโโ store/             # Zustand stores
โ   โ   โ   โโโ useAuthStore.ts
โ   โ   โโโ lib/               # ุงูููุชุจุงุช ูุงูุฃุฏูุงุช
โ   โ   โ   โโโ api.ts
โ   โ   โ   โโโ utils.ts
โ   โ   โโโ services/          # ุฎุฏูุงุช API
โ   โ   โ   โโโ api.js
โ   โ   โโโ App.tsx            # ุงููููู ุงูุฑุฆูุณู
โ   โ   โโโ index.tsx          # ููุทุฉ ุงูุฏุฎูู
โ   โ   โโโ index.css           # ุงูุฃููุงุท ุงูุนุงูุฉ
โ   โโโ package.json
โ   โโโ tsconfig.json
โ
โโโ server/                     # ุงูุฎุงุฏู ุงูุฎููู (Node.js/Express)
โ   โโโ index.js               # ููุทุฉ ุงูุจุฏุงูุฉ
โ   โโโ config/
โ   โ   โโโ database.js        # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โ   โโโ .env               # ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โ   โโโ controllers/           # ููุทู ุงูุฃุนูุงู
โ   โ   โโโ authController.js
โ   โ   โโโ usersController.js
โ   โ   โโโ tasksController.js
โ   โ   โโโ tvDashboardController.js
โ   โ   โโโ ...
โ   โโโ routes/                # ูุณุงุฑุงุช API
โ   โ   โโโ auth.js
โ   โ   โโโ users.js
โ   โ   โโโ tasks.js
โ   โ   โโโ tvDashboard.js
โ   โ   โโโ ...
โ   โโโ middleware/           # Middleware
โ   โ   โโโ auth.js           # ุงููุตุงุฏูุฉ ูุงูุชูููุถ
โ   โ   โโโ upload.js         # ุฑูุน ุงููููุงุช
โ   โ   โโโ rateLimiter.js    # ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช
โ   โ   โโโ validator.js      # ุงูุชุญูู ูู ุงูุจูุงูุงุช
โ   โโโ migrations/           # ูุฌุฑุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โ   โโโ 001_initial_schema.sql
โ   โ   โโโ 002_add_avatar_to_users.sql
โ   โ   โโโ runMigrations.js
โ   โ   โโโ seed.js           # ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
โ   โโโ cron/                 # ุงูููุงู ุงููุฌุฏููุฉ
โ   โ   โโโ generateDailyTasks.js
โ   โ   โโโ checkOverdueTasks.js
โ   โโโ utils/                # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โ   โ   โโโ timezone.js
โ   โ   โโโ logger.js
โ   โโโ uploads/              # ุงููููุงุช ุงููุฑููุนุฉ
โ       โโโ avatars/          # ุงูุตูุฑ ุงูุดุฎุตูุฉ
โ
โโโ .env                       # ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุฑุฆูุณูุฉ
โโโ package.json
โโโ README.md
```

### ุชุฏูู ุงูุจูุงูุงุช

1. **ุงููุณุชุฎุฏู** โ ููุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ
2. **Frontend (React)** โ ูุฑุณู ุทูุจุงุช HTTP ุฅูู Backend
3. **Backend (Express)** โ ูุชุนุงูู ูุน ุงูุทูุจุงุชุ ูุชุญูู ูู ุงููุตุงุฏูุฉ
4. **Database (PostgreSQL)** โ ูุชู ุงุณุชุนูุงู ุงูุจูุงูุงุช ุฃู ุชุญุฏูุซูุง
5. **Backend** โ ููุฑุฌุน ุงูุจูุงูุงุช ุฅูู Frontend
6. **Frontend** โ ูุนุฑุถ ุงูุจูุงูุงุช ูููุณุชุฎุฏู
7. **WebSocket** โ ูุฑุณู ุชุญุฏูุซุงุช ููุฑูุฉ ุนูุฏ ุญุฏูุซ ุชุบููุฑุงุช

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ

#### 1. `users` - ุงููุณุชุฎุฏููู
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(50) NOT NULL CHECK (role IN ('admin', 'supervisor', 'employee', 'viewer')),
    active BOOLEAN DEFAULT true,
    can_create_ad_hoc BOOLEAN DEFAULT false,
    avatar_url VARCHAR(500),  -- ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

**ุงูุฃุฏูุงุฑ:**
- `admin`: ูุฏูุฑ ุงููุณู - ุตูุงุญูุงุช ูุงููุฉ
- `supervisor`: ูุณุงุนุฏ ุงููุฏูุฑ - ุฅุฏุงุฑุฉ ุงููุชุงููุฌ ูุงูุฌุฏุงูู
- `employee`: ููุธู - ุชูููุฐ ุงูููุงู
- `viewer`: ุนุงุฑุถ - ุนุฑุถ ููุท

#### 2. `categories` - ุงููุฆุงุช
```sql
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

**ุงูุงุณุชุฎุฏุงู:** ุชุตููู ุงูููุงู (ูุซู: ุชุณููุงุช ุงูุจูููุ ูุทุงุจูุฉ ุงูุชุญุตููุงุช)

#### 3. `task_templates` - ููุงูุจ ุงูููุงู
```sql
CREATE TABLE task_templates (
    id SERIAL PRIMARY KEY,
    title VARCHAR(500) NOT NULL,
    category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL,
    description TEXT,
    default_points INTEGER,
    required_fields JSONB,  -- ุงูุญููู ุงููุทููุจุฉ (JSON)
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

**ุงูุงุณุชุฎุฏุงู:** ููุงูุจ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ูุฅูุดุงุก ุงูููุงู

#### 4. `schedules` - ุงูุฌุฏุงูู ุงูุฒูููุฉ
```sql
CREATE TABLE schedules (
    id SERIAL PRIMARY KEY,
    template_id INTEGER REFERENCES task_templates(id) ON DELETE CASCADE,
    days_of_week INTEGER[] NOT NULL,  -- [0=ุงูุฃุญุฏ, 1=ุงูุงุซููู, ..., 6=ุงูุณุจุช]
    due_time TIME NOT NULL,  -- ููุช ุงูุงุณุชุญูุงู (ุจุชูููุช ุจุบุฏุงุฏ)
    grace_minutes INTEGER DEFAULT 0,  -- ุฏูุงุฆู ุงูุณูุงุญ
    default_assignee_user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

**ุงูุฃููุงุน:**
- **ููููุฉ**: ุฃูุงู ุฃุณุจูุน ูุญุฏุฏุฉ (ูุซู: ุงูุงุซููู-ุงูุฌูุนุฉ)
- **ุฃุณุจูุนูุฉ**: ููู ูุงุญุฏ ูู ุงูุฃุณุจูุน (ูุซู: ูู ุฃุญุฏ)
- **ุดูุฑูุฉ**: ููู ูุญุฏุฏ ูู ุงูุดูุฑ (ูุซู: ููู 1 ูู ูู ุดูุฑ)

#### 5. `daily_tasks` - ุงูููุงู ุงูููููุฉ
```sql
CREATE TABLE daily_tasks (
    id SERIAL PRIMARY KEY,
    schedule_id INTEGER REFERENCES schedules(id) ON DELETE SET NULL,
    template_id INTEGER REFERENCES task_templates(id) ON DELETE SET NULL,
    assigned_to_user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    task_date DATE NOT NULL,
    due_date_time TIMESTAMP WITH TIME ZONE NOT NULL,  -- UTC
    status VARCHAR(50) DEFAULT 'pending' CHECK (status IN ('pending', 'completed', 'overdue', 'cancelled', 'skipped')),
    cancelled_reason TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(schedule_id, task_date)  -- ููุน ุงูุชูุฑุงุฑ
);
```

**ุงูุญุงูุงุช:**
- `pending`: ููุฏ ุงูุงูุชุธุงุฑ
- `completed`: ููุชููุฉ
- `overdue`: ูุชุฃุฎุฑุฉ
- `cancelled`: ููุบุงุฉ
- `skipped`: ุชู ุชุฎุทููุง

#### 6. `ad_hoc_tasks` - ุงูููุงู ุงูุฎุงุตุฉ
```sql
CREATE TABLE ad_hoc_tasks (
    id SERIAL PRIMARY KEY,
    template_id INTEGER REFERENCES task_templates(id) ON DELETE SET NULL,
    category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL,
    created_by_user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    assigned_to_user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    title VARCHAR(500) NOT NULL,
    description TEXT,
    due_date_time TIMESTAMP WITH TIME ZONE,
    status VARCHAR(50) DEFAULT 'pending' CHECK (status IN ('pending', 'completed', 'cancelled', 'skipped')),
    cancelled_reason TEXT,
    beneficiary VARCHAR(255),  -- ุงููุณุชููุฏ (ููููุงู ุบูุฑ ุงููุฎุตุตุฉ)
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

**ุงููุฑู ุนู ุงูููุงู ุงููุฌุฏููุฉ:**
- ูุง ุชูููุฏ ุชููุงุฆูุงู
- ูููู ุฅูุดุงุคูุง ูุฏููุงู ูู ูุจู ุงููุณุชุฎุฏููู ุงููุตุฑุญ ููู
- ูุฏ ูุง ุชููู ูุฎุตุตุฉ ูุดุฎุต ูุญุฏุฏ (`beneficiary` ุจุฏูุงู ูู `assigned_to_user_id`)

#### 7. `task_executions` - ุชูููุฐ ุงูููุงู
```sql
CREATE TABLE task_executions (
    id SERIAL PRIMARY KEY,
    daily_task_id INTEGER REFERENCES daily_tasks(id) ON DELETE CASCADE,
    ad_hoc_task_id INTEGER REFERENCES ad_hoc_tasks(id) ON DELETE CASCADE,
    done_by_user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE RESTRICT,
    on_behalf_of_user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,  -- ุชูููุฐ ุจุงูููุงุจุฉ
    done_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    result_status VARCHAR(50) NOT NULL CHECK (result_status IN ('completed', 'completed_late', 'skipped', 'cancelled')),
    notes TEXT,
    duration_minutes INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_task_reference CHECK (
        (daily_task_id IS NOT NULL AND ad_hoc_task_id IS NULL) OR
        (daily_task_id IS NULL AND ad_hoc_task_id IS NOT NULL)
    )
);
```

**ุญุงูุงุช ุงููุชูุฌุฉ:**
- `completed`: ููุชููุฉ ูู ุงูููุช
- `completed_late`: ููุชููุฉ ูุชุฃุฎุฑุฉ
- `skipped`: ุชู ุชุฎุทููุง
- `cancelled`: ููุบุงุฉ

**ููุฒุฉ "ุนูู ุงูููุงุจุฉ":**
- `on_behalf_of_user_id`: ููุณุชุฎุฏู ุนูุฏูุง ูููุฐ ููุธู ูููุฉ ูุฎุตุตุฉ ูููุธู ุขุฎุฑ
- ููุณุชุฎุฏู ููุท ููููุงู ุงููุฌุฏููุฉ (`daily_tasks`)
- ูุง ููุณุชุฎุฏู ููููุงู ุงูุฎุงุตุฉ (`ad_hoc_tasks`)

#### 8. `attachments` - ุงููุฑููุงุช
```sql
CREATE TABLE attachments (
    id SERIAL PRIMARY KEY,
    task_execution_id INTEGER REFERENCES task_executions(id) ON DELETE CASCADE,
    file_url VARCHAR(1000) NOT NULL,
    file_name VARCHAR(500) NOT NULL,
    file_size INTEGER,
    mime_type VARCHAR(100),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

#### 9. `attendance` - ุงูุญุถูุฑ
```sql
CREATE TABLE attendance (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    date DATE NOT NULL,
    first_login_at TIMESTAMP WITH TIME ZONE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, date)  -- ููุน ุงูุชูุฑุงุฑ
);
```

**ุขููุฉ ุงูุนูู:**
- ููุณุฌู ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุณุฌูู ุฏุฎูู ูููู
- `first_login_at`: ููุช ุฃูู ุชุณุฌูู ุฏุฎูู ูู ุงูููู

#### 10. `audit_log` - ุณุฌู ุงูุชุฏููู
```sql
CREATE TABLE audit_log (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    action VARCHAR(100) NOT NULL,
    entity_type VARCHAR(100),
    entity_id INTEGER,
    details JSONB,  -- ุชูุงุตูู ุฅุถุงููุฉ (JSON)
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

**ุงูุงุณุชุฎุฏุงู:** ุชุชุจุน ุฌููุน ุงูุฅุฌุฑุงุกุงุช ุงููููุฉ ูู ุงููุธุงู

#### 11. `settings` - ุงูุฅุนุฏุงุฏุงุช
```sql
CREATE TABLE settings (
    id SERIAL PRIMARY KEY,
    key VARCHAR(100) UNIQUE NOT NULL,
    value JSONB NOT NULL,  -- ุงููููุฉ (JSON)
    description TEXT,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by_user_id INTEGER REFERENCES users(id) ON DELETE SET NULL
);
```

**ูุซุงู:** ุฅุนุฏุงุฏุงุช ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ (`tv_dashboard`)

### ุงูููุงุฑุณ (Indexes)

```sql
-- ููุงุฑุณ ููุฃุฏุงุก
CREATE INDEX idx_daily_tasks_date ON daily_tasks(task_date);
CREATE INDEX idx_daily_tasks_status ON daily_tasks(status);
CREATE INDEX idx_daily_tasks_assigned ON daily_tasks(assigned_to_user_id);
CREATE INDEX idx_task_executions_done_by ON task_executions(done_by_user_id);
CREATE INDEX idx_task_executions_done_at ON task_executions(done_at);
CREATE INDEX idx_attendance_user_date ON attendance(user_id, date);
CREATE INDEX idx_attendance_date ON attendance(date);
CREATE INDEX idx_audit_log_user ON audit_log(user_id);
CREATE INDEX idx_audit_log_created ON audit_log(created_at);
CREATE INDEX idx_schedules_active ON schedules(active);
CREATE INDEX idx_ad_hoc_tasks_status ON ad_hoc_tasks(status);
CREATE INDEX idx_users_active ON users(active);
```

---

## ๐ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API)

### Base URL
- **Development**: `http://localhost:5001/api`
- **Production**: `https://your-domain.com/api`

### ุงููุตุงุฏูุฉ (Authentication)

ุฌููุน ุงูุทูุจุงุช (ุนุฏุง `/auth/login` ู `/tv-dashboard`) ุชุชุทูุจ ุชููู JWT ูู Header:
```
Authorization: Bearer <token>
```

### ุงููุณุงุฑุงุช (Routes)

#### 1. ุงููุตุงุฏูุฉ (`/api/auth`)

##### `POST /api/auth/login`
ุชุณุฌูู ุงูุฏุฎูู

**Request Body:**
```json
{
  "email": "admin@alsaqi.com",
  "password": "123456"
}
```

**Response (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "name": "ูุฏูุฑ ุงููุธุงู",
    "email": "admin@alsaqi.com",
    "role": "admin",
    "can_create_ad_hoc": true,
    "avatarUrl": "/uploads/avatars/1_1234567890.jpg"
  }
}
```

**Errors:**
- `400`: ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ
- `401`: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ
- `429`: ุนุฏุฏ ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู ุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ

##### `GET /api/auth/verify`
ุงูุชุญูู ูู ุตุญุฉ ุงูุชููู

**Headers:**
```
Authorization: Bearer <token>
```

**Response (200 OK):**
```json
{
  "user": {
    "id": 1,
    "name": "ูุฏูุฑ ุงููุธุงู",
    "email": "admin@alsaqi.com",
    "role": "admin",
    "avatarUrl": "/uploads/avatars/1_1234567890.jpg"
  }
}
```

##### `POST /api/auth/change-password`
ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

**Headers:**
```
Authorization: Bearer <token>
```

**Request Body:**
```json
{
  "currentPassword": "123456",
  "newPassword": "newPassword123"
}
```

**Response (200 OK):**
```json
{
  "message": "ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ"
}
```

#### 2. ุงููุณุชุฎุฏููู (`/api/users`)

##### `GET /api/users`
ุฌูุจ ูุงุฆูุฉ ุงููุณุชุฎุฏููู

**Headers:**
```
Authorization: Bearer <token>
```

**Query Parameters:**
- `role` (optional): ุชุตููุฉ ุญุณุจ ุงูุฏูุฑ
- `active` (optional): ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ (true/false)

**Response (200 OK):**
```json
[
  {
    "id": 1,
    "name": "ูุฏูุฑ ุงููุธุงู",
    "email": "admin@alsaqi.com",
    "role": "admin",
    "active": true,
    "can_create_ad_hoc": true,
    "avatar_url": "/uploads/avatars/1_1234567890.jpg",
    "created_at": "2024-01-01T00:00:00.000Z"
  }
]
```

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `GET /api/users/:id`
ุฌูุจ ูุณุชุฎุฏู ูุญุฏุฏ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `POST /api/users`
ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ

**ุงูุตูุงุญูุงุช:** `admin` ููุท

**Request Body:**
```json
{
  "name": "ููุธู ุฌุฏูุฏ",
  "email": "newemployee@alsaqi.com",
  "password": "123456",
  "role": "employee",
  "can_create_ad_hoc": false
}
```

##### `PUT /api/users/:id`
ุชุญุฏูุซ ูุณุชุฎุฏู

**ุงูุตูุงุญูุงุช:** `admin` ููุท

##### `PATCH /api/users/:id/toggle-active`
ุชูุนูู/ุชุนุทูู ูุณุชุฎุฏู

**ุงูุตูุงุญูุงุช:** `admin` ููุท

##### `POST /api/users/avatar`
ุฑูุน ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ

**Headers:**
```
Authorization: Bearer <token>
Content-Type: multipart/form-data
```

**Request Body (FormData):**
```
avatar: <file>
```

**Response (200 OK):**
```json
{
  "message": "ุชู ุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ",
  "avatarUrl": "/uploads/avatars/1_1234567890.jpg"
}
```

##### `DELETE /api/users/avatar`
ุญุฐู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ

**Headers:**
```
Authorization: Bearer <token>
```

#### 3. ุงูููุงู (`/api/tasks`)

##### `GET /api/tasks/daily`
ุฌูุจ ุงูููุงู ุงูููููุฉ

**Headers:**
```
Authorization: Bearer <token>
```

**Query Parameters:**
- `date` (optional): ุงูุชุงุฑูุฎ (YYYY-MM-DD)ุ ุงูุชุฑุงุถู: ุงูููู
- `status` (optional): ุงูุญุงูุฉ (pending, completed, overdue)
- `assignedTo` (optional): ูุนุฑู ุงููุณุชุฎุฏู ุงููุฎุตุต ูู

**Response (200 OK):**
```json
[
  {
    "id": 1,
    "schedule_id": 1,
    "template_id": 1,
    "assigned_to_user_id": 2,
    "assigned_to_name": "ููุธู 1",
    "task_date": "2024-01-15",
    "due_date_time": "2024-01-15T10:00:00.000Z",
    "due_time": "10:00",
    "status": "pending",
    "template": {
      "id": 1,
      "title": "ุชุณููุงุช ูุตุฑู ุงูุฑุดูุฏ",
      "category": {
        "id": 1,
        "name": "ุชุณููุงุช ุงูุจููู"
      }
    }
  }
]
```

##### `GET /api/tasks/ad-hoc`
ุฌูุจ ุงูููุงู ุงูุฎุงุตุฉ

**Query Parameters:**
- `status` (optional): ุงูุญุงูุฉ
- `assignedTo` (optional): ูุนุฑู ุงููุณุชุฎุฏู
- `createdBy` (optional): ูุนุฑู ููุดุฆ ุงููููุฉ

##### `GET /api/tasks/search`
ุงูุจุญุซ ูู ุงูููุงู

**Query Parameters:**
- `q` (required): ูุต ุงูุจุญุซ
- `type` (optional): ููุน ุงููููุฉ (daily, ad-hoc, all)

##### `POST /api/tasks/ad-hoc`
ุฅูุดุงุก ูููุฉ ุฎุงุตุฉ

**Request Body:**
```json
{
  "template_id": 1,
  "category_id": 1,
  "assigned_to_user_id": 2,
  "title": "ูููุฉ ุฎุงุตุฉ",
  "description": "ูุตู ุงููููุฉ",
  "due_date_time": "2024-01-20T10:00:00.000Z"
}
```

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`, `employee` (ุฅุฐุง ูุงู `can_create_ad_hoc = true`)

##### `POST /api/tasks/execute`
ุชูููุฐ ูููุฉ

**Request Body:**
```json
{
  "daily_task_id": 1,
  "result_status": "completed",
  "notes": "ุชู ุงูุชูููุฐ ุจูุฌุงุญ",
  "duration_minutes": 30,
  "on_behalf_of_user_id": null
}
```

**ููุงุญุธุงุช:**
- `on_behalf_of_user_id`: ููุณุชุฎุฏู ููุท ููููุงู ุงููุฌุฏููุฉ (`daily_task_id`)
- ูุง ููุณุชุฎุฏู ููููุงู ุงูุฎุงุตุฉ (`ad_hoc_task_id`)

##### `GET /api/tasks/executions`
ุฌูุจ ุณุฌู ุชูููุฐ ุงูููุงู

**Query Parameters:**
- `dateFrom` (optional): ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- `dateTo` (optional): ุชุงุฑูุฎ ุงูููุงูุฉ
- `doneBy` (optional): ูุนุฑู ุงููุณุชุฎุฏู ุงููููุฐ

##### `POST /api/tasks/executions/:id/attachments`
ุฅุถุงูุฉ ูุฑูู ูุชูููุฐ ูููุฉ

**Headers:**
```
Content-Type: multipart/form-data
```

**Request Body (FormData):**
```
file: <file>
```

##### `POST /api/tasks/generate-daily`
ุชูููุฏ ุงูููุงู ุงูููููุฉ ูุฏููุงู

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

**Query Parameters:**
- `date` (optional): ุงูุชุงุฑูุฎ (YYYY-MM-DD)ุ ุงูุชุฑุงุถู: ุงูููู

#### 4. ุงูููุงูุจ (`/api/templates`)

##### `GET /api/templates`
ุฌูุจ ุฌููุน ุงูููุงูุจ

##### `GET /api/templates/:id`
ุฌูุจ ูุงูุจ ูุญุฏุฏ

##### `POST /api/templates`
ุฅูุดุงุก ูุงูุจ ุฌุฏูุฏ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `PUT /api/templates/:id`
ุชุญุฏูุซ ูุงูุจ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `DELETE /api/templates/:id`
ุญุฐู ูุงูุจ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

#### 5. ุงูุฌุฏุงูู (`/api/schedules`)

##### `GET /api/schedules`
ุฌูุจ ุฌููุน ุงูุฌุฏุงูู

##### `GET /api/schedules/:id`
ุฌูุจ ุฌุฏูู ูุญุฏุฏ

##### `POST /api/schedules`
ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

**Request Body:**
```json
{
  "template_id": 1,
  "days_of_week": [1, 2, 3, 4, 5],
  "due_time": "10:00",
  "grace_minutes": 15,
  "default_assignee_user_id": 2
}
```

##### `PUT /api/schedules/:id`
ุชุญุฏูุซ ุฌุฏูู

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `DELETE /api/schedules/:id`
ุญุฐู ุฌุฏูู

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

#### 6. ุงููุฆุงุช (`/api/categories`)

##### `GET /api/categories`
ุฌูุจ ุฌููุน ุงููุฆุงุช

##### `POST /api/categories`
ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `PUT /api/categories/:id`
ุชุญุฏูุซ ูุฆุฉ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `DELETE /api/categories/:id`
ุญุฐู ูุฆุฉ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

#### 7. ุงูุชูุงุฑูุฑ (`/api/reports`)

##### `GET /api/reports/daily`
ุงูุชูุฑูุฑ ุงููููู

**Query Parameters:**
- `date` (optional): ุงูุชุงุฑูุฎ (YYYY-MM-DD)

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `GET /api/reports/monthly`
ุงูุชูุฑูุฑ ุงูุดูุฑู

**Query Parameters:**
- `month` (optional): ุงูุดูุฑ (YYYY-MM)

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `GET /api/reports/coverage`
ุชูุฑูุฑ ุงูุชุบุทูุฉ

**Query Parameters:**
- `dateFrom` (required): ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- `dateTo` (required): ุชุงุฑูุฎ ุงูููุงูุฉ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

##### `GET /api/reports/export`
ุชุตุฏูุฑ Excel

**Query Parameters:**
- `type` (required): ููุน ุงูุชูุฑูุฑ (daily, monthly, coverage)
- `date` / `month` / `dateFrom` / `dateTo`: ุญุณุจ ููุน ุงูุชูุฑูุฑ

**Response:** ููู Excel (`.xlsx`)

##### `GET /api/reports/export-pdf`
ุชุตุฏูุฑ PDF

**ููุณ ูุนุงููุงุช `/export`**

**Response:** ููู PDF (`.pdf`)

#### 8. ุงูุญุถูุฑ (`/api/attendance`)

##### `GET /api/attendance`
ุฌูุจ ุณุฌู ุงูุญุถูุฑ

**Query Parameters:**
- `dateFrom` (optional): ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- `dateTo` (optional): ุชุงุฑูุฎ ุงูููุงูุฉ
- `userId` (optional): ูุนุฑู ุงููุณุชุฎุฏู

##### `GET /api/attendance/stats`
ุฅุญุตุงุฆูุงุช ุงูุญุถูุฑ

**ุงูุตูุงุญูุงุช:** `admin`, `supervisor`

#### 9. ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ (`/api/tv-dashboard`)

##### `GET /api/tv-dashboard`
ุฌูุจ ุจูุงูุงุช ููุญุฉ ุงูุชุญูู

**Query Parameters:**
- `visitorMode` (optional): ูุถุน ุงูุฒุงุฆุฑ (true/false)

**Response (200 OK):**
```json
{
  "settings": {
    "slideInterval": 10,
    "autoRefresh": true,
    "refreshInterval": 30,
    "visitorMode": false
  },
  "slides": [
    {
      "type": "opening",
      "title": "ูุณู ุงูุชุณููุงุช ูุงููุทุงุจูุฉ",
      "subtitle": "ุดุฑูุฉ ุงูุตุงูู ููุฏูุน ุงูุฅููุชุฑููู",
      "date": "2024-01-15",
      "time": "10:30:00"
    },
    {
      "type": "overview",
      "date": "2024-01-15",
      "scheduled": 25,
      "done": 20,
      "overdue": 2,
      "pending": 3,
      "late": 1
    },
    {
      "type": "employee",
      "employee": {
        "id": 2,
        "name": "ููุธู 1",
        "avatarUrl": "/uploads/avatars/2_1234567890.jpg",
        "role": "employee"
      },
      "daily": {
        "tasksDone": 5,
        "onTime": 4,
        "late": 1,
        "coverage": 2,
        "attendance": {
          "present": true,
          "loginTime": "08:30"
        }
      },
      "monthly": {
        "tasksDone": 120,
        "onTime": 110,
        "late": 10,
        "coverage": 15,
        "attendance": {
          "daysPresent": 22,
          "month": "ููุงูุฑ 2024"
        }
      }
    },
    {
      "type": "overdue",
      "tasks": [
        {
          "id": 1,
          "title": "ุชุณููุงุช ูุตุฑู ุงูุฑุดูุฏ",
          "assignedTo": "ููุธู 1",
          "dueTime": "10:00"
        }
      ]
    },
    {
      "type": "coverage",
      "coverage": [
        {
          "name": "ููุธู 1",
          "count": 5
        }
      ]
    },
    {
      "type": "attendance",
      "date": "2024-01-15",
      "present": 4,
      "records": [
        {
          "name": "ููุธู 1",
          "time": "08:30"
        }
      ]
    },
    {
      "type": "categories",
      "date": "2024-01-15",
      "categories": [
        {
          "name": "ุชุณููุงุช ุงูุจููู",
          "count": 10
        }
      ]
    },
    {
      "type": "trends",
      "week": [
        {
          "date": "2024-01-08",
          "total": 20,
          "completed": 18
        }
      ]
    },
    {
      "type": "recognition",
      "topPerformers": [
        {
          "name": "ููุธู 1",
          "tasks": 25,
          "onTime": 24
        }
      ]
    }
  ]
}
```

**ููุงุญุธุงุช:**
- ูุง ูุชุทูุจ ูุตุงุฏูุฉ (ูููู ุงููุตูู ุจุฏูู ุชููู)
- ูู ูุถุน ุงูุฒุงุฆุฑ (`visitorMode=true`): ูุชู ุฅุฎูุงุก ุงูุฃุณูุงุก ูุงูุตูุฑ

##### `GET /api/tv-dashboard/settings`
ุฌูุจ ุฅุนุฏุงุฏุงุช ููุญุฉ ุงูุชุญูู

**ุงูุตูุงุญูุงุช:** `admin` ููุท

##### `PUT /api/tv-dashboard/settings`
ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ููุญุฉ ุงูุชุญูู

**ุงูุตูุงุญูุงุช:** `admin` ููุท

**Request Body:**
```json
{
  "slideInterval": 15,
  "autoRefresh": true,
  "refreshInterval": 60,
  "visitorMode": false
}
```

#### 10. ุณุฌู ุงูุชุฏููู (`/api/audit-log`)

##### `GET /api/audit-log`
ุฌูุจ ุณุฌู ุงูุชุฏููู

**Query Parameters:**
- `dateFrom` (optional): ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- `dateTo` (optional): ุชุงุฑูุฎ ุงูููุงูุฉ
- `userId` (optional): ูุนุฑู ุงููุณุชุฎุฏู
- `action` (optional): ููุน ุงูุฅุฌุฑุงุก

**ุงูุตูุงุญูุงุช:** `admin` ููุท

---

## ๐จ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)

### ุงูุจููุฉ

#### ุงูููููุงุช (Components)

##### ููููุงุช UI ุงูุฃุณุงุณูุฉ (`/components/ui/`)

**`button.tsx`**
- ูููู ุฒุฑ ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- ูุชุบูุฑุงุช: `default`, `destructive`, `outline`, `ghost`, `link`
- ุฃุญุฌุงู: `sm`, `md`, `lg`, `xl`

**`badge.tsx`**
- ุดุงุฑุงุช ุงูุญุงูุฉ
- ูุชุบูุฑุงุช: `default`, `success`, `warning`, `info`, `destructive`

**`avatar.tsx`**
- ุนุฑุถ ุงูุตูุฑ ุงูุดุฎุตูุฉ ุฃู ุงูุฃุญุฑู ุงูุฃููู
- ุฃุญุฌุงู: `sm`, `md`, `lg`, `xl`
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุชุญููู ุงูุตูุฑ

**`toast.tsx`**
- ุฅุดุนุงุฑุงุช ููุจุซูุฉ
- ูุชุบูุฑุงุช: `success`, `error`, `warning`, `info`

##### ููููุงุช ุงูุชุฎุทูุท (`/components/layout/`)

**`sidebar.tsx`**
- ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุงูุฑุฆูุณูุฉ
- ูุนุฑุถ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ูููุณุชุฎุฏู ุงูุญุงูู
- ุชููู ุจูู ุงูุตูุญุงุช

**`realtime-indicator.tsx`**
- ูุคุดุฑ ุญุงูุฉ ุงูุงุชุตุงู WebSocket
- ูุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู (ูุชุตู/ุบูุฑ ูุชุตู)

#### ุงูุตูุญุงุช (Pages)

##### ุตูุญุงุช ุงููุฏูุฑ (`/pages/admin/`)

**`Users.js`**
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐูุ ุชูุนูู/ุชุนุทูู
- ุนุฑุถ ุงูุตูุฑ ุงูุดุฎุตูุฉ

**`Reports.js`**
- ุนุฑุถ ุงูุชูุงุฑูุฑ
- ุชุตุฏูุฑ Excel/PDF

**`TVSettings.js`**
- ุฅุนุฏุงุฏุงุช ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ
- ุชูููู ูุชุฑุงุช ุงูุดุฑุงุฆุญ ูุงูุชุญุฏูุซ ุงูุชููุงุฆู

**`AuditLog.js`**
- ุนุฑุถ ุณุฌู ุงูุชุฏููู
- ุชุตููุฉ ุญุณุจ ุงูุชุงุฑูุฎุ ุงููุณุชุฎุฏูุ ุงูุฅุฌุฑุงุก

##### ุตูุญุงุช ุงููุดุฑู (`/pages/supervisor/`)

**`Categories.js`**
- ุฅุฏุงุฑุฉ ุงููุฆุงุช
- ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐู

**`Templates.js`**
- ุฅุฏุงุฑุฉ ููุงูุจ ุงูููุงู
- ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐู

**`Schedules.js`**
- ุฅุฏุงุฑุฉ ุงูุฌุฏุงูู ุงูุฒูููุฉ
- ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐู

##### ุตูุญุงุช ุงูููุธู (`/pages/employee/`)

**`Tasks.js`**
- ุนุฑุถ ุงูููุงู ุงูููููุฉ ูุงูุฎุงุตุฉ
- ุชูููุฐ ุงูููุงู
- ุงูุจุญุซ ูุงูุชุตููุฉ
- ุชูููุฐ "ุนูู ุงูููุงุจุฉ" ููููุงู ุงููุฌุฏููุฉ

##### ุงูุตูุญุงุช ุงููุดุชุฑูุฉ

**`dashboard-v2.tsx`**
- ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- ุจุทุงูุงุช ุงูุญุงูุฉ

**`tasks-v2.tsx`**
- ุนุฑุถ ุฌููุน ุงูููุงู
- ุงูุจุญุซ ูุงูุชุตููุฉ ุงููุชูุฏูุฉ
- ุชูููุฐ ุงูููุงู

**`schedules-v2.tsx`**
- ุนุฑุถ ุงูุฌุฏุงูู ุงูุฒูููุฉ
- ุงูุจุญุซ ูุงูุชุตููุฉ

**`templates-v2.tsx`**
- ุนุฑุถ ุงูููุงูุจ
- ุงูุจุญุซ ูุงูุชุตููุฉ

**`categories-v2.tsx`**
- ุนุฑุถ ุงููุฆุงุช
- ุงูุจุญุซ ูุงูุชุตููุฉ

**`reports-v2.tsx`**
- ุนุฑุถ ุงูุชูุงุฑูุฑ
- ุชุตุฏูุฑ Excel/PDF

**`attendance-v2.tsx`**
- ุนุฑุถ ุณุฌู ุงูุญุถูุฑ
- ุชูููู ุงูุญุถูุฑ

**`change-password-v2.tsx`**
- ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- ุฑูุน/ุญุฐู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ

**`login-v2.tsx`**
- ุชุณุฌูู ุงูุฏุฎูู
- ุชุตููู ุงุญุชุฑุงูู

**`tv-dashboard-premium.tsx`** โญ
- ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ ุงูุงุญุชุฑุงููุฉ
- ุนุฑุถ ุงูุดุฑุงุฆุญ ุจุดูู "story-style"
- ุดุฑุงุฆุญ ูุฎุตุตุฉ ููู ููุธู
- ุฅุญุตุงุฆูุงุช ููููุฉ ูุดูุฑูุฉ
- ุนุฑุถ ุงูุตูุฑ ุงูุดุฎุตูุฉ
- ุฃููุงู ุฑุณููุฉ

### ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management)

#### Zustand Store (`/store/useAuthStore.ts`)

```typescript
interface User {
  id: number;
  name: string;
  email: string;
  role: 'admin' | 'supervisor' | 'employee';
  can_create_ad_hoc?: boolean;
  avatarUrl?: string;
}

interface AuthState {
  user: User | null;
  token: string | null;
  login: (email: string, password: string) => Promise<void>;
  logout: () => void;
  isAuthenticated: boolean;
}
```

### React Hooks ุงููุฎุตุตุฉ

#### `useToast`
ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช ุงูููุจุซูุฉ

#### `useWebSocket`
ุงูุงุชุตุงู WebSocket ููุชุญุฏูุซุงุช ุงูููุฑูุฉ

#### `useDebounce`
ุชุฃุฎูุฑ ุงูุจุญุซ ูุงูุชุตููุฉ

### ุงูุชูุฌูู (Routing)

**`App.tsx`**
```typescript
<Route path="/" element={<DashboardV2 />} />
<Route path="/login" element={<LoginV2 />} />
<Route path="/tasks" element={<TasksV2 />} />
<Route path="/schedules" element={<SchedulesV2 />} />
<Route path="/templates" element={<TemplatesV2 />} />
<Route path="/categories" element={<CategoriesV2 />} />
<Route path="/reports" element={<ReportsV2 />} />
<Route path="/attendance" element={<AttendanceV2 />} />
<Route path="/change-password" element={<ChangePasswordV2 />} />
<Route path="/users" element={<UsersV2 />} />
<Route path="/audit-log" element={<AuditLogV2 />} />
<Route path="/tv-settings" element={<TVSettingsV2 />} />
<Route path="/tv" element={<TVDashboardPremium />} />
```

### ุงูุชุตููู ูุงูุฃููุงู

#### ูุธุงู ุงูุฃููุงู (Dark Professional Theme)

```css
/* ุงูุฃููุงู ุงูุฃุณุงุณูุฉ */
--background: #0f172a;        /* ุฎูููุฉ ุฏุงููุฉ */
--foreground: #f1f5f9;         /* ูุต ูุงุชุญ */
--card: #1e293b;               /* ุจุทุงูุงุช ุฏุงููุฉ */
--card-foreground: #f1f5f9;
--primary: #3b82f6;            /* ุฃุฒุฑู ุฑุณูู */
--primary-foreground: #ffffff;
--secondary: #475569;
--accent: #3b82f6;
--destructive: #ef4444;        /* ุฃุญูุฑ ููุฎุทุฃ */
--success: #10b981;            /* ุฃุฎุถุฑ ูููุฌุงุญ */
--warning: #f59e0b;            /* ุจุฑุชูุงูู ููุชุญุฐูุฑ */
```

#### Tailwind CSS

- ุงุณุชุฎุฏุงู Tailwind CSS 3.4.1
- ููููุงุช ูุฎุตุตุฉ ุจุงุณุชุฎุฏุงู `@layer`
- ุชุตููู ูุชุฌุงูุจ (Responsive)

---

## โ๏ธ ุงูุฎุงุฏู ุงูุฎููู (Backend)

### ุงูุจููุฉ

#### Controllers (`/controllers/`)

**`authController.js`**
- `login`: ุชุณุฌูู ุงูุฏุฎูู
- `verifyToken`: ุงูุชุญูู ูู ุงูุชููู
- `changePassword`: ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

**`usersController.js`**
- `getUsers`: ุฌูุจ ุงููุณุชุฎุฏููู
- `getUser`: ุฌูุจ ูุณุชุฎุฏู ูุญุฏุฏ
- `createUser`: ุฅูุดุงุก ูุณุชุฎุฏู
- `updateUser`: ุชุญุฏูุซ ูุณุชุฎุฏู
- `toggleUserActive`: ุชูุนูู/ุชุนุทูู
- `uploadAvatar`: ุฑูุน ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
- `deleteAvatar`: ุญุฐู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ

**`tasksController.js`**
- `getDailyTasks`: ุฌูุจ ุงูููุงู ุงูููููุฉ
- `getAdHocTasks`: ุฌูุจ ุงูููุงู ุงูุฎุงุตุฉ
- `searchTasks`: ุงูุจุญุซ ูู ุงูููุงู
- `createAdHocTask`: ุฅูุดุงุก ูููุฉ ุฎุงุตุฉ
- `executeTask`: ุชูููุฐ ูููุฉ
- `getExecutions`: ุฌูุจ ุณุฌู ุงูุชูููุฐ
- `addAttachment`: ุฅุถุงูุฉ ูุฑูู
- `generateDailyTasks`: ุชูููุฏ ุงูููุงู ุงูููููุฉ

**`tvDashboardController.js`**
- `getDashboardData`: ุฌูุจ ุจูุงูุงุช ููุญุฉ ุงูุชุญูู
- `getDashboardSettings`: ุฌูุจ ุงูุฅุนุฏุงุฏุงุช
- `updateDashboardSettings`: ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช

#### Middleware (`/middleware/`)

**`auth.js`**
- `authenticate`: ุงูุชุญูู ูู ุงูุชููู JWT
- `authorize`: ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

**`upload.js`**
- ุฅุนุฏุงุฏ Multer ูุฑูุน ุงููููุงุช
- ููุชุฑุฉ ุงููููุงุช (ุตูุฑ ููุท)
- ุญุฏ ุงูุญุฌู: 5MB

**`rateLimiter.js`**
- `apiLimiter`: ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช ุงูุนุงูุฉ
- `authLimiter`: ุชุญุฏูุฏ ูุนุฏู ุชุณุฌูู ุงูุฏุฎูู
- `taskExecutionLimiter`: ุชุญุฏูุฏ ูุนุฏู ุชูููุฐ ุงูููุงู

**`validator.js`**
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู Zod

#### Routes (`/routes/`)

ุฌููุน ุงููุณุงุฑุงุช ุชุณุชุฎุฏู:
- `express.Router()`
- Middleware ุงููุตุงุฏูุฉ ูุงูุชูููุถ
- Rate limiting
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

#### Cron Jobs (`/cron/`)

**`generateDailyTasks.js`**
- ููุดุบู ุชููุงุฆูุงู ูู ููู ุงูุณุงุนุฉ 1:00 ุต UTC (4:00 ุต ุจุชูููุช ุจุบุฏุงุฏ)
- ูููุฏ ุงูููุงู ุงูููููุฉ ูู ุงูุฌุฏุงูู ุงููุดุทุฉ

**`checkOverdueTasks.js`**
- ููุดุบู ูู 15 ุฏูููุฉ
- ูุชุญูู ูู ุงูููุงู ุงููุชุฃุฎุฑุฉ ููุญุฏุซ ุญุงูุชูุง

### WebSocket Server

**`server/index.js`**
```javascript
const wss = new WebSocket.Server({ server });

wss.on('connection', (ws) => {
  // ุฅุฑุณุงู ุชุญุฏูุซุงุช ููุฑูุฉ ุนูุฏ:
  // - ุชูููุฐ ูููุฉ
  // - ุฅูุดุงุก ูููุฉ
  // - ุชุญุฏูุซ ุฌุฏูู
});
```

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

- Global error handler
- Custom logger
- Request logger

---

## ๐บ ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ (TV Dashboard)

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

#### 1. ุงูุดุฑูุญุฉ ุงูุงูุชุชุงุญูุฉ (Opening Slide)
- ุนููุงู ุงููุณู
- ุงุณู ุงูุดุฑูุฉ
- ุงูุชุงุฑูุฎ ูุงูููุช ุงูุญุงูู (ุจุชูููุช ุจุบุฏุงุฏ)
- ุชุตููู ุงุญุชุฑุงูู ูุน ุฑุณูู ูุชุญุฑูุฉ

#### 2. ูุธุฑุฉ ุนุงูุฉ (Overview Slide)
- ุฅุญุตุงุฆูุงุช ุงูููู:
  - ุงูููุงู ุงููุฌุฏููุฉ
  - ุงูููุงู ุงูููุชููุฉ
  - ุงูููุงู ุงููุชุฃุฎุฑุฉ
  - ุงูููุงู ููุฏ ุงูุงูุชุธุงุฑ
- ูุณุจุฉ ุงูุฅูุฌุงุฒ (ุฏุงุฆุฑุฉ ุชูุฏู)

#### 3. ุดุฑุงุฆุญ ุงูููุธููู (Employee Slides) โญ
**ุดุฑูุญุฉ ูุฎุตุตุฉ ููู ููุธู ูุดุท:**

**ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ:**
- ุนุฏุฏ ุงูููุงู ุงูููุฌุฒุฉ
- ุนุฏุฏ ุงูููุงู ูู ุงูููุช
- ุนุฏุฏ ุงูููุงู ุงููุชุฃุฎุฑุฉ
- ุงูุชุบุทูุฉ (ุนุฏุฏ ุงูููุงู ุงููููุฐุฉ ุจุงูููุงุจุฉ)
- ุญุงูุฉ ุงูุญุถูุฑ (ุญุงุถุฑ/ุบูุฑ ุญุงุถุฑ)
- ููุช ุชุณุฌูู ุงูุฏุฎูู

**ุงูุฅุญุตุงุฆูุงุช ุงูุดูุฑูุฉ:**
- ุนุฏุฏ ุงูููุงู ุงูููุฌุฒุฉ ูู ุงูุดูุฑ
- ุนุฏุฏ ุงูููุงู ูู ุงูููุช
- ุนุฏุฏ ุงูููุงู ุงููุชุฃุฎุฑุฉ
- ุงูุชุบุทูุฉ ุงูุดูุฑูุฉ
- ุนุฏุฏ ุฃูุงู ุงูุญุถูุฑ
- ุงุณู ุงูุดูุฑ

**ุงูุนุฑุถ:**
- ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ (ุฃู ุงูุฃุญุฑู ุงูุฃููู)
- ุงูุงุณู ูุงูุฏูุฑ
- ุชุตููู "story-style" ุงุญุชุฑุงูู

#### 4. ุงูููุงู ุงููุชุฃุฎุฑุฉ (Overdue Slide)
- ูุงุฆูุฉ ุงูููุงู ุงููุชุฃุฎุฑุฉ
- ุงุณู ุงููููุฉ
- ุงููุฎุตุต ูู
- ููุช ุงูุงุณุชุญูุงู

#### 5. ุงูุชุบุทูุฉ (Coverage Slide)
- ูู ูุงู ุจููุงู ุงูุขุฎุฑูู
- ุชุฑุชูุจ ุญุณุจ ุนุฏุฏ ุงูููุงู
- ุนุฑุถ ุงุญุชุฑุงูู ูุน ุฑุชุจ

#### 6. ุงูุญุถูุฑ (Attendance Slide)
- ุนุฏุฏ ุงูููุธููู ุงูุญุงุถุฑูู ุงูููู
- ูุงุฆูุฉ ุงูููุธููู ุงูุญุงุถุฑูู
- ููุช ุชุณุฌูู ุงูุฏุฎูู ููู ููุธู

#### 7. ุชูุฒูุน ุงููุฆุงุช (Categories Slide)
- ุชูุฒูุน ุงูููุงู ุญุณุจ ุงููุฆุงุช
- ุนุฏุฏ ุงูููุงู ููู ูุฆุฉ
- ูุณุจุฉ ูุฆููุฉ
- ุฃุดุฑุทุฉ ุชูุฏู

#### 8. ุงูุงุชุฌุงูุงุช ุงูุฃุณุจูุนูุฉ (Trends Slide)
- ุฑุณู ุจูุงูู ุฃุณุจูุนู
- ุนุฏุฏ ุงูููุงู ุงููููุฉ ูุงูููุชููุฉ ููู ููู
- ูุณุจุฉ ุงูุฅูุฌุงุฒ

#### 9. ุฃูุถู ุงูุฃุฏุงุก (Recognition Slide)
- ุฃูุถู ุงูููุธููู ุฃุฏุงุกู
- ุนุฏุฏ ุงูููุงู ุงูููุฌุฒุฉ
- ุนุฏุฏ ุงูููุงู ูู ุงูููุช
- ููุฏุงููุงุช ููุซูุงุซุฉ ุงูุฃูุงุฆู

### ุงูููุฒุงุช ุงูุชูููุฉ

#### ุงูุชุตููู
- **ุฃููุงู ุฑุณููุฉ**: ุฃุฒุฑู ุฏุงููุ ุฑูุงุฏู ุฏุงููุ ุฃุณูุฏ
- **Story-style**: ุชุตููู ูุดุจู ุงููุตุต ุนูู ูุณุงุฆู ุงูุชูุงุตู
- **Framer Motion**: ุฑุณูู ูุชุญุฑูุฉ ุณูุณุฉ ูุงุญุชุฑุงููุฉ
- **Responsive**: ูุนูู ุนูู ุฌููุน ุฃุญุฌุงู ุงูุดุงุดุงุช

#### ุงูุชููู
- **ุชููุงุฆู**: ุชุบููุฑ ุงูุดุฑุงุฆุญ ุชููุงุฆูุงู ุญุณุจ ุงูุฅุนุฏุงุฏุงุช
- **ูุฏูู**: ุงุณุชุฎุฏุงู ุงูุฃุณูู (โ โ) ุฃู (โ โ)
- **ูุคุดุฑุงุช**: ููุงุท ูู ุงูุฃุณูู ููุชููู ุงููุจุงุดุฑ
- **ุนุฏุงุฏ**: ุนุฑุถ ุฑูู ุงูุดุฑูุญุฉ ุงูุญุงููุฉ

#### ุงูุชุญุฏูุซ
- **ุชููุงุฆู**: ุชุญุฏูุซ ุงูุจูุงูุงุช ุชููุงุฆูุงู ุญุณุจ ุงูุฅุนุฏุงุฏุงุช
- **ูุฏูู**: ุฅุนุงุฏุฉ ุชุญููู ุนูุฏ ุงูุถุบุท ุนูู "ุฅุนุงุฏุฉ ุงููุญุงููุฉ" ูู ุญุงูุฉ ุงูุฎุทุฃ

#### ูุถุน ุงูุฒุงุฆุฑ
- **ุนุงุฏู**: ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช
- **ุฒุงุฆุฑ**: ุฅุฎูุงุก ุงูุฃุณูุงุก ูุงูุตูุฑ (ููุญูุงูุฉ)

### ุงูุฅุนุฏุงุฏุงุช

**`/tv-settings`** (ูููุฏูุฑ ููุท):
- **ูุชุฑุฉ ุงูุดุฑุงุฆุญ**: ุนุฏุฏ ุงูุซูุงูู ุจูู ูู ุดุฑูุญุฉ (ุงูุชุฑุงุถู: 10 ุซูุงูู)
- **ุงูุชุญุฏูุซ ุงูุชููุงุฆู**: ุชูุนูู/ุชุนุทูู
- **ูุชุฑุฉ ุงูุชุญุฏูุซ**: ุนุฏุฏ ุงูุซูุงูู ุจูู ูู ุชุญุฏูุซ (ุงูุชุฑุงุถู: 30 ุซุงููุฉ)
- **ูุถุน ุงูุฒุงุฆุฑ**: ุชูุนูู/ุชุนุทูู

### ุงููุตูู

- **URL**: `/tv`
- **ุจุฏูู ูุตุงุฏูุฉ**: ูููู ุงููุตูู ุจุฏูู ุชุณุฌูู ุฏุฎูู
- **ูุถุน ุงูุฒุงุฆุฑ**: `/tv?visitor=1`

---

## ๐ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. Real-time Updates (WebSocket)

#### ุงูููุฒุงุช
- ุชุญุฏูุซุงุช ููุฑูุฉ ุนูุฏ ุชูููุฐ ุงูููุงู
- ุชุญุฏูุซุงุช ููุฑูุฉ ุนูุฏ ุฅูุดุงุก ุงูููุงู
- ุชุญุฏูุซุงุช ููุฑูุฉ ุนูุฏ ุชุญุฏูุซ ุงูุฌุฏุงูู
- ูุคุดุฑ ุญุงูุฉ ุงูุงุชุตุงู

#### ุงูุชุทุจูู
- **Backend**: WebSocket server ูู `server/index.js`
- **Frontend**: Hook `useWebSocket` ูู `client/src/hooks/use-websocket.ts`
- **Provider**: `RealtimeProvider` ูู `client/src/components/providers/RealtimeProvider.tsx`

### 2. PWA (Progressive Web App)

#### ุงูููุฒุงุช
- ูุงุจู ููุชุซุจูุช ุนูู ุงูุฃุฌูุฒุฉ
- ุฏุนู Offline (ุฌุฒุฆู)
- Service Worker
- Manifest

#### ุงููููุงุช
- `client/public/manifest.json`
- `client/public/service-worker.js`

### 3. ุงูุจุญุซ ูุงูุชุตููุฉ ุงููุชูุฏูุฉ

#### ุงูููุฒุงุช
- ุจุญุซ ูู ุฌููุน ุงูุญููู
- ุชุตููุฉ ูุชุนุฏุฏุฉ ุงููุนุงููุฑ
- ุชุตููุฉ ูุงุจูุฉ ููุทู
- ุดุงุฑุงุช ููููุงุชุฑ ุงููุดุทุฉ
- ุนุฏุฏ ุงููุชุงุฆุฌ

#### ุงูุชุทุจูู
- ุตูุญุงุช: `schedules-v2.tsx`, `templates-v2.tsx`, `categories-v2.tsx`
- ููููุงุช: `SearchableSelect`, `Badge`

### 4. ุงูุตูุฑ ุงูุดุฎุตูุฉ

#### ุงูููุฒุงุช
- ุฑูุน ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
- ุญุฐู ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
- ุนุฑุถ ุงูุตูุฑุฉ ูู ุงููุธุงู
- ุงูุฃุญุฑู ุงูุฃููู ูุจุฏูู

#### ุงูุชุทุจูู
- **Backend**: `POST /api/users/avatar`, `DELETE /api/users/avatar`
- **Frontend**: `Avatar` component, `change-password-v2.tsx`

### 5. ุชูููุฐ "ุนูู ุงูููุงุจุฉ"

#### ุงูููุฒุงุช
- ุชูููุฐ ูููุฉ ูุฌุฏููุฉ ุจุงูููุงุจุฉ ุนู ููุธู ุขุฎุฑ
- ุนุฑุถ ูุงุถุญ ูููููุฉ ุงููููุฐุฉ ุจุงูููุงุจุฉ
- ุชุชุจุน ูู ุณุฌู ุงูุชูููุฐ

#### ุงูุชุทุจูู
- **Backend**: `on_behalf_of_user_id` ูู `task_executions`
- **Frontend**: ุฎูุงุฑ "ุชูููุฐ ุจุงูููุงุจุฉ" ูู `tasks-v2.tsx`

### 6. ุงูุชูุงุฑูุฑ ูุงูุชุตุฏูุฑ

#### ุงูููุฒุงุช
- ุชูุงุฑูุฑ ููููุฉ
- ุชูุงุฑูุฑ ุดูุฑูุฉ
- ุชูุงุฑูุฑ ุงูุชุบุทูุฉ
- ุชุตุฏูุฑ Excel
- ุชุตุฏูุฑ PDF

#### ุงูุชุทุจูู
- **Backend**: `reportsController.js`, `ExcelJS`, `PDFKit`
- **Frontend**: `reports-v2.tsx`

---

## ๐ ุงูุฃูุงู ูุงูุญูุงูุฉ

### 1. ุงููุตุงุฏูุฉ ูุงูุชูููุถ

#### JWT (JSON Web Tokens)
- **ูุฏุฉ ุงูุตูุงุญูุฉ**: 7 ุฃูุงู (ูุงุจูุฉ ููุชุนุฏูู)
- **ุงูุชุฎุฒูู**: `localStorage` ูู Frontend
- **ุงูุชุญูู**: Middleware `authenticate` ูู ูู ุทูุจ

#### ุงูุตูุงุญูุงุช (Role-Based Access Control)
- **Admin**: ุตูุงุญูุงุช ูุงููุฉ
- **Supervisor**: ุฅุฏุงุฑุฉ ุงููุชุงููุฌ ูุงูุฌุฏุงูู
- **Employee**: ุชูููุฐ ุงูููุงู ููุท
- **Viewer**: ุนุฑุถ ููุท

### 2. Rate Limiting

#### ุงูุญุฏูุฏ
- **API ุงูุนุงูุฉ**: 100 ุทูุจ/ุฏูููุฉ
- **ุชุณุฌูู ุงูุฏุฎูู**: 5 ูุญุงููุงุช/15 ุฏูููุฉ
- **ุชูููุฐ ุงูููุงู**: 50 ุทูุจ/ุฏูููุฉ

#### ุงูุชุทุจูู
- `express-rate-limit` ูู `middleware/rateLimiter.js`

### 3. Security Headers

#### Helmet
- ุญูุงูุฉ ูู XSS
- ุญูุงูุฉ ูู Clickjacking
- ุฅุฒุงูุฉ ูุนูููุงุช ุงูุฎุงุฏู

#### ุงูุชุทุจูู
- `helmet` ูู `server/index.js`

### 4. ุงูุชุญูู ูู ุงูุจูุงูุงุช

#### Zod
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ
- ููุน ุญูู SQL
- ููุน XSS

#### ุงูุชุทุจูู
- `zod` ูู `middleware/validator.js`

### 5. ุชุดููุฑ ูููุงุช ุงููุฑูุฑ

#### Bcrypt
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ูุจู ุงูุญูุธ
- ููุงุฑูุฉ ุขููุฉ ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู

#### ุงูุชุทุจูู
- `bcryptjs` ูู `authController.js`

### 6. ุณุฌู ุงูุชุฏููู

#### Audit Log
- ุชุชุจุน ุฌููุน ุงูุฅุฌุฑุงุกุงุช ุงููููุฉ
- ุญูุธ IP address ู User Agent
- ุชูุงุตูู JSON

#### ุงูุชุทุจูู
- ุฌุฏูู `audit_log` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- Middleware ูุชุณุฌูู ุงูุฅุฌุฑุงุกุงุช

---

## ๐ฆ ุฏููู ุงููุดุฑ

### ุงููุดุฑ ุนูู Render

#### 1. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
1. ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุนูู Render
2. ุงุญูุธ `DATABASE_URL` ูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 2. ุฅุนุฏุงุฏ Web Service
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Environment Variables**:
  ```
  NODE_ENV=production
  PORT=10000
  DATABASE_URL=<your-database-url>
  JWT_SECRET=<strong-secret-key>
  JWT_EXPIRES_IN=7d
  TIMEZONE=Asia/Baghdad
  WS_URL=wss://your-domain.com
  ```

#### 3. ุฅุนุฏุงุฏ Cron Jobs

##### ุฃ) ุชูููุฏ ุงูููุงู ุงูููููุฉ
- **Schedule**: `0 1 * * *` (ูู ููู ุงูุณุงุนุฉ 1:00 ุต UTC)
- **Command**: `node server/cron/generateDailyTasks.js`
- **Environment Variables**: ููุณ ูุชุบูุฑุงุช Web Service

##### ุจ) ูุญุต ุงูููุงู ุงููุชุฃุฎุฑุฉ
- **Schedule**: `*/15 * * * *` (ูู 15 ุฏูููุฉ)
- **Command**: `node server/cron/checkOverdueTasks.js`
- **Environment Variables**: ููุณ ูุชุบูุฑุงุช Web Service

#### 4. ุชุดุบูู ุงููุฌุฑุงุช
ุจุนุฏ ุงููุดุฑ ุงูุฃููุ ูู ุจุชุดุบูู:
```bash
npm run migrate
npm run seed
```

### ุงููุดุฑ ุนูู VPS

#### 1. ุฅุนุฏุงุฏ ุงูุฎุงุฏู
```bash
# ุชุซุจูุช Node.js ู PostgreSQL
sudo apt update
sudo apt install nodejs npm postgresql

# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
sudo -u postgres createdb sttlment
```

#### 2. ุฅุนุฏุงุฏ ุงููุดุฑูุน
```bash
# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone <repository-url>
cd sttlment

# ุชุซุจูุช ุงูุชุจุนูุงุช
npm install
cd client && npm install && cd ..

# ุฅุนุฏุงุฏ .env
cp .env.example .env
# ุนุฏูู .env ุจุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

# ุชุดุบูู ุงููุฌุฑุงุช
npm run migrate
npm run seed
```

#### 3. ุฅุนุฏุงุฏ PM2
```bash
# ุชุซุจูุช PM2
npm install -g pm2

# ุชุดุบูู ุงูุชุทุจูู
pm2 start npm --name "sttlment" -- start

# ุญูุธ ุงูุฅุนุฏุงุฏุงุช
pm2 save
pm2 startup
```

#### 4. ุฅุนุฏุงุฏ Nginx
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### 5. ุฅุนุฏุงุฏ SSL (Let's Encrypt)
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

---

## ๐๏ธ ุฏููู ุงูุชุทููุฑ

### ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุงููุญููุฉ

#### 1. ุงููุชุทูุจุงุช
- Node.js 16+
- PostgreSQL 12+
- npm ุฃู yarn

#### 2. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
# Backend
npm install

# Frontend
cd client && npm install && cd ..
```

#### 3. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
createdb sttlment

# ุฅุนุฏุงุฏ .env
NODE_ENV=development
PORT=5001
DATABASE_URL=postgresql://user:password@localhost:5432/sttlment
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN=7d
TIMEZONE=Asia/Baghdad
WS_URL=ws://localhost:5001
```

#### 4. ุชุดุบูู ุงููุฌุฑุงุช
```bash
npm run migrate
npm run seed
```

#### 5. ุชุดุบูู ุงูุชุทุจูู
```bash
# ุชุดุบูู Backend ู Frontend ูุนุงู
npm run dev

# ุฃู ุจุดูู ูููุตู:
# Terminal 1: Backend
npm run server:dev

# Terminal 2: Frontend
npm run client:dev
```

### ูููู ุงูููุฏ

#### Frontend
- **TypeScript**: ูููุชุงุจุฉ ุงูุขููุฉ
- **Components**: ููููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- **Hooks**: ููุทู ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- **Store**: ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ุงููุฑูุฒูุฉ

#### Backend
- **MVC Pattern**: Controllers, Routes, Models
- **Middleware**: ูุนุงูุฌุฉ ุงูุทูุจุงุช
- **Utils**: ุฃุฏูุงุช ูุณุงุนุฏุฉ

### ุฃูุถู ุงูููุงุฑุณุงุช

#### Frontend
- ุงุณุชุฎุฏุงู TypeScript ููุฃููุงุน
- ููููุงุช ุตุบูุฑุฉ ููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
- ุชุญุณูู ุงูุฃุฏุงุก (React.memo, useMemo, useCallback)

#### Backend
- ุงูุชุญูู ูู ุงูุจูุงูุงุช ูู ูู ุทูุจ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
- ุงุณุชุฎุฏุงู Transactions ููุนูููุงุช ุงููุนูุฏุฉ
- ุชุณุฌูู ุงูุฃุฎุทุงุก

### ุงูุงุฎุชุจุงุฑ

#### ุงุฎุชุจุงุฑ ูุฏูู
1. ุชุณุฌูู ุงูุฏุฎูู ููุฏูุฑ
2. ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
3. ุฅูุดุงุก ูุฆุฉ ููุงูุจ ูุฌุฏูู
4. ุงูุชุญูู ูู ุชูููุฏ ุงูููุงู ุงูููููุฉ
5. ุชูููุฐ ูููุฉ
6. ุนุฑุถ ุงูุชูุงุฑูุฑ
7. ุนุฑุถ ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

#### 1. `EADDRINUSE: address already in use :::5001`
**ุงูุณุจุจ**: ุงููููุฐ 5001 ูุณุชุฎุฏู ุจุงููุนู

**ุงูุญู**:
```bash
npm run kill-port-5000
npm run dev
```

#### 2. `Module not found: Error: Can't resolve '@/components'`
**ุงูุณุจุจ**: ูุดููุฉ ูู path aliases

**ุงูุญู**:
- ุชุฃูุฏ ูู ูุฌูุฏ `craco.config.js`
- ุชุฃูุฏ ูู `tsconfig.json` ูุญุชูู ุนูู paths
- ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู

#### 3. `useToast must be used within ToastProvider`
**ุงูุณุจุจ**: `ToastProvider` ุบูุฑ ููุฌูุฏ ูู ุงูุดุฌุฑุฉ

**ุงูุญู**:
- ุชุฃูุฏ ูู `ToastProvider` ูู `App.tsx` ุฃู `Providers.tsx`

#### 4. `Proxy error: Could not proxy request`
**ุงูุณุจุจ**: Backend ุบูุฑ ูุนูู

**ุงูุญู**:
- ุชุฃูุฏ ูู ุชุดุบูู Backend ุนูู ุงููููุฐ 5001
- ุชุญูู ูู `DATABASE_URL` ูู `.env`

#### 5. `SyntaxError: "[object Object]" is not valid JSON`
**ุงูุณุจุจ**: ูุญุงููุฉ `JSON.parse()` ุนูู object

**ุงูุญู**:
- ุชุญูู ูู ููุน ุงูุจูุงูุงุช ูุจู `JSON.parse()`
- ุงุณุชุฎุฏู `typeof value === 'string'` ูุจู ุงูุชุญููู

#### 6. ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุง ุชุชุตู
**ุงูุณุจุจ**: `DATABASE_URL` ุบูุฑ ุตุญูุญ

**ุงูุญู**:
- ุชุญูู ูู `DATABASE_URL` ูู `.env`
- ุชุฃูุฏ ูู ุฃู PostgreSQL ูุนูู
- ุชุญูู ูู ุงูุตูุงุญูุงุช

#### 7. WebSocket ูุง ูุชุตู
**ุงูุณุจุจ**: `REACT_APP_WS_URL` ุบูุฑ ุตุญูุญ

**ุงูุญู**:
- ุชุญูู ูู `REACT_APP_WS_URL` ูู `client/.env`
- ุชุฃูุฏ ูู ุฃู Backend ูุนูู ุนูู ุงููููุฐ 5001
- ุชุญูู ูู Console ููุฃุฎุทุงุก

#### 8. ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ ูุง ุชุธูุฑ
**ุงูุณุจุจ**: ูุณุงุฑ ุงูุตูุฑุฉ ุบูุฑ ุตุญูุญ

**ุงูุญู**:
- ุชุญูู ูู `uploads/avatars/` ููุฌูุฏ
- ุชุญูู ูู ุฃู Backend ูุฎุฏู ุงููููุงุช ุงูุซุงุจุชุฉ
- ุชุญูู ูู `avatar_url` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุงูุชูููุช
- ุฌููุน ุงูุฃููุงุช ุชูุญูุธ ูู **UTC** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฌููุน ุงูุฃููุงุช ุชูุนุฑุถ ุจุชูููุช **ุจุบุฏุงุฏ (Asia/Baghdad)** ูู ุงููุงุฌูุฉ
- ุงุณุชุฎุฏุงู `moment-timezone` ููุชุญููู

### ุงูููุงู ุงูููููุฉ
- ุชูููุฏ ุชููุงุฆูุงู ูู ููู ุงูุณุงุนุฉ **1:00 ุต UTC** (4:00 ุต ุจุชูููุช ุจุบุฏุงุฏ)
- ูููู ุชูููุฏูุง ูุฏููุงู ูู `/api/tasks/generate-daily`

### ุงูููุงู ุงููุชุฃุฎุฑุฉ
- ุชููุญุต ูู **15 ุฏูููุฉ** ุชููุงุฆูุงู
- ูุชู ุชุญุฏูุซ ุงูุญุงูุฉ ุชููุงุฆูุงู

### ุงูุญุถูุฑ
- ููุณุฌู ุชููุงุฆูุงู ุนูุฏ **ุฃูู ุชุณุฌูู ุฏุฎูู** ูููู
- ูุง ูููู ุชุณุฌูู ุงูุญุถูุฑ ูุฏููุงู

### ููุญุฉ ุงูุชุญูู ุงูุชููุฒููููุฉ
- **ูุง ุชุชุทูุจ ูุตุงุฏูุฉ** (ูููู ุงููุตูู ุจุฏูู ุชุณุฌูู ุฏุฎูู)
- **ูุถุน ุงูุฒุงุฆุฑ**: ุฅุฎูุงุก ุงูุฃุณูุงุก ูุงูุตูุฑ ููุญูุงูุฉ
- **ุชุญุฏูุซ ุชููุงุฆู**: ุญุณุจ ุงูุฅุนุฏุงุฏุงุช

---

## ๐ ุงูุฎูุงุตุฉ

ูุฐุง ุงููุธุงู ูู ูุธุงู ุดุงูู ููุชูุฏู ูุฅุฏุงุฑุฉ ุงูููุงู ูุงูุญุถูุฑุ ูุน:
- โ ูุงุฌูุฉ ุงุญุชุฑุงููุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู
- โ ููุญุฉ ุชุญูู ุชููุฒููููุฉ ูุชูุฏูุฉ
- โ ุชุญุฏูุซุงุช ููุฑูุฉ
- โ ุฃูุงู ูุญูุงูุฉ ุนุงููุฉ
- โ ุชูุงุฑูุฑ ูุชุญูููุงุช
- โ ุชุตููู ูุชุฌุงูุจ
- โ PWA support

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุงูุฅูุชุงุฌ!** ๐

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2024-01-15
**ุงูุฅุตุฏุงุฑ**: 1.0.0

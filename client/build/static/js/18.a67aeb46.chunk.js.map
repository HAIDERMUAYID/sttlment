{"version":3,"file":"static/js/18.a67aeb46.chunk.js","mappings":"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","sources":["hooks/useHasPermission.ts","pages/tv-settings-v2.tsx","components/ui/skeleton.tsx"],"sourcesContent":["import { useAuthStore } from '@/store/useAuthStore';\nimport { hasPermission } from '@/lib/permissions';\n\n/**\n * التحقق من صلاحية المستخدم لصفحة + إجراء\n * admin يملك كل الصلاحيات تلقائياً\n */\nexport function useHasPermission(pageKey: string, actionKey: string): boolean {\n  const user = useAuthStore((s) => s.user);\n  if (!user) return false;\n  return hasPermission(user.permissions, user.role, pageKey, actionKey);\n}\n\n/**\n * التحقق من صلاحية عرض صفحة (view)\n */\nexport function useCanViewPage(pageKey: string): boolean {\n  return useHasPermission(pageKey, 'view');\n}\n","import { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { motion } from 'framer-motion';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { useToast } from '@/hooks/use-toast';\nimport api from '@/lib/api';\nimport { Tv, Save, RefreshCw, Users, Banknote, LayoutDashboard, GripVertical, ArrowUp, ArrowDown, Timer } from 'lucide-react';\nimport { useHasPermission } from '@/hooks/useHasPermission';\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  DragEndEvent,\n} from '@dnd-kit/core';\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  useSortable,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\nconst DEFAULT_ENABLED_SLIDES: Record<string, boolean> = {\n  opening: true,\n  overview: true,\n  scheduledTasks: true,\n  additionalTasks: true,\n  employee: true,\n  employeeMonthly: true,\n  overdue: true,\n  attendance: true,\n  coverage: true,\n  categories: true,\n  recognition: true,\n  rtgsImportsToday: true,\n  rtgsSettlementsByImport: true,\n  ctMatching: true,\n  governmentSettlements: true,\n  governmentSettlementCards: true,\n  settlementsMatchingOverview: true,\n  monthlyScheduledByCategory: true,\n  monthlyAdditionalByEmployee: true,\n  departmentMonthlyOverview: true,\n};\n\nfunction SortableSlideRow({\n  id,\n  index,\n  label,\n  isEnabled,\n  duration,\n  canEdit,\n  onDurationChange,\n  onMoveUp,\n  onMoveDown,\n  canMoveUp,\n  canMoveDown,\n}: {\n  id: string;\n  index: number;\n  label: string;\n  isEnabled: boolean;\n  duration: number;\n  canEdit: boolean;\n  onDurationChange: (v: number) => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  canMoveUp: boolean;\n  canMoveDown: boolean;\n}) {\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id });\n  const style = { transform: CSS.Transform.toString(transform), transition };\n  return (\n    <div\n      ref={setNodeRef}\n      style={{\n        ...style,\n        borderColor: isEnabled ? 'var(--primary-600)' : 'var(--border-card)',\n        background: isEnabled ? 'rgba(2, 97, 116, 0.05)' : '#fafbfc',\n        opacity: isEnabled ? 1 : 0.5,\n        zIndex: isDragging ? 50 : undefined,\n        boxShadow: isDragging ? '0 8px 24px rgba(0,0,0,0.15)' : undefined,\n      }}\n      className=\"flex items-center gap-3 p-3 rounded-lg border-2\"\n    >\n      <span className=\"text-sm font-bold\" style={{ color: 'var(--text-muted)', minWidth: '2rem' }}>{index + 1}</span>\n      <div {...attributes} {...listeners} className=\"cursor-grab active:cursor-grabbing touch-none p-1 rounded hover:bg-black/5\" title=\"اسحب لتغيير الترتيب\">\n        <GripVertical className=\"w-5 h-5\" style={{ color: 'var(--text-muted)' }} />\n      </div>\n      <span className=\"text-sm flex-1\" style={{ color: 'var(--text)' }}>{label}</span>\n      <div className=\"flex items-center gap-2\">\n        <label className=\"flex items-center gap-1.5 text-sm\" style={{ color: 'var(--text-muted)' }}>\n          <Timer className=\"w-4 h-4\" />\n          <input\n            type=\"number\"\n            min={3}\n            max={300}\n            value={duration}\n            onChange={(e) => onDurationChange(parseInt(e.target.value, 10) || 10)}\n            disabled={!canEdit}\n            className=\"w-16 py-1 px-2 rounded border text-center text-sm\"\n            dir=\"ltr\"\n          />\n          <span>ث</span>\n        </label>\n      </div>\n      <div className=\"flex gap-1\">\n        <button type=\"button\" onClick={onMoveUp} disabled={!canEdit || !canMoveUp} className=\"p-1.5 rounded-lg border-2 disabled:opacity-30 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors\" style={{ borderColor: 'var(--border-card)' }} title=\"تحريك لأعلى\">\n          <ArrowUp className=\"w-4 h-4\" style={{ color: 'var(--text)' }} />\n        </button>\n        <button type=\"button\" onClick={onMoveDown} disabled={!canEdit || !canMoveDown} className=\"p-1.5 rounded-lg border-2 disabled:opacity-30 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors\" style={{ borderColor: 'var(--border-card)' }} title=\"تحريك لأسفل\">\n          <ArrowDown className=\"w-4 h-4\" style={{ color: 'var(--text)' }} />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst SLIDE_GROUPS = [\n  {\n    label: 'عام',\n    items: [\n      { key: 'opening', label: 'الافتتاحية' },\n      { key: 'overview', label: 'النظرة العامة' },\n    ],\n  },\n  {\n    label: 'المهام',\n    items: [\n      { key: 'scheduledTasks', label: 'المهام المجدولة' },\n      { key: 'additionalTasks', label: 'المهام الإضافية' },\n      { key: 'overdue', label: 'المهام المتأخرة' },\n      { key: 'departmentMonthlyOverview', label: 'إنجازات القسم الشهرية — جميع الموظفين' },\n      { key: 'monthlyScheduledByCategory', label: 'إنجازات الشهر — حسب الفئة' },\n      { key: 'monthlyAdditionalByEmployee', label: 'المهام الإضافية الشهرية — حسب الموظف' },\n    ],\n  },\n  {\n    label: 'الموظفين',\n    items: [\n      { key: 'employee', label: 'شريحة الموظف (يومي)' },\n      { key: 'employeeMonthly', label: 'شريحة الموظف (شهري)' },\n      { key: 'attendance', label: 'الحضور' },\n      { key: 'coverage', label: 'التغطية' },\n      { key: 'categories', label: 'الفئات' },\n      { key: 'recognition', label: 'أفضل الأداء' },\n    ],\n  },\n  {\n    label: 'التسويات والـ RTGS',\n    items: [\n      { key: 'settlementsMatchingOverview', label: 'التسويات والمطابقة — شاملة (KPI + حسب المصرف)' },\n      { key: 'rtgsImportsToday', label: 'استيراد RTGS اليوم' },\n      { key: 'rtgsSettlementsByImport', label: 'كروت التسويات (حسب التحميل)' },\n      { key: 'ctMatching', label: 'مطابقة CT' },\n      { key: 'governmentSettlements', label: 'التسوية الحكومية' },\n      { key: 'governmentSettlementCards', label: 'كروت التسويات (جميع المصارف)' },\n    ],\n  },\n];\n\nexport function TVSettingsV2() {\n  const { toast } = useToast();\n  const canEdit = useHasPermission('tv_settings', 'edit');\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    refreshInterval: 30,\n    slideInterval: 10,\n    visitorMode: false,\n    rtgsDisplayMode: 'by_import_date' as string,\n    rtgsImportDateRange: 3,\n    enabledSlides: { ...DEFAULT_ENABLED_SLIDES } as Record<string, boolean>,\n    visibleEmployeeIds: [] as number[],\n    visibleBankNames: [] as string[],\n    slideOrder: [] as string[],\n    slideDurations: {} as Record<string, number>,\n    settlementCardsDateMode: 'previous_day' as 'previous_day' | 'today' | 'custom',\n    settlementCardsCustomDate: '' as string,\n  });\n\n  const { data: settings, isLoading } = useQuery({\n    queryKey: ['tv-settings'],\n    queryFn: async () => {\n      const response = await api.get('/tv-dashboard/settings');\n      return response.data;\n    },\n  });\n\n  const { data: employees = [] } = useQuery({\n    queryKey: ['users-employees'],\n    queryFn: async () => {\n      const response = await api.get('/users');\n      return (response.data || []).filter((u: { role?: string; active?: boolean }) => u.role === 'employee' && u.active !== false);\n    },\n  });\n\n  const { data: bankOptions = [] } = useQuery({\n    queryKey: ['rtgs-bank-names'],\n    queryFn: async () => {\n      try {\n        const res = await api.get('/rtgs/bank-names');\n        return Array.isArray(res.data) ? res.data : [];\n      } catch {\n        return [];\n      }\n    },\n  });\n\n  useEffect(() => {\n    if (settings) {\n      const allSlideKeys = SLIDE_GROUPS.flatMap(g => g.items.map(i => i.key));\n      const savedOrder = Array.isArray(settings.slideOrder) ? settings.slideOrder : [];\n      const slideOrder = savedOrder.length > 0 ? savedOrder : allSlideKeys;\n      const defaultDurations: Record<string, number> = {};\n      allSlideKeys.forEach(k => { defaultDurations[k] = settings.slideInterval ?? 10; });\n      const slideDurations = { ...defaultDurations, ...(settings.slideDurations || {}) };\n\n      setFormData({\n        refreshInterval: settings.refreshInterval ?? 30,\n        slideInterval: settings.slideInterval ?? 10,\n        visitorMode: !!settings.visitorMode,\n        rtgsDisplayMode: settings.rtgsDisplayMode || 'by_import_date',\n        rtgsImportDateRange: Math.min(7, Math.max(1, parseInt(settings.rtgsImportDateRange, 10) || 3)),\n        enabledSlides: { ...DEFAULT_ENABLED_SLIDES, ...(settings.enabledSlides || {}) },\n        visibleEmployeeIds: Array.isArray(settings.visibleEmployeeIds) ? settings.visibleEmployeeIds.map((id: unknown) => Number(id)).filter((n) => !isNaN(n)) : [],\n        visibleBankNames: Array.isArray(settings.visibleBankNames) ? settings.visibleBankNames.map((s) => String(s).trim()).filter(Boolean) : [],\n        slideOrder,\n        slideDurations,\n        settlementCardsDateMode: settings.settlementCardsDateMode || 'previous_day',\n        settlementCardsCustomDate: settings.settlementCardsCustomDate || '',\n      });\n    }\n  }, [settings]);\n\n  const updateSettings = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await api.put('/tv-dashboard/settings', {\n        refreshInterval: data.refreshInterval,\n        slideInterval: data.slideInterval,\n        visitorMode: data.visitorMode,\n        rtgsDisplayMode: data.rtgsDisplayMode,\n        rtgsImportDateRange: data.rtgsImportDateRange,\n        enabledSlides: data.enabledSlides,\n        visibleEmployeeIds: data.visibleEmployeeIds,\n        visibleBankNames: data.visibleBankNames,\n        slideOrder: data.slideOrder,\n        slideDurations: data.slideDurations,\n        settlementCardsDateMode: data.settlementCardsDateMode,\n        settlementCardsCustomDate: data.settlementCardsCustomDate,\n      });\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['tv-settings'] });\n      toast({\n        title: 'نجح',\n        description: 'تم حفظ الإعدادات بنجاح',\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: 'خطأ',\n        description: error.response?.data?.error || 'حدث خطأ',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    await updateSettings.mutateAsync(formData);\n  };\n\n  const toggleSlide = (key: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      enabledSlides: { ...prev.enabledSlides, [key]: !prev.enabledSlides[key] },\n    }));\n  };\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, { activationConstraint: { distance: 8 } }),\n    useSensor(KeyboardSensor, { coordinateGetter: sortableKeyboardCoordinates })\n  );\n\n  const moveSlide = (key: string, direction: 'up' | 'down') => {\n    setFormData((prev) => {\n      const currentOrder = [...prev.slideOrder];\n      const currentIndex = currentOrder.indexOf(key);\n      if (currentIndex === -1) return prev;\n      const newIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;\n      if (newIndex < 0 || newIndex >= currentOrder.length) return prev;\n      [currentOrder[currentIndex], currentOrder[newIndex]] = [currentOrder[newIndex], currentOrder[currentIndex]];\n      return { ...prev, slideOrder: currentOrder };\n    });\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    if (!over || active.id === over.id) return;\n    const activeId = String(active.id);\n    const overId = String(over.id);\n    setFormData((prev) => {\n      const idx = prev.slideOrder.indexOf(activeId);\n      const overIdx = prev.slideOrder.indexOf(overId);\n      if (idx === -1 || overIdx === -1) return prev;\n      const next = arrayMove([...prev.slideOrder], idx, overIdx);\n      return { ...prev, slideOrder: next };\n    });\n  };\n\n  const setSlideDuration = (key: string, seconds: number) => {\n    setFormData((prev) => ({\n      ...prev,\n      slideDurations: { ...prev.slideDurations, [key]: Math.max(3, Math.min(300, seconds)) },\n    }));\n  };\n\n  const selectAllSlides = (val: boolean) => {\n    const next: Record<string, boolean> = {};\n    Object.keys(formData.enabledSlides).forEach((k) => (next[k] = val));\n    setFormData((prev) => ({ ...prev, enabledSlides: next }));\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Skeleton className=\"h-10 w-64\" />\n        <Skeleton className=\"h-96\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen p-6 md:p-8\" dir=\"rtl\" style={{ background: 'linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%)' }}>\n      <div className=\"mx-auto max-w-4xl\">\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n          className=\"page-header-teal rounded-xl p-6 mb-6\"\n          style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)', color: '#fff', boxShadow: '0 10px 30px rgba(2, 97, 116, 0.35)' }}\n        >\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-2xl flex items-center justify-center\" style={{ background: 'rgba(255,255,255,0.2)' }}>\n              <Tv className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold m-0 text-white\">إعدادات لوحة التحكم التلفزيونية</h1>\n              <p className=\"text-sm opacity-95 mt-1 m-0 text-white\">إدارة الصفحات — اختر ما يظهر وما لا يظهر على شاشة TV</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* إدارة الصفحات — اختر ما يظهر في TV */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.05 }}\n            className=\"rounded-2xl p-6 border-2\"\n            style={{ background: 'var(--surface)', borderColor: 'var(--border-card)', boxShadow: 'var(--shadow-card)' }}\n          >\n            <div className=\"flex items-center justify-between mb-4 flex-wrap gap-3\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <div className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(2, 97, 116, 0.1)' }}>\n                    <LayoutDashboard className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n                  </div>\n                  <h2 className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>إدارة الصفحات</h2>\n                </div>\n                <p className=\"text-sm m-0\" style={{ color: 'var(--text-muted)' }}>اختر الصفحات التي تظهر في TV — الصفحة المفعّلة تظهر، والمعطّلة لا تظهر</p>\n                <p className=\"text-xs mt-2 font-medium\" style={{ color: 'var(--primary-600)' }}>\n                  {Object.values(formData.enabledSlides).filter(Boolean).length} من {Object.keys(formData.enabledSlides).length} صفحة مفعّلة\n                </p>\n              </div>\n              <div className=\"flex gap-2\">\n                <button type=\"button\" onClick={() => selectAllSlides(true)} className=\"text-sm px-3 py-1.5 rounded-lg border-2 font-medium\" style={{ borderColor: 'var(--primary-600)', color: 'var(--primary-600)' }}>\n                  إظهار الكل\n                </button>\n                <button type=\"button\" onClick={() => selectAllSlides(false)} className=\"text-sm px-3 py-1.5 rounded-lg border-2 font-medium\" style={{ borderColor: 'var(--border-card)' }}>\n                  إخفاء الكل\n                </button>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {SLIDE_GROUPS.map((grp) => (\n                <div key={grp.label} className=\"rounded-xl p-4 border-2\" style={{ borderColor: 'var(--border-card)', background: '#fafbfc' }}>\n                  <h3 className=\"text-sm font-bold mb-3\" style={{ color: 'var(--text-strong)' }}>{grp.label}</h3>\n                  <div className=\"space-y-2\">\n                    {grp.items.map((item) => (\n                      <label key={item.key} className=\"flex items-center gap-3 cursor-pointer\">\n                        <input\n                          type=\"checkbox\"\n                          checked={!!formData.enabledSlides[item.key]}\n                          onChange={() => toggleSlide(item.key)}\n                          disabled={!canEdit}\n                          className=\"w-5 h-5 rounded border-2\"\n                          style={{ accentColor: 'var(--primary-600)' }}\n                        />\n                        <span className=\"text-sm\" style={{ color: 'var(--text)' }}>{item.label}</span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n\n          {/* ترتيب الصفحات */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.06 }}\n            className=\"rounded-2xl p-6 border-2\"\n            style={{ background: 'var(--surface)', borderColor: 'var(--border-card)', boxShadow: 'var(--shadow-card)' }}\n          >\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(2, 97, 116, 0.1)' }}>\n                <GripVertical className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n              </div>\n              <div>\n                <h2 className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>ترتيب الصفحات</h2>\n                <p className=\"text-xs m-0 mt-0.5\" style={{ color: 'var(--text-muted)' }}>رتّب الصفحات حسب التسلسل المطلوب — استخدم الأسهم للتحريك لأعلى أو لأسفل</p>\n              </div>\n            </div>\n            <p className=\"text-xs mb-3\" style={{ color: 'var(--text-muted)' }}>اسحب الصفحات لتغيير الترتيب — أو استخدم الأسهم — حدّد الوقت (ثانية) لكل صفحة</p>\n            <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\n              <SortableContext items={formData.slideOrder} strategy={verticalListSortingStrategy}>\n                <div className=\"space-y-2\">\n                  {formData.slideOrder.map((key, index) => {\n                    const slideInfo = SLIDE_GROUPS.flatMap(g => g.items).find(item => item.key === key);\n                    if (!slideInfo) return null;\n                    const isEnabled = formData.enabledSlides[key];\n                    const duration = formData.slideDurations[key] ?? formData.slideInterval ?? 10;\n                    return (\n                      <SortableSlideRow\n                        key={key}\n                        id={key}\n                        index={index}\n                        label={slideInfo.label}\n                        isEnabled={isEnabled}\n                        duration={duration}\n                        canEdit={canEdit}\n                        onDurationChange={(v) => setSlideDuration(key, v)}\n                        onMoveUp={() => moveSlide(key, 'up')}\n                        onMoveDown={() => moveSlide(key, 'down')}\n                        canMoveUp={index > 0}\n                        canMoveDown={index < formData.slideOrder.length - 1}\n                      />\n                    );\n                  })}\n                </div>\n              </SortableContext>\n            </DndContext>\n          </motion.div>\n\n          {/* الموظفين الظاهرين في TV */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.08 }}\n            className=\"rounded-2xl p-6 border-2\"\n            style={{ background: 'var(--surface)', borderColor: 'var(--border-card)', boxShadow: 'var(--shadow-card)' }}\n          >\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(2, 97, 116, 0.1)' }}>\n                <Users className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n              </div>\n              <div>\n                <h2 className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>الموظفين الظاهرين في TV</h2>\n                <p className=\"text-xs m-0 mt-0.5\" style={{ color: 'var(--text-muted)' }}>اختر الموظفين الذين تظهر شرائحهم — إذا لم تختر أحداً يُعرض الكل</p>\n              </div>\n              <div className=\"mr-auto flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData((prev) => ({ ...prev, visibleEmployeeIds: (employees || []).map((e: { id: number }) => e.id) }))}\n                  disabled={!canEdit || !employees?.length}\n                  className=\"text-sm px-3 py-1 rounded-lg border-2\"\n                  style={{ borderColor: 'var(--primary-600)', color: 'var(--primary-600)' }}\n                >\n                  تحديد الكل\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData((prev) => ({ ...prev, visibleEmployeeIds: [] }))}\n                  disabled={!canEdit}\n                  className=\"text-sm px-3 py-1 rounded-lg border-2\"\n                  style={{ borderColor: 'var(--border-card)' }}\n                >\n                  إلغاء التصفية (عرض الكل)\n                </button>\n              </div>\n            </div>\n            <div className=\"flex flex-wrap gap-3\">\n              {(employees || []).map((emp: { id: number; name: string }) => (\n                <label key={emp.id} className=\"flex items-center gap-2 cursor-pointer px-3 py-2 rounded-lg border-2\" style={{ borderColor: formData.visibleEmployeeIds.includes(emp.id) ? 'var(--primary-600)' : 'var(--border-card)', background: formData.visibleEmployeeIds.includes(emp.id) ? 'rgba(2, 97, 116, 0.08)' : '#fafbfc' }}>\n                  <input\n                    type=\"checkbox\"\n                  checked={formData.visibleEmployeeIds.length === 0 || formData.visibleEmployeeIds.includes(emp.id)}\n                  onChange={() => {\n                      const allIds = (employees || []).map((e: { id: number }) => e.id);\n                      if (formData.visibleEmployeeIds.length === 0) {\n                        setFormData((prev) => ({ ...prev, visibleEmployeeIds: allIds.filter((id: number) => id !== emp.id) }));\n                      } else if (formData.visibleEmployeeIds.includes(emp.id)) {\n                        setFormData((prev) => ({ ...prev, visibleEmployeeIds: prev.visibleEmployeeIds.filter((id) => id !== emp.id) }));\n                      } else {\n                        setFormData((prev) => ({ ...prev, visibleEmployeeIds: [...prev.visibleEmployeeIds, emp.id] }));\n                      }\n                    }}\n                    disabled={!canEdit}\n                    className=\"w-4 h-4 rounded\"\n                    style={{ accentColor: 'var(--primary-600)' }}\n                  />\n                  <span className=\"text-sm\" style={{ color: 'var(--text)' }}>{emp.name}</span>\n                </label>\n              ))}\n            </div>\n          </motion.div>\n\n          {/* المصارف الظاهرة في كروت التسويات */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.09 }}\n            className=\"rounded-2xl p-6 border-2\"\n            style={{ background: 'var(--surface)', borderColor: 'var(--border-card)', boxShadow: 'var(--shadow-card)' }}\n          >\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(2, 97, 116, 0.1)' }}>\n                <Banknote className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n              </div>\n              <div>\n                <h2 className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>المصارف الظاهرة في كروت التسويات</h2>\n                <p className=\"text-xs m-0 mt-0.5\" style={{ color: 'var(--text-muted)' }}>اختر المصارف التي تظهر في كروت التسويات — إذا لم تختر أحداً تُعرض الكل</p>\n              </div>\n              <div className=\"mr-auto flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData((prev) => ({ ...prev, visibleBankNames: [...(bankOptions || [])] }))}\n                  disabled={!canEdit || !bankOptions?.length}\n                  className=\"text-sm px-3 py-1 rounded-lg border-2\"\n                  style={{ borderColor: 'var(--primary-600)', color: 'var(--primary-600)' }}\n                >\n                  تحديد الكل\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData((prev) => ({ ...prev, visibleBankNames: [] }))}\n                  disabled={!canEdit}\n                  className=\"text-sm px-3 py-1 rounded-lg border-2\"\n                  style={{ borderColor: 'var(--border-card)' }}\n                >\n                  إلغاء التصفية (عرض الكل)\n                </button>\n              </div>\n            </div>\n            <div className=\"flex flex-wrap gap-3\">\n              {(bankOptions || []).map((bank: string) => (\n                <label key={bank} className=\"flex items-center gap-2 cursor-pointer px-3 py-2 rounded-lg border-2\" style={{ borderColor: formData.visibleBankNames.includes(bank) ? 'var(--primary-600)' : 'var(--border-card)', background: formData.visibleBankNames.includes(bank) ? 'rgba(2, 97, 116, 0.08)' : '#fafbfc' }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.visibleBankNames.length === 0 || formData.visibleBankNames.includes(bank)}\n                    onChange={() => {\n                      const allBanks = [...(bankOptions || [])];\n                      if (formData.visibleBankNames.length === 0) {\n                        setFormData((prev) => ({ ...prev, visibleBankNames: allBanks.filter((b) => b !== bank) }));\n                      } else if (formData.visibleBankNames.includes(bank)) {\n                        setFormData((prev) => ({ ...prev, visibleBankNames: prev.visibleBankNames.filter((b) => b !== bank) }));\n                      } else {\n                        setFormData((prev) => ({ ...prev, visibleBankNames: [...prev.visibleBankNames, bank] }));\n                      }\n                    }}\n                    disabled={!canEdit}\n                    className=\"w-4 h-4 rounded\"\n                    style={{ accentColor: 'var(--primary-600)' }}\n                  />\n                  <span className=\"text-sm\" style={{ color: 'var(--text)' }}>{bank}</span>\n                </label>\n              ))}\n            </div>\n          </motion.div>\n\n          {/* RTGS والتسويات */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"rounded-2xl p-6 border-2\"\n            style={{ background: 'var(--surface)', borderColor: 'var(--border-card)', boxShadow: 'var(--shadow-card)' }}\n          >\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(2, 97, 116, 0.1)' }}>\n                <Banknote className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n              </div>\n              <h2 className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>RTGS والتسويات</h2>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold mb-2\" style={{ color: 'var(--text-strong)' }}>عرض التسويات حسب</label>\n                <select\n                  value={formData.rtgsDisplayMode}\n                  onChange={(e) => setFormData({ ...formData, rtgsDisplayMode: e.target.value })}\n                  disabled={!canEdit}\n                  className=\"w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20\"\n                >\n                  <option value=\"by_import_date\">تاريخ تحميل الملف</option>\n                  <option value=\"by_sttl_date\">تاريخ التسوية</option>\n                </select>\n                <p className=\"text-xs mt-1.5\" style={{ color: 'var(--text-muted)' }}>التسوية تنزل غالباً بعد يوم — اعتماد تاريخ التحميل أنسب</p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold mb-2\" style={{ color: 'var(--text-strong)' }}>نطاق أيام عرض الاستيراد</label>\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={7}\n                  value={formData.rtgsImportDateRange}\n                  onChange={(e) => setFormData({ ...formData, rtgsImportDateRange: Math.min(7, Math.max(1, parseInt(e.target.value, 10) || 3)) })}\n                  disabled={!canEdit}\n                  className=\"w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 max-w-xs\"\n                  dir=\"ltr\"\n                />\n                <p className=\"text-xs mt-1.5\" style={{ color: 'var(--text-muted)' }}>عرض استيرادات آخر 1–7 أيام</p>\n              </div>\n              <div className=\"md:col-span-2 border-t pt-4 mt-2\" style={{ borderColor: 'var(--border-card)' }}>\n                <label className=\"block text-sm font-semibold mb-2\" style={{ color: 'var(--text-strong)' }}>تاريخ عرض كروت التسويات (جميع المصارف)</label>\n                <div className=\"flex flex-wrap items-center gap-4\">\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input type=\"radio\" name=\"settlementCardsDate\" checked={formData.settlementCardsDateMode === 'previous_day'} onChange={() => setFormData({ ...formData, settlementCardsDateMode: 'previous_day' })} disabled={!canEdit} className=\"w-4 h-4\" style={{ accentColor: 'var(--primary-600)' }} />\n                    <span className=\"text-sm\" style={{ color: 'var(--text)' }}>اليوم السابق (تلقائي)</span>\n                  </label>\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input type=\"radio\" name=\"settlementCardsDate\" checked={formData.settlementCardsDateMode === 'today'} onChange={() => setFormData({ ...formData, settlementCardsDateMode: 'today' })} disabled={!canEdit} className=\"w-4 h-4\" style={{ accentColor: 'var(--primary-600)' }} />\n                    <span className=\"text-sm\" style={{ color: 'var(--text)' }}>اليوم</span>\n                  </label>\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input type=\"radio\" name=\"settlementCardsDate\" checked={formData.settlementCardsDateMode === 'custom'} onChange={() => setFormData({ ...formData, settlementCardsDateMode: 'custom' })} disabled={!canEdit} className=\"w-4 h-4\" style={{ accentColor: 'var(--primary-600)' }} />\n                    <span className=\"text-sm\" style={{ color: 'var(--text)' }}>تاريخ محدد:</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={formData.settlementCardsCustomDate}\n                    onChange={(e) => setFormData({ ...formData, settlementCardsCustomDate: e.target.value })}\n                    disabled={!canEdit || formData.settlementCardsDateMode !== 'custom'}\n                    className=\"py-2 px-3 rounded-lg border-2 text-sm\"\n                    dir=\"ltr\"\n                  />\n                </div>\n                <p className=\"text-xs mt-1.5\" style={{ color: 'var(--text-muted)' }}>اختر تاريخ عرض كروت التسويات — الافتراضي: اليوم السابق (مثال: اليوم 2 يعرض كروت يوم 1)</p>\n              </div>\n            </div>\n          </motion.div>\n\n          {/* التوقيت والعرض */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.15 }}\n            className=\"rounded-2xl p-6 border-2\"\n            style={{ background: 'var(--surface)', borderColor: 'var(--border-card)', boxShadow: 'var(--shadow-card)' }}\n          >\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(2, 97, 116, 0.1)' }}>\n                <Tv className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n              </div>\n              <h2 className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>التوقيت والعرض</h2>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold mb-2\" style={{ color: 'var(--text-strong)' }}>فترة تحديث البيانات (ثانية)</label>\n                <input\n                  type=\"number\"\n                  min={5}\n                  max={300}\n                  value={formData.refreshInterval}\n                  onChange={(e) => setFormData({ ...formData, refreshInterval: parseInt(e.target.value) || 30 })}\n                  disabled={!canEdit}\n                  className=\"w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 max-w-xs\"\n                  dir=\"ltr\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold mb-2\" style={{ color: 'var(--text-strong)' }}>فترة تبديل الشرائح (ثانية)</label>\n                <input\n                  type=\"number\"\n                  min={5}\n                  max={60}\n                  value={formData.slideInterval}\n                  onChange={(e) => setFormData({ ...formData, slideInterval: parseInt(e.target.value) || 10 })}\n                  disabled={!canEdit}\n                  className=\"w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 max-w-xs\"\n                  dir=\"ltr\"\n                />\n              </div>\n              <div className=\"md:col-span-2\">\n                <label className=\"flex items-center gap-3 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.visitorMode}\n                    onChange={(e) => setFormData({ ...formData, visitorMode: e.target.checked })}\n                    disabled={!canEdit}\n                    className=\"w-5 h-5 rounded\"\n                    style={{ accentColor: 'var(--primary-600)' }}\n                  />\n                  <span className=\"text-sm font-medium\" style={{ color: 'var(--text)' }}>وضع الزائر — إخفاء الأسماء والبيانات الحساسة</span>\n                </label>\n                <p className=\"text-xs mt-1 mr-8\" style={{ color: 'var(--text-muted)' }}>يمكن أيضاً تفعيله عبر /tv?visitor=1</p>\n              </div>\n            </div>\n          </motion.div>\n\n          <div className=\"flex gap-3 flex-wrap\">\n            {canEdit && (\n              <button\n                type=\"submit\"\n                disabled={updateSettings.isPending}\n                className=\"px-6 py-2.5 rounded-xl font-semibold shadow-lg flex items-center gap-2 text-white\"\n                style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}\n              >\n                {updateSettings.isPending ? (\n                  <>\n                    <RefreshCw className=\"h-4 w-4 animate-spin\" />\n                    جاري الحفظ...\n                  </>\n                ) : (\n                  <>\n                    <Save className=\"h-4 w-4\" />\n                    حفظ الإعدادات\n                  </>\n                )}\n              </button>\n            )}\n            <button\n              type=\"button\"\n              onClick={() => window.open('/tv', '_blank')}\n              className=\"px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2 border-2\"\n              style={{ borderColor: 'var(--primary-600)', color: 'var(--primary-600)' }}\n            >\n              <Tv className=\"h-4 w-4\" />\n              فتح لوحة التحكم\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":["useHasPermission","pageKey","actionKey","user","useAuthStore","s","hasPermission","permissions","role","DEFAULT_ENABLED_SLIDES","opening","overview","scheduledTasks","additionalTasks","employee","employeeMonthly","overdue","attendance","coverage","categories","recognition","rtgsImportsToday","rtgsSettlementsByImport","ctMatching","governmentSettlements","governmentSettlementCards","settlementsMatchingOverview","monthlyScheduledByCategory","monthlyAdditionalByEmployee","departmentMonthlyOverview","SortableSlideRow","_ref","id","index","label","isEnabled","duration","canEdit","onDurationChange","onMoveUp","onMoveDown","canMoveUp","canMoveDown","attributes","listeners","setNodeRef","transform","transition","isDragging","useSortable","style","CSS","Transform","toString","_jsxs","ref","_objectSpread","borderColor","background","opacity","zIndex","undefined","boxShadow","className","children","_jsx","color","minWidth","title","GripVertical","Timer","type","min","max","value","onChange","e","parseInt","target","disabled","dir","onClick","ArrowUp","ArrowDown","SLIDE_GROUPS","items","key","TVSettingsV2","toast","useToast","queryClient","useQueryClient","formData","setFormData","useState","refreshInterval","slideInterval","visitorMode","rtgsDisplayMode","rtgsImportDateRange","enabledSlides","visibleEmployeeIds","visibleBankNames","slideOrder","slideDurations","settlementCardsDateMode","settlementCardsCustomDate","data","settings","isLoading","useQuery","queryKey","queryFn","async","api","get","employees","filter","u","active","bankOptions","res","Array","isArray","_unused","useEffect","_settings$refreshInte","_settings$slideInterv2","allSlideKeys","flatMap","g","map","i","savedOrder","length","defaultDurations","forEach","k","_settings$slideInterv","Math","Number","n","isNaN","String","trim","Boolean","updateSettings","useMutation","mutationFn","put","onSuccess","invalidateQueries","description","onError","error","_error$response","_error$response$data","response","variant","sensors","useSensors","useSensor","PointerSensor","activationConstraint","distance","KeyboardSensor","coordinateGetter","sortableKeyboardCoordinates","moveSlide","direction","prev","currentOrder","currentIndex","indexOf","newIndex","selectAllSlides","val","next","Object","keys","Skeleton","motion","div","initial","y","animate","Tv","onSubmit","preventDefault","mutateAsync","delay","LayoutDashboard","values","grp","item","checked","toggleSlide","accentColor","DndContext","collisionDetection","closestCenter","onDragEnd","event","over","activeId","overId","idx","overIdx","arrayMove","SortableContext","strategy","verticalListSortingStrategy","_ref2","_formData$slideDurati","slideInfo","find","v","setSlideDuration","seconds","Users","emp","includes","allIds","name","Banknote","bank","allBanks","b","isPending","_Fragment","RefreshCw","Save","window","open","props","_objectWithoutProperties","_excluded","cn"],"ignoreList":[],"sourceRoot":""}
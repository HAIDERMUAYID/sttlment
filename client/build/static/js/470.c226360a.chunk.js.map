{"version":3,"file":"static/js/470.c226360a.chunk.js","mappings":"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","sources":["hooks/useHasPermission.ts","components/Loading.js","components/ui/excel-column-filter.tsx","pages/admin/Merchants.js","services/api.js"],"sourcesContent":["import { useAuthStore } from '@/store/useAuthStore';\nimport { hasPermission } from '@/lib/permissions';\n\n/**\n * التحقق من صلاحية المستخدم لصفحة + إجراء\n * admin يملك كل الصلاحيات تلقائياً\n */\nexport function useHasPermission(pageKey: string, actionKey: string): boolean {\n  const user = useAuthStore((s) => s.user);\n  if (!user) return false;\n  return hasPermission(user.permissions, user.role, pageKey, actionKey);\n}\n\n/**\n * التحقق من صلاحية عرض صفحة (view)\n */\nexport function useCanViewPage(pageKey: string): boolean {\n  return useHasPermission(pageKey, 'view');\n}\n","import React from 'react';\n\nexport default function Loading({ message = 'جاري التحميل...' }) {\n  return (\n    <div className=\"loading-wrapper\">\n      <div className=\"loading-spinner\" />\n      <p className=\"loading-message\">{message}</p>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { Search, ArrowDownAZ, ArrowUpAZ, Filter } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\nexport interface ExcelColumnFilterProps {\n  columnKey: string;\n  columnLabel: string;\n  options: string[];\n  value: string; // comma-separated selected values, empty = all\n  onChange: (value: string) => void;\n  sortDirection: 'asc' | 'desc' | null;\n  onSortChange: (dir: 'asc' | 'desc' | null) => void;\n  trigger: React.ReactNode;\n  className?: string;\n}\n\nconst FILTER_CONDITIONS = [\n  { value: 'contains', label: 'يحتوي على' },\n  { value: 'equals', label: 'يساوي' },\n  { value: 'startsWith', label: 'يبدأ بـ' },\n];\n\nexport function ExcelColumnFilter({\n  columnKey,\n  columnLabel,\n  options,\n  value,\n  onChange,\n  sortDirection,\n  onSortChange,\n  trigger,\n  className,\n}: ExcelColumnFilterProps) {\n  const [open, setOpen] = React.useState(false);\n  const [search, setSearch] = React.useState('');\n  const [condition, setCondition] = React.useState('contains');\n  const [autoApply, setAutoApply] = React.useState(true);\n  const [draft, setDraft] = React.useState(value);\n  const containerRef = React.useRef<HTMLDivElement>(null);\n  const selectAllRef = React.useRef<HTMLInputElement | null>(null);\n\n  React.useEffect(() => {\n    setDraft(value);\n  }, [value, open]);\n\n  const selectedSet = React.useMemo(() => {\n    const s = (draft || '').split(',').map((x) => x.trim()).filter(Boolean);\n    return new Set(s);\n  }, [draft]);\n\n  const filteredOptions = React.useMemo(() => {\n    let list = options;\n    if (search.trim()) {\n      const q = search.toLowerCase();\n      list = list.filter((opt) => {\n        const v = (opt || '').toLowerCase();\n        if (condition === 'contains') return v.includes(q);\n        if (condition === 'equals') return v === q;\n        if (condition === 'startsWith') return v.startsWith(q);\n        return v.includes(q);\n      });\n    }\n    return list;\n  }, [options, search, condition]);\n\n  const selectAllChecked =\n    filteredOptions.length > 0 &&\n    filteredOptions.every((opt) => selectedSet.has(opt));\n  const selectAllIndeterminate =\n    filteredOptions.some((opt) => selectedSet.has(opt)) && !selectAllChecked;\n\n  React.useEffect(() => {\n    if (selectAllRef.current) selectAllRef.current.indeterminate = selectAllIndeterminate;\n  }, [selectAllIndeterminate]);\n\n  const toggleOption = (opt: string) => {\n    const next = new Set(selectedSet);\n    if (next.has(opt)) next.delete(opt);\n    else next.add(opt);\n    const arr = options.filter((o) => next.has(o));\n    const newVal = arr.join(',');\n    setDraft(newVal);\n    if (autoApply) onChange(newVal);\n  };\n\n  const toggleSelectAll = () => {\n    if (selectAllChecked) {\n      const next = new Set(selectedSet);\n      filteredOptions.forEach((o) => next.delete(o));\n      const arr = options.filter((o) => next.has(o));\n      const newVal = arr.join(',');\n      setDraft(newVal);\n      if (autoApply) onChange(newVal);\n    } else {\n      const next = new Set(selectedSet);\n      filteredOptions.forEach((o) => next.add(o));\n      const arr = options.filter((o) => next.has(o));\n      const newVal = arr.join(',');\n      setDraft(newVal);\n      if (autoApply) onChange(newVal);\n    }\n  };\n\n  const handleApply = () => {\n    onChange(draft);\n    setOpen(false);\n    setSearch('');\n  };\n\n  const handleClear = () => {\n    setDraft('');\n    onChange('');\n    setOpen(false);\n    setSearch('');\n  };\n\n  return (\n    <div ref={containerRef} className={cn('relative', className)}>\n      <div onClick={() => setOpen(!open)} className=\"cursor-pointer\">\n        {trigger}\n      </div>\n      {open && (\n        <>\n          <div\n            className=\"absolute z-50 mt-1 rounded-xl border border-slate-200 bg-white shadow-xl py-3 min-w-[280px] max-w-[320px]\"\n            style={{ left: 0, top: '100%' }}\n          >\n            {/* فرز */}\n            <div className=\"px-3 mb-2\">\n              <p className=\"text-xs font-bold text-slate-600 mb-1.5\">فرز</p>\n              <div className=\"flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() =>\n                    onSortChange(sortDirection === 'desc' ? null : 'desc')\n                  }\n                  className={cn(\n                    'flex items-center gap-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors',\n                    sortDirection === 'desc'\n                      ? 'bg-[#026174] text-white'\n                      : 'bg-slate-100 text-slate-700 hover:bg-slate-200'\n                  )}\n                >\n                  <ArrowDownAZ className=\"w-3.5 h-3.5\" />\n                  تنازلي\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() =>\n                    onSortChange(sortDirection === 'asc' ? null : 'asc')\n                  }\n                  className={cn(\n                    'flex items-center gap-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors',\n                    sortDirection === 'asc'\n                      ? 'bg-[#026174] text-white'\n                      : 'bg-slate-100 text-slate-700 hover:bg-slate-200'\n                  )}\n                >\n                  <ArrowUpAZ className=\"w-3.5 h-3.5\" />\n                  تصاعدي\n                </button>\n              </div>\n            </div>\n\n            {/* تصفية — بحث */}\n            <div className=\"px-3 mb-2\">\n              <p className=\"text-xs font-bold text-slate-600 mb-1.5\">تصفية</p>\n              <div className=\"flex gap-1.5\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"بحث\"\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    className=\"w-full pr-8 pl-2 py-1.5 text-xs border border-slate-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#026174]/30 focus:border-[#026174]\"\n                  />\n                </div>\n                <select\n                  value={condition}\n                  onChange={(e) => setCondition(e.target.value)}\n                  className=\"px-2 py-1.5 text-xs border border-slate-300 rounded-lg bg-white focus:outline-none focus:ring-1 focus:ring-[#026174]/30\"\n                >\n                  {FILTER_CONDITIONS.map((c) => (\n                    <option key={c.value} value={c.value}>\n                      {c.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* قائمة الاختيار */}\n            <div className=\"px-3 mb-2\">\n              <div className=\"max-h-48 overflow-y-auto border border-slate-200 rounded-lg\">\n                <label className=\"flex items-center gap-2 px-3 py-2 hover:bg-slate-50 cursor-pointer border-b border-slate-100\">\n                  <input\n                    type=\"checkbox\"\n                    ref={selectAllRef}\n                    checked={selectAllChecked}\n                    onChange={toggleSelectAll}\n                    className=\"rounded border-slate-300 text-[#026174] focus:ring-[#026174]\"\n                  />\n                  <span className=\"text-xs font-semibold text-slate-800\">\n                    تحديد الكل\n                  </span>\n                </label>\n                {filteredOptions.length === 0 ? (\n                  <div className=\"py-4 text-center text-xs text-slate-500\">\n                    لا توجد نتائج\n                  </div>\n                ) : (\n                  filteredOptions.map((opt) => (\n                    <label\n                      key={opt}\n                      className=\"flex items-center gap-2 px-3 py-1.5 hover:bg-slate-50 cursor-pointer text-xs\"\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedSet.has(opt)}\n                        onChange={() => toggleOption(opt)}\n                        className=\"rounded border-slate-300 text-[#026174] focus:ring-[#026174]\"\n                      />\n                      <span className=\"truncate text-slate-800\">{opt || '-'}</span>\n                    </label>\n                  ))\n                )}\n              </div>\n            </div>\n\n            {/* أزرار */}\n            <div className=\"px-3 flex items-center gap-2 flex-wrap\">\n              <label className=\"flex items-center gap-1.5 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={autoApply}\n                  onChange={(e) => setAutoApply(e.target.checked)}\n                  className=\"rounded border-slate-300 text-[#026174] focus:ring-[#026174]\"\n                />\n                <span className=\"text-xs text-slate-600\">تطبيق تلقائي</span>\n              </label>\n              <div className=\"flex gap-1.5 ms-auto\">\n                <button\n                  type=\"button\"\n                  onClick={handleApply}\n                  className=\"px-3 py-1.5 rounded-lg text-xs font-medium text-white\"\n                  style={{ background: 'linear-gradient(135deg, #026174, #068294)' }}\n                >\n                  تطبيق عامل التصفية\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleClear}\n                  className=\"px-3 py-1.5 rounded-lg text-xs font-medium bg-slate-100 hover:bg-slate-200 text-slate-700\"\n                >\n                  إلغاء تحديد عامل التصفية\n                </button>\n              </div>\n            </div>\n          </div>\n          <div\n            className=\"fixed inset-0 z-40\"\n            onClick={() => setOpen(false)}\n            aria-hidden\n          />\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport api from '../../services/api';\nimport { useHasPermission } from '@/hooks/useHasPermission';\nimport { useToast } from '@/hooks/use-toast';\nimport Loading from '../../components/Loading';\nimport { ChevronDown, Filter, X, Building2, Landmark, FileText, Search, MapPin, Briefcase, Users, Store } from 'lucide-react';\nimport { ExcelColumnFilter } from '@/components/ui/excel-column-filter';\nimport * as XLSX from 'xlsx';\n\n/* سهم ناعم بجانب اسم العمود (يورث لون النص من الرأس) */\nconst ColHeader = ({ children }) => (\n  <span className=\"inline-flex items-center gap-1\">\n    {children}\n    <ChevronDown className=\"w-4 h-4 opacity-90 flex-shrink-0 text-current\" strokeWidth={2.5} />\n  </span>\n);\n\n/* زر فلتر Excel — يظهر في خلية رأس العمود */\nconst FilterTrigger = ({ value, label }) => {\n  const count = value ? value.split(',').filter(Boolean).length : 0;\n  const hasFilter = count > 0;\n  return (\n    <div\n      className={`flex items-center gap-1.5 w-full min-w-0 py-1.5 px-2 rounded-md border transition-all cursor-pointer ${hasFilter ? 'merchant-filter-trigger-active' : 'merchant-filter-trigger'}`}\n    >\n      <Filter className={`w-3.5 h-3.5 flex-shrink-0 ${hasFilter ? 'text-[#026174]' : 'text-slate-500'}`} />\n      <span className={`text-xs truncate ${hasFilter ? 'text-[#026174] font-medium' : 'text-slate-600'}`}>\n        {count > 0 ? `${count} محدد` : label}\n      </span>\n    </div>\n  );\n};\n\nconst Merchants = () => {\n  const [merchants, setMerchants] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [pagination, setPagination] = useState({ page: 1, limit: 50, total: 0, totalPages: 0 });\n  const [filters, setFilters] = useState({\n    search: '',\n    governorate: '',\n    ministry: '',\n    bank_code: '',\n    commission_type: ''\n  });\n  /* فلاتر أعمدة (قيم متعددة مفصولة بفاصلة) + فرز */\n  const [columnFilters, setColumnFilters] = useState({\n    merchant_id: '',\n    governorate: '',\n    ministry: '',\n    directorate_name: '',\n    bank_code: '',\n    settlement_name: '',\n    commission_type: '',\n    device_count: '',\n    iban: '',\n    account_number: '',\n    branch_name: ''\n  });\n  const [sortState, setSortState] = useState({ column: null, direction: null });\n  const [filterOptions, setFilterOptions] = useState({\n    governorates: [], ministries: [], bankCodes: [],\n    merchantIds: [], directorates: [], settlements: [], deviceCounts: [], ibans: [], accountNumbers: [], branches: []\n  });\n  const { toast } = useToast();\n  const canCreate = useHasPermission('merchants', 'create');\n  const canEdit = useHasPermission('merchants', 'edit');\n  const canDelete = useHasPermission('merchants', 'delete');\n  const canImport = useHasPermission('merchants', 'import');\n  const canExport = useHasPermission('merchants', 'export');\n  const [showModal, setShowModal] = useState(false);\n  const [showImportModal, setShowImportModal] = useState(false);\n  const [editingMerchant, setEditingMerchant] = useState(null);\n  const [importing, setImporting] = useState(false);\n  const [importPreview, setImportPreview] = useState(null);\n  const fileInputRef = useRef(null);\n  const [formData, setFormData] = useState({\n    merchant_id: '',\n    governorate: '',\n    ministry: '',\n    directorate_name: '',\n    details: '',\n    device_count: 0,\n    iban: '',\n    account_key: '',\n    account_number: '',\n    branch_name: '',\n    branch_number: '',\n    bank_code: '',\n    bank_name: '',\n    bank_name_alt: '',\n    iban_length_check: 23,\n    notes: '',\n    settlement_name: '',\n    commission_type: 'حكومي'\n  });\n\n  useEffect(() => {\n    fetchMerchants();\n    fetchFilterOptions();\n  }, [pagination.page, filters, columnFilters]);\n\n  const fetchMerchants = async () => {\n    try {\n      setLoading(true);\n      const apiParams = {\n        page: pagination.page,\n        limit: pagination.limit,\n        ...Object.fromEntries(Object.entries(filters).filter(([_, v]) => v)),\n        /* إرسال فلاتر الأعمدة للـ API — نُفضّل columnFilters عند وجوده */\n        ...(columnFilters.merchant_id && { merchant_id: columnFilters.merchant_id }),\n        ...(columnFilters.iban && { iban: columnFilters.iban }),\n        ...(columnFilters.directorate_name && { directorate_name: columnFilters.directorate_name }),\n        ...(columnFilters.settlement_name && { settlement_name: columnFilters.settlement_name }),\n        ...(columnFilters.device_count && { device_count: columnFilters.device_count }),\n        ...(columnFilters.account_number && { account_number: columnFilters.account_number }),\n        ...(columnFilters.branch_name && { branch_name: columnFilters.branch_name }),\n        ...((columnFilters.governorate || filters.governorate) && { governorate: columnFilters.governorate || filters.governorate }),\n        ...((columnFilters.ministry || filters.ministry) && { ministry: columnFilters.ministry || filters.ministry }),\n        ...((columnFilters.bank_code || filters.bank_code) && { bank_code: columnFilters.bank_code || filters.bank_code }),\n        ...((columnFilters.commission_type || filters.commission_type) && { commission_type: columnFilters.commission_type || filters.commission_type }),\n      };\n      const params = new URLSearchParams(Object.fromEntries(Object.entries(apiParams).filter(([_, v]) => v != null && v !== '')));\n      const response = await api.get(`/merchants?${params}`);\n      setMerchants(response.data?.merchants || []);\n      setPagination(response.data?.pagination || { page: 1, limit: 50, total: 0, totalPages: 0 });\n    } catch (error) {\n      console.error('Error fetching merchants:', error);\n      toast({\n        title: 'خطأ',\n        description: error.response?.data?.error || 'خطأ في جلب التجار',\n        variant: 'destructive'\n      });\n      setMerchants([]);\n      setPagination({ page: 1, limit: 50, total: 0, totalPages: 0 });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFilterOptions = async () => {\n    try {\n      const response = await api.get('/merchants/filter-options');\n      const data = response.data || {};\n      setFilterOptions({\n        governorates: data.governorates || [],\n        ministries: data.ministries || [],\n        bankCodes: data.bankCodes || [],\n        merchantIds: data.merchantIds || [],\n        directorates: data.directorates || [],\n        settlements: data.settlements || [],\n        deviceCounts: data.deviceCounts || [],\n        ibans: data.ibans || [],\n        accountNumbers: data.accountNumbers || [],\n        branches: data.branches || []\n      });\n    } catch (error) {\n      console.error('خطأ في جلب خيارات الفلترة:', error);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (editingMerchant) {\n        await api.put(`/merchants/${editingMerchant.id}`, formData);\n        toast({\n          title: 'نجح',\n          description: 'تم تحديث التاجر بنجاح',\n          variant: 'success'\n        });\n      } else {\n        await api.post('/merchants', formData);\n        toast({\n          title: 'نجح',\n          description: 'تم إضافة التاجر بنجاح',\n          variant: 'success'\n        });\n      }\n      setShowModal(false);\n      resetForm();\n      fetchMerchants();\n    } catch (error) {\n      toast({\n        title: 'خطأ',\n        description: error.response?.data?.error || 'حدث خطأ',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  const handleEdit = (merchant) => {\n    setEditingMerchant(merchant);\n    setFormData({\n      merchant_id: merchant.merchant_id || '',\n      governorate: merchant.governorate || '',\n      ministry: merchant.ministry || '',\n      directorate_name: merchant.directorate_name || '',\n      details: merchant.details || '',\n      device_count: merchant.device_count || 0,\n      iban: merchant.iban || '',\n      account_key: merchant.account_key || '',\n      account_number: merchant.account_number || '',\n      branch_name: merchant.branch_name || '',\n      branch_number: merchant.branch_number || '',\n      bank_code: merchant.bank_code || '',\n      bank_name: merchant.bank_name || '',\n      bank_name_alt: merchant.bank_name_alt || '',\n      iban_length_check: merchant.iban_length_check || 23,\n      notes: merchant.notes || '',\n      settlement_name: merchant.settlement_name || '',\n      commission_type: merchant.commission_type || 'حكومي'\n    });\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm('هل أنت متأكد من حذف هذا التاجر؟')) return;\n    try {\n      await api.delete(`/merchants/${id}`);\n      toast({\n        title: 'نجح',\n        description: 'تم حذف التاجر بنجاح',\n        variant: 'success'\n      });\n      fetchMerchants();\n    } catch (error) {\n      toast({\n        title: 'خطأ',\n        description: error.response?.data?.error || 'حدث خطأ',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  // معالجة رفع ملف Excel\n  const handleFileUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const fileExtension = file.name.split('.').pop().toLowerCase();\n    if (!['xlsx', 'xls', 'csv'].includes(fileExtension)) {\n      toast({\n        title: 'خطأ',\n        description: 'يرجى رفع ملف Excel (.xlsx, .xls) أو CSV',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try {\n        const data = new Uint8Array(event.target.result);\n        const workbook = XLSX.read(data, { type: 'array' });\n        \n        // قراءة أول ورقة عمل\n        const firstSheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[firstSheetName];\n        \n        // تحويل إلى JSON\n        const jsonData = XLSX.utils.sheet_to_json(worksheet, { \n          header: 1,\n          defval: '' // القيمة الافتراضية للخلايا الفارغة\n        });\n\n        if (jsonData.length < 2) {\n          toast({\n            title: 'خطأ',\n            description: 'الملف فارغ أو لا يحتوي على بيانات',\n            variant: 'destructive'\n          });\n          return;\n        }\n\n        // السطر الأول هو العناوين\n        const headers = jsonData[0].map(h => String(h).trim());\n        \n        // التحقق من وجود عمود merchant_id\n        const merchantIdIndex = headers.findIndex(h => \n          h && (h.toLowerCase().includes('merchant') && h.toLowerCase().includes('id')) ||\n          h === 'Merchant ID' || h === 'merchant_id' || h === 'Merchant ID'\n        );\n\n        if (merchantIdIndex === -1) {\n          toast({\n            title: 'خطأ',\n            description: 'لم يتم العثور على عمود Merchant ID في الملف',\n            variant: 'destructive'\n          });\n          return;\n        }\n\n        // تحويل البيانات إلى كائنات\n        const merchants = jsonData.slice(1)\n          .filter(row => row && row[merchantIdIndex]) // تجاهل الصفوف الفارغة\n          .map((row, index) => {\n            const merchant = {};\n            headers.forEach((header, idx) => {\n              const value = row[idx];\n              merchant[header] = value !== undefined && value !== null ? String(value).trim() : '';\n            });\n            merchant._rowNumber = index + 2; // رقم الصف في Excel (يبدأ من 2 لأن 1 هو العنوان)\n            return merchant;\n          });\n\n        if (merchants.length === 0) {\n          toast({\n            title: 'خطأ',\n            description: 'لا توجد بيانات صالحة في الملف',\n            variant: 'destructive'\n          });\n          return;\n        }\n\n        // التحقق من التكرارات داخل الملف نفسه\n        const merchantIds = merchants.map(m => {\n          const merchantId = m[headers[merchantIdIndex]] || m['Merchant ID'] || m['merchant_id'];\n          return merchantId;\n        });\n        const duplicates = merchantIds.filter((id, index) => merchantIds.indexOf(id) !== index);\n        \n        if (duplicates.length > 0) {\n          const uniqueDuplicates = [...new Set(duplicates)];\n          toast({\n            title: 'تحذير',\n            description: `تم العثور على تكرارات في الملف: ${uniqueDuplicates.join(', ')}. سيتم تجاهل التكرارات.`,\n            variant: 'warning'\n          });\n        }\n\n        // إزالة التكرارات من الملف\n        const seenIds = new Set();\n        const uniqueMerchants = merchants.filter(merchant => {\n          const merchantId = merchant[headers[merchantIdIndex]] || merchant['Merchant ID'] || merchant['merchant_id'];\n          if (!merchantId || seenIds.has(merchantId)) {\n            return false;\n          }\n          seenIds.add(merchantId);\n          return true;\n        });\n\n        setImportPreview({\n          total: merchants.length,\n          unique: uniqueMerchants.length,\n          duplicates: merchants.length - uniqueMerchants.length,\n          merchants: uniqueMerchants,\n          headers\n        });\n      } catch (error) {\n        console.error('Error reading file:', error);\n        toast({\n          title: 'خطأ',\n          description: 'حدث خطأ في قراءة الملف. تأكد من أن الملف صحيح.',\n          variant: 'destructive'\n        });\n      }\n    };\n\n    if (fileExtension === 'csv') {\n      reader.readAsText(file, 'UTF-8');\n    } else {\n      reader.readAsArrayBuffer(file);\n    }\n  };\n\n  // تنفيذ الاستيراد\n  const handleImport = async () => {\n    if (!importPreview || importPreview.merchants.length === 0) {\n      toast({\n        title: 'خطأ',\n        description: 'لا توجد بيانات للاستيراد',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    setImporting(true);\n    try {\n      // تحويل البيانات إلى الصيغة المتوقعة من الـ backend\n      const merchantsToImport = importPreview.merchants.map(merchant => {\n        const merchantIdHeader = importPreview.headers.find(h => \n          h && (h.toLowerCase().includes('merchant') && h.toLowerCase().includes('id'))\n        ) || 'Merchant ID';\n        \n        return {\n          merchant_id: merchant[merchantIdHeader] || merchant['Merchant ID'] || merchant['merchant_id'],\n          governorate: merchant['المحافظة'] || merchant['governorate'] || '',\n          ministry: merchant['الوزارة'] || merchant['ministry'] || '',\n          directorate_name: merchant['اسم المديرية'] || merchant['directorate_name'] || merchant['المديرية'] || '',\n          details: merchant['التفاصيل'] || merchant['details'] || '',\n          device_count: parseInt(merchant['عدد الأجهزة'] || merchant['device_count'] || 0),\n          iban: merchant['IBAN'] || merchant['iban'] || '',\n          account_key: merchant['key'] || merchant['account_key'] || '',\n          account_number: merchant['رقم الحــــساب'] || merchant['رقم الحساب'] || merchant['account_number'] || '',\n          branch_name: merchant['اسم الفرع'] || merchant['branch_name'] || '',\n          branch_number: merchant['رقم الفرع'] || merchant['branch_number'] || '',\n          bank_code: merchant['المصرف'] || merchant['bank_code'] || '',\n          bank_name: merchant['المصرف2'] || merchant['bank_name'] || '',\n          bank_name_alt: merchant['المصرف3'] || merchant['bank_name_alt'] || '',\n          iban_length_check: parseInt(merchant['التحقق من طول الايبان'] || merchant['iban_length_check'] || 23),\n          notes: merchant['الملاحظات'] || merchant['notes'] || '',\n          settlement_name: merchant['اسم التسوية'] || merchant['settlement_name'] || '',\n          commission_type: merchant['نوع العمولة'] || merchant['commission_type'] || 'حكومي'\n        };\n      });\n\n      const response = await api.post('/merchants/import', { \n        merchants: merchantsToImport,\n        rejectDuplicates: true // إرسال علامة لرفض التكرارات\n      });\n\n      // عرض تقرير مفصل\n      if (response.data.errors && response.data.errors.length > 0) {\n        const duplicateErrors = response.data.errors.filter(e => \n          e.error && e.error.includes('موجود') || e.error && e.error.includes('duplicate')\n        );\n        const otherErrors = response.data.errors.filter(e => \n          !e.error || (!e.error.includes('موجود') && !e.error.includes('duplicate'))\n        );\n\n        if (duplicateErrors.length > 0) {\n          toast({\n            title: 'تحذير',\n            description: `تم رفض ${duplicateErrors.length} تاجر بسبب تكرار Merchant ID`,\n            variant: 'warning'\n          });\n        }\n\n        if (otherErrors.length > 0) {\n          toast({\n            title: 'تحذير',\n            description: `فشل استيراد ${otherErrors.length} تاجر بسبب أخطاء أخرى`,\n            variant: 'warning'\n          });\n        }\n      }\n\n      if (response.data.imported > 0) {\n        toast({\n          title: 'نجح',\n          description: `تم استيراد ${response.data.imported} تاجر بنجاح`,\n          variant: 'success'\n        });\n      }\n\n      setShowImportModal(false);\n      setImportPreview(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      fetchMerchants();\n    } catch (error) {\n      console.error('Import error:', error);\n      toast({\n        title: 'خطأ',\n        description: error.response?.data?.error || 'حدث خطأ في الاستيراد',\n        variant: 'destructive'\n      });\n    } finally {\n      setImporting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setEditingMerchant(null);\n    setFormData({\n      merchant_id: '',\n      governorate: '',\n      ministry: '',\n      directorate_name: '',\n      details: '',\n      device_count: 0,\n      iban: '',\n      account_key: '',\n      account_number: '',\n      branch_name: '',\n      branch_number: '',\n      bank_code: '',\n      bank_name: '',\n      bank_name_alt: '',\n      iban_length_check: 23,\n      notes: '',\n      settlement_name: '',\n      commission_type: 'حكومي'\n    });\n  };\n\n  const handleFilterChange = (key, value) => {\n    setFilters(prev => ({ ...prev, [key]: value }));\n    setPagination(prev => ({ ...prev, page: 1 }));\n  };\n\n  const handleColumnFilterChange = (key, value) => {\n    setColumnFilters(prev => ({ ...prev, [key]: value }));\n    setPagination(prev => ({ ...prev, page: 1 }));\n    /* تزامن مع filters للـ API */\n    if (['governorate', 'ministry', 'bank_code', 'commission_type'].includes(key)) {\n      const first = (value || '').split(',')[0]?.trim() || '';\n      setFilters(prev => ({ ...prev, [key]: first }));\n    }\n    if (key === 'merchant_id') setFilters(prev => ({ ...prev, search: (value || '').split(',')[0]?.trim() || '' }));\n  };\n\n  const handleSortChange = (column, direction) => {\n    setSortState({ column, direction });\n  };\n\n  /* تطبيق الفلاتر والفرز على بيانات الصفحة الحالية\n   * ملاحظة: filters.search يُعالَج في الـ API (ILIKE)، فلا نطبّقه هنا كمطابقة تامّة حتى لا نخفي النتائج عند البحث الجزئي */\n  const filteredMerchants = useMemo(() => {\n    let list = merchants;\n    const toSet = (v) => {\n      const arr = (v || '').split(',').map(s => s.trim()).filter(Boolean);\n      return arr.length ? new Set(arr) : null;\n    };\n    const applyCol = (getVal, filterVal) => {\n      const s = toSet(filterVal);\n      if (s) list = list.filter(m => s.has(String(getVal(m) || '')));\n    };\n    /* merchant_id: فقط من columnFilters (اختيار صريح)، لأن search يُطبَّق في API كـ ILIKE */\n    applyCol(m => m.merchant_id, columnFilters.merchant_id);\n    applyCol(m => m.governorate, columnFilters.governorate || filters.governorate);\n    applyCol(m => m.ministry, columnFilters.ministry || filters.ministry);\n    applyCol(m => m.directorate_name, columnFilters.directorate_name);\n    applyCol(m => m.bank_code || m.bank_name, columnFilters.bank_code || filters.bank_code);\n    applyCol(m => m.settlement_name, columnFilters.settlement_name);\n    applyCol(m => m.commission_type, columnFilters.commission_type || filters.commission_type);\n    applyCol(m => String(m.device_count), columnFilters.device_count);\n    applyCol(m => m.iban, columnFilters.iban);\n    applyCol(m => m.account_number, columnFilters.account_number);\n    applyCol(m => m.branch_name, columnFilters.branch_name);\n\n    /* فرز */\n    if (sortState.column && sortState.direction) {\n      const key = sortState.column;\n      const dir = sortState.direction === 'asc' ? 1 : -1;\n      list = [...list].sort((a, b) => {\n        const va = a[key] ?? '';\n        const vb = b[key] ?? '';\n        if (typeof va === 'number' && typeof vb === 'number') return (va - vb) * dir;\n        return String(va).localeCompare(String(vb)) * dir;\n      });\n    }\n    return list;\n  }, [merchants, filters, columnFilters, sortState]);\n\n  const stats = useMemo(() => {\n    const total = pagination.total || merchants.length || 0;\n    const govCount = merchants.filter(m => m.commission_type === 'حكومي').length;\n    const privateCount = merchants.filter(m => m.commission_type === 'خاص').length;\n    const uniqueGovernorates = new Set(merchants.map(m => m.governorate).filter(Boolean)).size;\n    return { total, govCount, privateCount, uniqueGovernorates };\n  }, [merchants, pagination.total]);\n\n  const hasActiveFilters =\n    Object.values(filters).some(Boolean) ||\n    Object.values(columnFilters).some(Boolean) ||\n    sortState.column;\n\n  const handleExport = async () => {\n    try {\n      const params = new URLSearchParams({\n        page: 1,\n        limit: 100000,\n        ...Object.fromEntries(Object.entries(filters).filter(([_, v]) => v))\n      });\n\n      const response = await api.get(`/merchants?${params.toString()}`);\n      const allMerchants = response.data?.merchants || [];\n\n      if (!allMerchants || allMerchants.length === 0) {\n        toast({\n          title: 'تنبيه',\n          description: 'لا توجد بيانات حالياً للتصدير حسب الفلاتر الحالية',\n          variant: 'warning'\n        });\n        return;\n      }\n\n      const govMerchants = allMerchants.filter(m => m.commission_type === 'حكومي');\n      const privateMerchants = allMerchants.filter(m => m.commission_type === 'خاص');\n\n      const mapExport = (list) =>\n        list.map(m => ({\n          'Merchant ID': m.merchant_id || '',\n          'المحافظة': m.governorate || '',\n          'الوزارة': m.ministry || '',\n          'اسم المديرية': m.directorate_name || '',\n          'التفاصيل': m.details || '',\n          'عدد الأجهزة': m.device_count || 0,\n          'IBAN': m.iban || '',\n          'رقم الحساب': m.account_number || '',\n          'اسم الفرع': m.branch_name || '',\n          'رقم الفرع': m.branch_number || '',\n          'كود المصرف': m.bank_code || '',\n          'اسم المصرف': m.bank_name || '',\n          'اسم التسوية': m.settlement_name || '',\n          'نوع العمولة / القطاع': m.commission_type || ''\n        }));\n\n      const workbook = XLSX.utils.book_new();\n\n      // ورقة لجميع البيانات حسب الفلاتر\n      const allSheet = XLSX.utils.json_to_sheet(mapExport(allMerchants));\n      XLSX.utils.book_append_sheet(workbook, allSheet, 'الكل');\n\n      // ورقة للقطاع الحكومي\n      if (govMerchants.length > 0) {\n        const govSheet = XLSX.utils.json_to_sheet(mapExport(govMerchants));\n        XLSX.utils.book_append_sheet(workbook, govSheet, 'حكومي');\n      }\n\n      // ورقة للقطاع الخاص\n      if (privateMerchants.length > 0) {\n        const privateSheet = XLSX.utils.json_to_sheet(mapExport(privateMerchants));\n        XLSX.utils.book_append_sheet(workbook, privateSheet, 'خاص');\n      }\n\n      const today = new Date().toISOString().slice(0, 10);\n      XLSX.writeFile(workbook, `merchants_${today}.xlsx`);\n\n      toast({\n        title: 'نجح',\n        description: `تم تصدير ${allMerchants.length} تاجر إلى Excel (حسب الفلاتر الحالية)`,\n        variant: 'success'\n      });\n    } catch (error) {\n      console.error('Export error:', error);\n      toast({\n        title: 'خطأ',\n        description: 'حدث خطأ أثناء تصدير البيانات إلى Excel',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen\" dir=\"rtl\" style={{ padding: '1.5rem 2rem', background: 'linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%)' }}>\n      <div className=\"mx-auto\" style={{ width: '100%', maxWidth: '1400px' }}>\n        {/* هيدر علوي */}\n        <div\n          className=\"page-header-teal rounded-xl flex flex-wrap items-center justify-between gap-4 p-5 mb-6\"\n          style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)', color: '#ffffff', boxShadow: '0 10px 30px rgba(2, 97, 116, 0.35)' }}\n        >\n          <div>\n            <h1 className=\"text-2xl font-bold m-0 text-white\">إدارة التجار</h1>\n            <p className=\"text-sm opacity-90 mt-1 m-0 text-white\">إدارة حسابات الجهات الحكومية والقطاع الخاص، المصارف، وأرقام الحسابات المرتبطة بالتسويات.</p>\n          </div>\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            {canExport && <button type=\"button\" onClick={handleExport} className=\"ds-btn ds-btn-outline px-4 py-2 rounded-full text-sm font-medium bg-white text-[#026174] border-0 shadow\">تصدير إلى Excel</button>}\n            {canImport && <button type=\"button\" onClick={() => setShowImportModal(true)} className=\"ds-btn ds-btn-primary px-4 py-2 rounded-full text-sm font-medium\">استيراد من Excel</button>}\n            {canCreate && <button type=\"button\" onClick={() => { resetForm(); setShowModal(true); }} className=\"ds-btn ds-btn-primary px-4 py-2 rounded-full text-sm font-medium bg-white text-[#026174] border-0 shadow hover:bg-white/95\">إضافة تاجر جديد</button>}\n          </div>\n        </div>\n\n        {/* كروت إحصائيات */}\n        <div className=\"grid gap-4 mb-6\" style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))' }}>\n          {[\n            { label: 'إجمالي التجار', value: stats.total, Icon: Users, bg: 'linear-gradient(135deg, #eef9fb 0%, #e4f4f7 100%)', border: '#026174', iconBg: 'linear-gradient(135deg, #068294 0%, #026174 100%)', textColor: '#026174' },\n            { label: 'تجار القطاع الحكومي', value: stats.govCount, Icon: Building2, bg: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)', border: '#16a34a', iconBg: 'linear-gradient(135deg, #16a34a 0%, #15803d 100%)', textColor: '#15803d' },\n            { label: 'تجار القطاع الخاص', value: stats.privateCount, Icon: Store, bg: 'linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%)', border: '#ea580c', iconBg: 'linear-gradient(135deg, #ea580c 0%, #c2410c 100%)', textColor: '#c2410c' },\n            { label: 'عدد المحافظات المغطّاة', value: stats.uniqueGovernorates, Icon: MapPin, bg: 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)', border: '#0284c7', iconBg: 'linear-gradient(135deg, #0284c7 0%, #0369a1 100%)', textColor: '#0369a1' },\n          ].map((item, i) => (\n            <div key={i} className=\"rounded-2xl p-5 border-2 relative overflow-hidden transition-all hover:shadow-lg hover:-translate-y-0.5\" style={{ background: item.bg, borderColor: item.border, boxShadow: '0 4px 20px rgba(0,0,0,0.06)' }}>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0\" style={{ background: item.iconBg }}>\n                  <item.Icon className=\"w-6 h-6 text-white\" strokeWidth={2.5} />\n                </div>\n                <div>\n                  <p className=\"text-xs font-bold m-0 mb-0.5\" style={{ color: 'var(--text-muted)' }}>{item.label}</p>\n                  <p className=\"text-2xl font-extrabold m-0 tabular-nums\" style={{ color: item.textColor }} dir=\"ltr\">{item.value}</p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* الفلاتر */}\n        <div\n          className=\"rounded-2xl p-5 mb-6 merchants-filter-card\"\n          style={{ background: 'linear-gradient(180deg, #eef9fb 0%, #ffffff 100%)', boxShadow: '0 6px 24px rgba(2, 97, 116, 0.12)', border: '2px solid #b8dce2' }}\n        >\n          <div className=\"flex items-center justify-between gap-4 flex-wrap mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-9 h-9 rounded-lg flex items-center justify-center\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                <Filter className=\"w-5 h-5 text-white\" strokeWidth={2.5} />\n              </div>\n              <span className=\"text-base font-bold\" style={{ color: '#026174' }}>الفلاتر — إدارة التجار</span>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setFilters({ search: '', governorate: '', ministry: '', bank_code: '', commission_type: '' });\n                setColumnFilters({ merchant_id: '', governorate: '', ministry: '', directorate_name: '', bank_code: '', settlement_name: '', commission_type: '', device_count: '', iban: '', account_number: '', branch_name: '' });\n                setSortState({ column: null, direction: null });\n                setPagination(prev => ({ ...prev, page: 1 }));\n              }}\n              disabled={!hasActiveFilters}\n              className=\"merchants-clear-filters-btn\"\n            >\n              مسح الفلاتر\n            </button>\n          </div>\n          <div className=\"grid gap-4\" style={{ gridTemplateColumns: 'minmax(240px, 2fr) repeat(auto-fit, minmax(160px, 1fr))' }}>\n            <div className=\"merchants-filter-input-wrapper\">\n              <Search className=\"w-5 h-5 text-[#026174] flex-shrink-0\" strokeWidth={2} />\n              <input type=\"text\" placeholder=\"بحث باسم المديرية / Merchant ID / IBAN...\" value={filters.search} onChange={(e) => handleFilterChange('search', e.target.value)} className=\"merchants-filter-input\" />\n            </div>\n            <div className=\"merchants-filter-select-wrapper\">\n              <MapPin className=\"w-4 h-4 text-[#026174] flex-shrink-0\" strokeWidth={2} />\n              <select value={filters.governorate} onChange={(e) => handleFilterChange('governorate', e.target.value)} className=\"merchants-filter-select\">\n                <option value=\"\">جميع المحافظات</option>\n                {filterOptions.governorates?.map(g => <option key={g} value={g}>{g}</option>)}\n              </select>\n            </div>\n            <div className=\"merchants-filter-select-wrapper\">\n              <Building2 className=\"w-4 h-4 text-[#026174] flex-shrink-0\" strokeWidth={2} />\n              <select value={filters.ministry} onChange={(e) => handleFilterChange('ministry', e.target.value)} className=\"merchants-filter-select\">\n                <option value=\"\">جميع الوزارات</option>\n                {filterOptions.ministries?.map(m => <option key={m} value={m}>{m}</option>)}\n              </select>\n            </div>\n            <div className=\"merchants-filter-select-wrapper\">\n              <Landmark className=\"w-4 h-4 text-[#026174] flex-shrink-0\" strokeWidth={2} />\n              <select value={filters.bank_code} onChange={(e) => handleFilterChange('bank_code', e.target.value)} className=\"merchants-filter-select\">\n                <option value=\"\">جميع المصارف</option>\n                {filterOptions.bankCodes?.map(b => <option key={b} value={b}>{b}</option>)}\n              </select>\n            </div>\n            <div className=\"merchants-filter-select-wrapper\">\n              <Briefcase className=\"w-4 h-4 text-[#026174] flex-shrink-0\" strokeWidth={2} />\n              <select value={filters.commission_type} onChange={(e) => handleFilterChange('commission_type', e.target.value)} className=\"merchants-filter-select\">\n                <option value=\"\">كل القطاعات</option>\n                <option value=\"حكومي\">حكومي</option>\n                <option value=\"خاص\">خاص</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Loading */}\n        {loading && merchants.length === 0 && (\n          <div className=\"p-16 flex justify-center\"><Loading message=\"جاري تحميل التجار...\" /></div>\n        )}\n\n        {/* الجدول — التمرير على مستوى الصفحة حتى يلتصق الرأس عند التمرير */}\n        {!loading && (\n          <div\n            className=\"rounded-2xl overflow-hidden merchants-table-container\"\n            style={{ background: 'var(--surface)', boxShadow: 'var(--shadow-card)', border: '2px solid var(--border-card)' }}\n          >\n            <div className=\"merchants-table-scroll overflow-x-auto\" style={{ isolation: 'isolate' }}>\n              {merchants.length === 0 ? (\n                <div className=\"p-16 text-center\">\n                  <p className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>لا توجد تجار مطابقة لمعايير البحث الحالية</p>\n                  <p className=\"mt-2 text-sm m-0\" style={{ color: 'var(--text-muted)' }}>\n                    جرّب تعديل الفلاتر أو{' '}\n                    <button type=\"button\" onClick={() => { setFilters({ search: '', governorate: '', ministry: '', bank_code: '', commission_type: '' }); setColumnFilters({ merchant_id: '', governorate: '', ministry: '', directorate_name: '', bank_code: '', settlement_name: '', commission_type: '', device_count: '', iban: '', account_number: '', branch_name: '' }); setSortState({ column: null, direction: null }); setPagination(prev => ({ ...prev, page: 1 })); }} className=\"text-[var(--primary-600)] cursor-pointer underline bg-transparent border-0 text-sm\">مسح جميع الفلاتر</button>\n                  </p>\n                </div>\n              ) : (\n                <table className=\"ds-table w-full border-collapse text-sm merchants-table-sticky\" dir=\"rtl\" style={{ minWidth: '1600px' }}>\n                  <thead>\n                    <tr className=\"table-header-dark merchants-sticky-header-row\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>Merchant ID</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>المحافظة</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>الوزارة</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>اسم المديرية</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>التفاصيل</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>المصرف</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>اسم التسوية</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>نوع القطاع</ColHeader></th>\n                      <th className=\"text-center py-4 px-4 font-bold text-white\"><ColHeader>عدد الأجهزة</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>IBAN</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>رقم الحساب</ColHeader></th>\n                      <th className=\"text-end py-4 px-4 font-bold text-white\"><ColHeader>اسم الفرع</ColHeader></th>\n                      <th className=\"text-center py-4 px-4 font-bold text-white\">الإجراءات</th>\n                    </tr>\n                    {/* صف الفلاتر — نمط Excel: فرز، بحث، تحديد متعدد، تطبيق تلقائي */}\n                    <tr className=\"excel-filter-row merchants-sticky-filter-row\">\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"merchant_id\"\n                          columnLabel=\"Merchant ID\"\n                          options={filterOptions.merchantIds || []}\n                          value={columnFilters.merchant_id || filters.search}\n                          onChange={(v) => { setColumnFilters(p => ({ ...p, merchant_id: v })); setFilters(p => ({ ...p, search: (v || '').split(',')[0]?.trim() || '' })); setPagination(p => ({ ...p, page: 1 })); }}\n                          sortDirection={sortState.column === 'merchant_id' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'merchant_id' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.merchant_id || filters.search} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"governorate\"\n                          columnLabel=\"المحافظة\"\n                          options={filterOptions.governorates || []}\n                          value={columnFilters.governorate || filters.governorate}\n                          onChange={(v) => handleColumnFilterChange('governorate', v)}\n                          sortDirection={sortState.column === 'governorate' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'governorate' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.governorate || filters.governorate} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"ministry\"\n                          columnLabel=\"الوزارة\"\n                          options={filterOptions.ministries || []}\n                          value={columnFilters.ministry || filters.ministry}\n                          onChange={(v) => handleColumnFilterChange('ministry', v)}\n                          sortDirection={sortState.column === 'ministry' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'ministry' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.ministry || filters.ministry} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"directorate_name\"\n                          columnLabel=\"اسم المديرية\"\n                          options={filterOptions.directorates || []}\n                          value={columnFilters.directorate_name}\n                          onChange={(v) => handleColumnFilterChange('directorate_name', v)}\n                          sortDirection={sortState.column === 'directorate_name' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'directorate_name' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.directorate_name} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\" />\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"bank_code\"\n                          columnLabel=\"المصرف\"\n                          options={filterOptions.bankCodes || []}\n                          value={columnFilters.bank_code || filters.bank_code}\n                          onChange={(v) => handleColumnFilterChange('bank_code', v)}\n                          sortDirection={sortState.column === 'bank_code' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'bank_code' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.bank_code || filters.bank_code} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"settlement_name\"\n                          columnLabel=\"اسم التسوية\"\n                          options={filterOptions.settlements || []}\n                          value={columnFilters.settlement_name}\n                          onChange={(v) => handleColumnFilterChange('settlement_name', v)}\n                          sortDirection={sortState.column === 'settlement_name' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'settlement_name' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.settlement_name} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"commission_type\"\n                          columnLabel=\"نوع القطاع\"\n                          options={['حكومي', 'خاص']}\n                          value={columnFilters.commission_type || filters.commission_type}\n                          onChange={(v) => handleColumnFilterChange('commission_type', v)}\n                          sortDirection={sortState.column === 'commission_type' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'commission_type' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.commission_type || filters.commission_type} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"device_count\"\n                          columnLabel=\"عدد الأجهزة\"\n                          options={filterOptions.deviceCounts || []}\n                          value={columnFilters.device_count}\n                          onChange={(v) => handleColumnFilterChange('device_count', v)}\n                          sortDirection={sortState.column === 'device_count' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'device_count' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.device_count} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"iban\"\n                          columnLabel=\"IBAN\"\n                          options={filterOptions.ibans || []}\n                          value={columnFilters.iban}\n                          onChange={(v) => handleColumnFilterChange('iban', v)}\n                          sortDirection={sortState.column === 'iban' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'iban' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.iban} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"account_number\"\n                          columnLabel=\"رقم الحساب\"\n                          options={filterOptions.accountNumbers || []}\n                          value={columnFilters.account_number}\n                          onChange={(v) => handleColumnFilterChange('account_number', v)}\n                          sortDirection={sortState.column === 'account_number' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'account_number' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.account_number} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\">\n                        <ExcelColumnFilter\n                          columnKey=\"branch_name\"\n                          columnLabel=\"اسم الفرع\"\n                          options={filterOptions.branches || []}\n                          value={columnFilters.branch_name}\n                          onChange={(v) => handleColumnFilterChange('branch_name', v)}\n                          sortDirection={sortState.column === 'branch_name' ? sortState.direction : null}\n                          onSortChange={(d) => handleSortChange(d ? 'branch_name' : null, d)}\n                          trigger={<FilterTrigger value={columnFilters.branch_name} label=\"الكل\" />}\n                        />\n                      </th>\n                      <th className=\"excel-filter-cell\" />\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {filteredMerchants.length === 0 ? (\n                      <tr>\n                        <td colSpan={13} className=\"py-8 text-center\" style={{ color: 'var(--text-muted)' }}>لا توجد صفوف مطابقة للفلاتر</td>\n                      </tr>\n                    ) : filteredMerchants.map((merchant, idx) => {\n                      const isGov = merchant.commission_type === 'حكومي';\n                      return (\n                        <tr key={merchant.id} className={`${idx % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'} hover:bg-slate-50/80 transition-colors`} style={{ borderBottom: '1px solid var(--border)' }}>\n                          <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{merchant.merchant_id}</td>\n                          <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{merchant.governorate || '-'}</td>\n                          <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{merchant.ministry || '-'}</td>\n                          <td className=\"py-3 px-4 max-w-[260px]\" style={{ color: 'var(--text)' }}>{merchant.directorate_name || '-'}</td>\n                          <td className=\"py-3 px-4 max-w-[220px] truncate\" style={{ color: 'var(--text)' }} title={merchant.details || undefined}>{merchant.details || '-'}</td>\n                          <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{merchant.bank_name || merchant.bank_code || '-'}</td>\n                          <td className=\"py-3 px-4 max-w-[260px]\" style={{ color: 'var(--text)' }}>{merchant.settlement_name || '-'}</td>\n                          <td className=\"py-3 px-4 font-semibold\" style={{ color: isGov ? 'var(--success)' : '#b45309' }}>{merchant.commission_type || '-'}</td>\n                          <td className=\"py-3 px-4 text-center\" style={{ color: 'var(--text)' }}>{merchant.device_count || 0}</td>\n                          <td className=\"py-3 px-4 font-mono text-sm\" style={{ color: 'var(--text)' }} dir=\"ltr\">{merchant.iban || '-'}</td>\n                          <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{merchant.account_number || '-'}</td>\n                          <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{merchant.branch_name || '-'}</td>\n                          <td className=\"py-3 px-4\">\n                            <div className=\"flex justify-center gap-2\">\n                              <button type=\"button\" onClick={() => handleEdit(merchant)} className=\"ds-btn ds-btn-primary px-3 py-1.5 rounded-lg text-sm\">تعديل</button>\n                              <button type=\"button\" onClick={() => handleDelete(merchant.id)} className=\"px-3 py-1.5 rounded-lg text-sm font-medium bg-red-100 text-red-700 hover:bg-red-200 border-0 cursor-pointer\">حذف</button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              )}\n            </div>\n            {pagination.totalPages > 1 && (\n              <div className=\"px-4 py-3 border-t flex justify-between items-center text-sm\" style={{ borderColor: 'var(--border-card)', background: 'linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%)' }}>\n                <span style={{ color: 'var(--text-muted)' }} dir=\"ltr\">الصفحة {pagination.page} من {pagination.totalPages} – إجمالي {pagination.total} تاجر</span>\n                <div className=\"flex gap-2\">\n                  <button type=\"button\" onClick={() => setPagination(prev => ({ ...prev, page: prev.page - 1 }))} disabled={pagination.page === 1} className=\"ds-btn ds-btn-outline px-3 py-2 rounded-lg disabled:opacity-50\">السابق</button>\n                  <button type=\"button\" onClick={() => setPagination(prev => ({ ...prev, page: prev.page + 1 }))} disabled={pagination.page === pagination.totalPages} className=\"ds-btn ds-btn-outline px-3 py-2 rounded-lg disabled:opacity-50\">التالي</button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n      {/* Add/Edit Modal — نموذج أنيق بتقسيمات واضحة */}\n      {showModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-md animate-in fade-in duration-200\" style={{ background: 'rgba(2, 97, 116, 0.15)' }}>\n          <div className=\"rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200\" style={{ background: 'var(--surface)', border: '2px solid var(--border-card)', boxShadow: '0 25px 50px -12px rgba(2, 97, 116, 0.25)' }}>\n            {/* هيدر بتدرج teal */}\n            <div className=\"flex items-center justify-between px-6 py-5 rounded-t-2xl shrink-0\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n              <h2 className=\"text-xl font-bold m-0 text-white flex items-center gap-3\">\n                <span className=\"w-10 h-10 rounded-xl flex items-center justify-center\" style={{ background: 'rgba(255,255,255,0.2)' }}>\n                  <Building2 className=\"w-5 h-5 text-white\" />\n                </span>\n                {editingMerchant ? 'تعديل تاجر' : 'إضافة تاجر جديد'}\n              </h2>\n              <button type=\"button\" onClick={() => { setShowModal(false); resetForm(); }} className=\"w-10 h-10 rounded-xl flex items-center justify-center text-white hover:bg-white/20 transition-colors\" aria-label=\"إغلاق\">\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0 overflow-y-auto\">\n              <div className=\"p-6 space-y-6\">\n                {/* قسم البيانات الأساسية */}\n                <div className=\"rounded-xl p-5 border-2\" style={{ borderColor: 'var(--border-card)', background: 'linear-gradient(180deg, #fafbfc 0%, #ffffff 100%)' }}>\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <Building2 className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n                    <h3 className=\"text-base font-bold m-0\" style={{ color: 'var(--text-strong)' }}>البيانات الأساسية</h3>\n                  </div>\n                  <div className=\"grid gap-4\" style={{ gridTemplateColumns: 'repeat(2, 1fr)' }}>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>Merchant ID <span className=\"text-red-500\">*</span></label>\n                      <input type=\"text\" required value={formData.merchant_id} onChange={(e) => setFormData({ ...formData, merchant_id: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" placeholder=\"مثال: GOVEDU111111111\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>المحافظة</label>\n                      <input type=\"text\" value={formData.governorate} onChange={(e) => setFormData({ ...formData, governorate: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>الوزارة</label>\n                      <input type=\"text\" value={formData.ministry} onChange={(e) => setFormData({ ...formData, ministry: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>اسم المديرية</label>\n                      <input type=\"text\" value={formData.directorate_name} onChange={(e) => setFormData({ ...formData, directorate_name: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                    <div className=\"col-span-2\">\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>التفاصيل</label>\n                      <textarea value={formData.details} onChange={(e) => setFormData({ ...formData, details: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl min-h-[88px] border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all resize-none\" rows={3} />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>عدد الأجهزة</label>\n                      <input type=\"number\" min={0} value={formData.device_count} onChange={(e) => setFormData({ ...formData, device_count: parseInt(e.target.value) || 0 })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" dir=\"ltr\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>نوع العمولة</label>\n                      <select value={formData.commission_type} onChange={(e) => setFormData({ ...formData, commission_type: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\">\n                        <option value=\"حكومي\">حكومي</option>\n                        <option value=\"خاص\">خاص</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n\n                {/* قسم البيانات المصرفية */}\n                <div className=\"rounded-xl p-5 border-2\" style={{ borderColor: 'var(--border-card)', background: 'linear-gradient(180deg, #fafbfc 0%, #ffffff 100%)' }}>\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <Landmark className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n                    <h3 className=\"text-base font-bold m-0\" style={{ color: 'var(--text-strong)' }}>البيانات المصرفية</h3>\n                  </div>\n                  <div className=\"grid gap-4\" style={{ gridTemplateColumns: 'repeat(2, 1fr)' }}>\n                    <div className=\"col-span-2\">\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>IBAN</label>\n                      <input type=\"text\" value={formData.iban} onChange={(e) => setFormData({ ...formData, iban: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all font-mono\" dir=\"ltr\" placeholder=\"IQ...\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>رقم الحساب</label>\n                      <input type=\"text\" value={formData.account_number} onChange={(e) => setFormData({ ...formData, account_number: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" dir=\"ltr\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>كود المصرف</label>\n                      <input type=\"text\" value={formData.bank_code} onChange={(e) => setFormData({ ...formData, bank_code: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>اسم المصرف</label>\n                      <input type=\"text\" value={formData.bank_name} onChange={(e) => setFormData({ ...formData, bank_name: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>اسم الفرع</label>\n                      <input type=\"text\" value={formData.branch_name} onChange={(e) => setFormData({ ...formData, branch_name: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>رقم الفرع</label>\n                      <input type=\"text\" value={formData.branch_number} onChange={(e) => setFormData({ ...formData, branch_number: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" dir=\"ltr\" />\n                    </div>\n                    <div className=\"col-span-2\">\n                      <label className=\"block text-sm font-semibold mb-1.5\" style={{ color: 'var(--text-strong)' }}>اسم التسوية</label>\n                      <input type=\"text\" value={formData.settlement_name} onChange={(e) => setFormData({ ...formData, settlement_name: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all\" />\n                    </div>\n                  </div>\n                </div>\n\n                {/* قسم الملاحظات */}\n                <div className=\"rounded-xl p-5 border-2\" style={{ borderColor: 'var(--border-card)', background: 'linear-gradient(180deg, #fafbfc 0%, #ffffff 100%)' }}>\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <FileText className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n                    <h3 className=\"text-base font-bold m-0\" style={{ color: 'var(--text-strong)' }}>ملاحظات إضافية</h3>\n                  </div>\n                  <textarea value={formData.notes} onChange={(e) => setFormData({ ...formData, notes: e.target.value })} className=\"ds-input w-full py-2.5 px-4 rounded-xl min-h-[88px] border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 transition-all resize-none\" rows={3} placeholder=\"أي ملاحظات أو تفاصيل إضافية...\" />\n                </div>\n              </div>\n\n              {/* أزرار التذييل */}\n              <div className=\"flex gap-3 justify-end px-6 py-4 border-t shrink-0\" style={{ borderColor: 'var(--border-card)', background: 'linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%)' }}>\n                <button type=\"button\" onClick={() => { setShowModal(false); resetForm(); }} className=\"ds-btn ds-btn-outline px-5 py-2.5 rounded-xl font-semibold\">إلغاء</button>\n                <button type=\"submit\" className=\"ds-btn ds-btn-primary px-6 py-2.5 rounded-xl font-semibold shadow-lg\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>{editingMerchant ? 'تحديث التاجر' : 'إضافة التاجر'}</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Import Modal */}\n      {showImportModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm\" style={{ background: 'rgba(2, 97, 116, 0.2)' }}>\n          <div className=\"rounded-2xl shadow-2xl max-w-[900px] w-[90%] max-h-[90vh] overflow-y-auto\" style={{ background: 'var(--surface)', border: '2px solid var(--border-card)' }}>\n            <div className=\"rounded-t-2xl py-4 px-6\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n              <h2 className=\"text-xl font-bold m-0 text-white\">استيراد بيانات التجار من ملف Excel</h2>\n            </div>\n            <div className=\"p-6\">\n            {!importPreview ? (\n              <>\n                <div className=\"rounded-xl p-4 mb-6\" style={{ background: 'var(--bg)', border: '1px solid var(--border-card)' }}>\n                  <h3 className=\"text-base font-bold m-0 mb-2\" style={{ color: 'var(--text-strong)' }}>تعليمات الاستيراد:</h3>\n                  <ul className=\"m-0 pr-5 text-sm\" style={{ color: 'var(--text-muted)' }}>\n                    <li>يرجى رفع ملف Excel (.xlsx, .xls) أو CSV</li>\n                    <li>يجب أن يحتوي الملف على عمود <strong>Merchant ID</strong> (معرف التاجر)</li>\n                    <li>لا يمكن تكرار Merchant ID - سيتم رفض التكرارات تلقائياً</li>\n                    <li>السطر الأول يجب أن يحتوي على عناوين الأعمدة</li>\n                  </ul>\n                </div>\n                <label className=\"block text-sm font-semibold mb-2\" style={{ color: 'var(--text-strong)' }}>اختر ملف Excel:</label>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".xlsx,.xls,.csv\"\n                  onChange={handleFileUpload}\n                  className=\"w-full py-3 px-4 rounded-xl cursor-pointer border-2 border-dashed\"\n                  style={{ borderColor: 'var(--primary-600)', background: 'var(--bg)' }}\n                />\n              </>\n            ) : (\n              <>\n                <div className=\"rounded-xl p-4 mb-6 border-2\" style={{ background: 'var(--surface)', borderColor: 'var(--success)' }}>\n                  <h3 className=\"text-base font-bold m-0 mb-3\" style={{ color: 'var(--text-strong)' }}>معاينة البيانات:</h3>\n                  <div className=\"grid gap-4\" style={{ gridTemplateColumns: 'repeat(3, 1fr)' }}>\n                    <div className=\"rounded-xl p-3 border\" style={{ borderColor: 'var(--border-card)', background: 'var(--bg)' }}>\n                      <p className=\"text-xs font-bold m-0 mb-1\" style={{ color: 'var(--text-muted)' }}>إجمالي الصفوف</p>\n                      <p className=\"text-xl font-extrabold m-0 tabular-nums\" style={{ color: 'var(--primary-600)' }} dir=\"ltr\">{importPreview.total}</p>\n                    </div>\n                    <div className=\"rounded-xl p-3 border\" style={{ borderColor: 'var(--border-card)', background: 'var(--bg)' }}>\n                      <p className=\"text-xs font-bold m-0 mb-1\" style={{ color: 'var(--text-muted)' }}>سيتم استيرادها</p>\n                      <p className=\"text-xl font-extrabold m-0 tabular-nums\" style={{ color: 'var(--success)' }} dir=\"ltr\">{importPreview.unique}</p>\n                    </div>\n                    <div className=\"rounded-xl p-3 border\" style={{ borderColor: 'var(--border-card)', background: 'var(--bg)' }}>\n                      <p className=\"text-xs font-bold m-0 mb-1\" style={{ color: 'var(--text-muted)' }}>تكرارات (مرفوضة)</p>\n                      <p className=\"text-xl font-extrabold m-0 tabular-nums text-red-600\" dir=\"ltr\">{importPreview.duplicates}</p>\n                    </div>\n                  </div>\n                </div>\n\n                {importPreview.merchants.length > 0 && (\n                  <div className=\"rounded-xl overflow-hidden border-2 mb-6 max-h-[300px] overflow-y-auto\" style={{ borderColor: 'var(--border-card)' }}>\n                    <table className=\"ds-table w-full border-collapse text-sm\">\n                      <thead>\n                        <tr className=\"table-header-dark\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                          <th className=\"text-end py-3 px-4 font-bold text-white\">Merchant ID</th>\n                          <th className=\"text-end py-3 px-4 font-bold text-white\">المحافظة</th>\n                          <th className=\"text-end py-3 px-4 font-bold text-white\">الوزارة</th>\n                          <th className=\"text-end py-3 px-4 font-bold text-white\">اسم المديرية</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {importPreview.merchants.slice(0, 10).map((merchant, idx) => {\n                          const merchantIdHeader = importPreview.headers.find(h => h && (h.toLowerCase().includes('merchant') && h.toLowerCase().includes('id'))) || 'Merchant ID';\n                          const merchantId = merchant[merchantIdHeader] || merchant['Merchant ID'] || merchant['merchant_id'];\n                          return (\n                            <tr key={idx} className={idx % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'} style={{ borderBottom: '1px solid var(--border)' }}>\n                              <td className=\"py-2 px-4\" style={{ color: 'var(--text)' }}>{merchantId}</td>\n                              <td className=\"py-2 px-4\" style={{ color: 'var(--text)' }}>{merchant['المحافظة'] || merchant['governorate'] || '-'}</td>\n                              <td className=\"py-2 px-4\" style={{ color: 'var(--text)' }}>{merchant['الوزارة'] || merchant['ministry'] || '-'}</td>\n                              <td className=\"py-2 px-4\" style={{ color: 'var(--text)' }}>{merchant['اسم المديرية'] || merchant['directorate_name'] || '-'}</td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </table>\n                    {importPreview.merchants.length > 10 && (\n                      <div className=\"py-2 text-center text-sm\" style={{ color: 'var(--text-muted)' }}>... و {importPreview.merchants.length - 10} صف إضافي</div>\n                    )}\n                  </div>\n                )}\n              </>\n            )}\n\n            <div className=\"flex gap-3 justify-end mt-6\">\n              <button\n                type=\"button\"\n                onClick={() => { setShowImportModal(false); setImportPreview(null); if (fileInputRef.current) fileInputRef.current.value = ''; }}\n                disabled={importing}\n                className=\"ds-btn ds-btn-outline px-4 py-2.5 rounded-xl disabled:opacity-50\"\n              >\n                {importPreview ? 'إلغاء' : 'إغلاق'}\n              </button>\n              {importPreview && (\n                <>\n                  <button type=\"button\" onClick={() => { setImportPreview(null); if (fileInputRef.current) fileInputRef.current.value = ''; }} disabled={importing} className=\"ds-btn ds-btn-outline px-4 py-2.5 rounded-xl disabled:opacity-50\">رفع ملف آخر</button>\n                  <button type=\"button\" onClick={handleImport} disabled={importing} className=\"ds-btn ds-btn-primary px-4 py-2.5 rounded-xl disabled:opacity-50\">{importing ? 'جاري الاستيراد...' : `استيراد ${importPreview.unique} تاجر`}</button>\n                </>\n              )}\n            </div>\n            </div>\n          </div>\n        </div>\n      )}\n      </div>\n    </div>\n  );\n};\n\nexport default Merchants;\n","import axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL ||\n  (process.env.NODE_ENV === 'development' ? '/api' : 'http://localhost:5000/api');\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// إضافة التوكن تلقائياً؛ عدم فرض JSON عند إرسال FormData (مرفقات)\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) config.headers.Authorization = `Bearer ${token}`;\n    if (config.data instanceof FormData) delete config.headers['Content-Type'];\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// معالجة الأخطاء\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401 && !error.config?.url?.includes('/auth/login')) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"names":["useHasPermission","pageKey","actionKey","user","useAuthStore","s","hasPermission","permissions","role","Loading","_ref","message","_jsxs","className","children","_jsx","FILTER_CONDITIONS","value","label","ExcelColumnFilter","columnKey","columnLabel","options","onChange","sortDirection","onSortChange","trigger","open","setOpen","React","search","setSearch","condition","setCondition","autoApply","setAutoApply","draft","setDraft","containerRef","selectAllRef","selectedSet","split","map","x","trim","filter","Boolean","Set","filteredOptions","list","q","toLowerCase","opt","v","includes","startsWith","selectAllChecked","length","every","has","selectAllIndeterminate","some","current","indeterminate","ref","cn","onClick","_Fragment","style","left","top","type","ArrowDownAZ","ArrowUpAZ","Search","placeholder","e","target","c","checked","toggleSelectAll","next","forEach","o","delete","newVal","join","add","toggleOption","handleApply","background","handleClear","ColHeader","ChevronDown","strokeWidth","FilterTrigger","_ref2","count","hasFilter","concat","Filter","Merchants","_filterOptions$govern","_filterOptions$minist","_filterOptions$bankCo","merchants","setMerchants","useState","loading","setLoading","pagination","setPagination","page","limit","total","totalPages","filters","setFilters","governorate","ministry","bank_code","commission_type","columnFilters","setColumnFilters","merchant_id","directorate_name","settlement_name","device_count","iban","account_number","branch_name","sortState","setSortState","column","direction","filterOptions","setFilterOptions","governorates","ministries","bankCodes","merchantIds","directorates","settlements","deviceCounts","ibans","accountNumbers","branches","toast","useToast","canCreate","canImport","canExport","showModal","setShowModal","showImportModal","setShowImportModal","editingMerchant","setEditingMerchant","importing","setImporting","importPreview","setImportPreview","fileInputRef","useRef","formData","setFormData","details","account_key","branch_number","bank_name","bank_name_alt","iban_length_check","notes","useEffect","fetchMerchants","fetchFilterOptions","async","_response$data","_response$data2","apiParams","_objectSpread","Object","fromEntries","entries","_ref3","_","params","URLSearchParams","_ref4","response","api","get","data","error","_error$response","_error$response$data","console","title","description","variant","resetForm","handleFilterChange","key","prev","handleColumnFilterChange","_split$","first","_split$2","handleSortChange","filteredMerchants","useMemo","applyCol","getVal","filterVal","arr","toSet","m","String","dir","sort","a","b","_a$key","_b$key","va","vb","localeCompare","stats","govCount","privateCount","uniqueGovernorates","size","hasActiveFilters","values","padding","width","maxWidth","color","boxShadow","_response$data3","_ref5","allMerchants","toString","govMerchants","privateMerchants","mapExport","workbook","XLSX","book_new","allSheet","json_to_sheet","book_append_sheet","govSheet","privateSheet","today","Date","toISOString","slice","gridTemplateColumns","Icon","Users","bg","border","iconBg","textColor","Building2","Store","MapPin","item","i","borderColor","disabled","g","Landmark","Briefcase","isolation","minWidth","p","_split$3","d","colSpan","merchant","idx","isGov","borderBottom","undefined","handleEdit","window","confirm","id","_error$response3","_error$response3$data","handleDelete","X","onSubmit","preventDefault","put","post","_error$response2","_error$response2$data","required","rows","min","parseInt","FileText","unique","duplicates","merchantId","headers","find","h","accept","file","files","fileExtension","name","pop","reader","FileReader","onload","event","Uint8Array","result","firstSheetName","SheetNames","worksheet","Sheets","jsonData","sheet_to_json","header","defval","merchantIdIndex","findIndex","row","index","_rowNumber","indexOf","uniqueDuplicates","seenIds","uniqueMerchants","readAsText","readAsArrayBuffer","merchantsToImport","rejectDuplicates","errors","duplicateErrors","otherErrors","imported","_error$response4","_error$response4$data","API_URL","process","REACT_APP_API_URL","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","Authorization","FormData","Promise","reject","_error$config","_error$config$url","status","url","removeItem","location","href"],"ignoreList":[],"sourceRoot":""}
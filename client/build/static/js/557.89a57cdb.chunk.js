/*! For license information please see 557.89a57cdb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksttlment_client=self.webpackChunksttlment_client||[]).push([[557],{35087(e,r,t){t.d(r,{A:()=>a});const a=(0,t(21639).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},49954(e,r,t){t.d(r,{p:()=>c});var a=t(22555),s=t(53986),l=t(65043),o=t(15074),i=t(70579);const n=["className","type","style","onFocus","onBlur"],c=l.forwardRef((e,r)=>{let{className:t,type:l,style:c,onFocus:d,onBlur:u}=e,x=(0,s.A)(e,n);return(0,i.jsx)("input",(0,a.A)({type:l,className:(0,o.cn)("flex h-10 w-full rounded-xl border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all",t),style:(0,a.A)({borderColor:"rgba(6, 130, 148, 0.25)",background:"#ffffff",color:"#2A6E85",fontWeight:500},c||{}),onFocus:e=>{e.target.style.borderColor="#068294",e.target.style.boxShadow="0 0 0 2px rgba(6, 130, 148, 0.15)",null===d||void 0===d||d(e)},onBlur:e=>{e.target.style.borderColor="rgba(6, 130, 148, 0.25)",e.target.style.boxShadow="none",null===u||void 0===u||u(e)},ref:r},x))});c.displayName="Input"},50797(e,r,t){t.d(r,{A:()=>a});const a=(0,t(21639).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},65727(e,r,t){t.d(r,{A:()=>a});const a=(0,t(21639).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},85557(e,r,t){t.d(r,{ChangePasswordV2:()=>g});var a=t(22555),s=t(65043),l=t(73375),o=t(69772),i=t(49954),n=t(51704),c=t(2240),d=t(6931),u=t(19162),x=t(14459);const v=(0,t(21639).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var m=t(50797),h=t(40614),p=t(65727),y=t(94651),f=t(35087),b=t(6171),w=t(70579);function g(){const{toast:e}=(0,n.dj)(),{user:r,updateUser:t}=(0,c.n)(),[g,j]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[N,A]=(0,s.useState)({current:!1,new:!1,confirm:!1}),[k,P]=(0,s.useState)(!1),[C,z]=(0,s.useState)(!1),S=(0,s.useRef)(null),{data:M,refetch:q}=(0,d.I)({queryKey:["current-user"],queryFn:async()=>(await u.A.get("/auth/verify")).data.user,enabled:!!r}),B=(null===M||void 0===M?void 0:M.avatarUrl)||(null===r||void 0===r?void 0:r.avatarUrl),E=B?"".concat(window.location.origin).concat(B):null;return(0,w.jsx)("div",{className:"min-h-screen p-6 md:p-8",dir:"rtl",style:{background:"linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%)"},children:(0,w.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,w.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"page-header-teal rounded-xl p-6 mb-6",style:{background:"linear-gradient(135deg, #026174 0%, #068294 100%)",color:"#fff",boxShadow:"0 10px 30px rgba(2, 97, 116, 0.35)"},children:(0,w.jsxs)("div",{className:"flex items-center gap-4",children:[(0,w.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},children:(0,w.jsx)(x.A,{className:"w-7 h-7 text-white"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-2xl font-bold m-0 text-white",children:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,w.jsx)("p",{className:"text-sm opacity-95 mt-1 m-0 text-white",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0648\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})]})]})}),(0,w.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"rounded-2xl p-6 border-2",style:{background:"var(--surface)",borderColor:"var(--border-card)",boxShadow:"var(--shadow-card)"},children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,w.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(2, 97, 116, 0.1)"},children:(0,w.jsx)(v,{className:"w-5 h-5",style:{color:"var(--primary-600)"}})}),(0,w.jsx)("h2",{className:"text-base font-bold m-0",style:{color:"var(--text-strong)"},children:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-6",children:[(0,w.jsx)(b.e,{src:E,alt:(null===r||void 0===r?void 0:r.name)||"",size:"xl"}),(0,w.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:async r=>{var a;const s=null===(a=r.target.files)||void 0===a?void 0:a[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return e({title:"\u062e\u0637\u0623",description:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0644\u0641 \u063a\u064a\u0631 \u0645\u062f\u0639\u0648\u0645. \u064a\u064f\u0633\u0645\u062d \u0641\u0642\u0637 \u0628\u0645\u0644\u0641\u0627\u062a \u0627\u0644\u0635\u0648\u0631 (JPEG, PNG, GIF, WEBP)",variant:"destructive"}),void(S.current&&(S.current.value=""));if(s.size>5242880)return e({title:"\u062e\u0637\u0623",description:"\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0643\u0628\u064a\u0631 \u062c\u062f\u0627\u064b. \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0647\u0648 5MB",variant:"destructive"}),void(S.current&&(S.current.value=""));z(!0);const l=new FormData;l.append("avatar",s);try{const r=await u.A.post("/users/avatar",l,{headers:{"Content-Type":"multipart/form-data"}});t({avatarUrl:r.data.avatar_url}),q(),e({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"})}catch(n){var o,i;e({title:"\u062e\u0637\u0623",description:(null===(o=n.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.error)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0631\u0641\u0639 \u0627\u0644\u0635\u0648\u0631\u0629",variant:"destructive"})}finally{z(!1),S.current&&(S.current.value="")}},disabled:C}),(0,w.jsxs)(o.$,{type:"button",variant:"outline",size:"sm",disabled:C,onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},className:"border-2 text-[var(--primary-600)] hover:bg-[#eef9fb] hover:border-[#026174]",style:{borderColor:"var(--primary-600)"},children:[(0,w.jsx)(m.A,{className:"h-4 w-4 ml-2"}),C?"\u062c\u0627\u0631\u064a \u0627\u0644\u0631\u0641\u0639...":"\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u062c\u062f\u064a\u062f\u0629"]})]}),B&&(0,w.jsxs)(o.$,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{await u.A.delete("/users/avatar"),t({avatarUrl:null}),q(),e({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"})}catch(s){var r,a;e({title:"\u062e\u0637\u0623",description:(null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.error)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629",variant:"destructive"})}},className:"text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400",children:[(0,w.jsx)(h.A,{className:"h-4 w-4 ml-2"}),"\u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629"]}),(0,w.jsx)("p",{className:"text-xs m-0",style:{color:"var(--text-muted)"},children:"\u064a\u064f\u0633\u0645\u062d \u0628\u0645\u0644\u0641\u0627\u062a \u0627\u0644\u0635\u0648\u0631 (JPEG, PNG, GIF, WEBP) \u0628\u062d\u062f \u0623\u0642\u0635\u0649 5MB"})]})]})]}),(0,w.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05},className:"rounded-2xl p-6 border-2",style:{background:"var(--surface)",borderColor:"var(--border-card)",boxShadow:"var(--shadow-card)"},children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,w.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(2, 97, 116, 0.1)"},children:(0,w.jsx)(p.A,{className:"w-5 h-5",style:{color:"var(--primary-600)"}})}),(0,w.jsx)("h2",{className:"text-base font-bold m-0",style:{color:"var(--text-strong)"},children:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})]}),(0,w.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),g.currentPassword&&g.newPassword&&g.confirmPassword)if(g.newPassword===g.confirmPassword)if(g.newPassword.length<6)e({title:"\u062e\u0637\u0623",description:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 6 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",variant:"destructive"});else{P(!0);try{await u.A.post("/auth/change-password",{currentPassword:g.currentPassword,newPassword:g.newPassword}),e({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0646\u062c\u0627\u062d"}),j({currentPassword:"",newPassword:"",confirmPassword:""})}catch(s){var t,a;e({title:"\u062e\u0637\u0623",description:(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"\u062d\u062f\u062b \u062e\u0637\u0623",variant:"destructive"})}finally{P(!1)}}else e({title:"\u062e\u0637\u0623",description:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0648\u062a\u0623\u0643\u064a\u062f\u0647\u0627 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u064a\u0646",variant:"destructive"});else e({title:"\u062e\u0637\u0623",description:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0645\u0637\u0644\u0648\u0628\u0629",variant:"destructive"})},className:"space-y-4",children:[(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("label",{className:"text-sm font-semibold block",style:{color:"var(--text-strong)"},children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a\u0629 *"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(i.p,{type:N.current?"text":"password",value:g.currentPassword,onChange:e=>j((0,a.A)((0,a.A)({},g),{},{currentPassword:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",required:!0,className:"border-2 border-[#b8dce2] focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 pr-10"}),(0,w.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 text-[var(--text-muted)] hover:text-[var(--text-strong)]",onClick:()=>A((0,a.A)((0,a.A)({},N),{},{current:!N.current})),children:N.current?(0,w.jsx)(y.A,{className:"h-4 w-4"}):(0,w.jsx)(f.A,{className:"h-4 w-4"})})]})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("label",{className:"text-sm font-semibold block",style:{color:"var(--text-strong)"},children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629 *"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(i.p,{type:N.new?"text":"password",value:g.newPassword,onChange:e=>j((0,a.A)((0,a.A)({},g),{},{newPassword:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629",required:!0,className:"border-2 border-[#b8dce2] focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 pr-10"}),(0,w.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 text-[var(--text-muted)] hover:text-[var(--text-strong)]",onClick:()=>A((0,a.A)((0,a.A)({},N),{},{new:!N.new})),children:N.new?(0,w.jsx)(y.A,{className:"h-4 w-4"}):(0,w.jsx)(f.A,{className:"h-4 w-4"})})]}),(0,w.jsx)("p",{className:"text-xs m-0",style:{color:"var(--text-muted)"},children:"\u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 6 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("label",{className:"text-sm font-semibold block",style:{color:"var(--text-strong)"},children:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629 *"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(i.p,{type:N.confirm?"text":"password",value:g.confirmPassword,onChange:e=>j((0,a.A)((0,a.A)({},g),{},{confirmPassword:e.target.value})),placeholder:"\u0623\u0639\u062f \u0625\u062f\u062e\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629",required:!0,className:"border-2 border-[#b8dce2] focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 pr-10"}),(0,w.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 text-[var(--text-muted)] hover:text-[var(--text-strong)]",onClick:()=>A((0,a.A)((0,a.A)({},N),{},{confirm:!N.confirm})),children:N.confirm?(0,w.jsx)(y.A,{className:"h-4 w-4"}):(0,w.jsx)(f.A,{className:"h-4 w-4"})})]})]}),(0,w.jsx)(o.$,{type:"submit",className:"w-full text-white border-0",style:{background:"linear-gradient(135deg, #026174 0%, #068294 100%)",boxShadow:"0 4px 12px rgba(2, 97, 116, 0.35)"},disabled:k,children:k?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u062f\u064a\u062b...":"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})]})]})]})})}},94651(e,r,t){t.d(r,{A:()=>a});const a=(0,t(21639).A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])}}]);
//# sourceMappingURL=557.89a57cdb.chunk.js.map
/*! For license information please see 636.8aabf450.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksttlment_client=self.webpackChunksttlment_client||[]).push([[636],{25851(e,t,s){s.d(t,{T:()=>n});var a=s(2240),i=s(52422);function n(e,t){const s=(0,a.n)(e=>e.user);return!!s&&(0,i._m)(s.permissions,s.role,e,t)}},46255(e,t,s){s.d(t,{RtgsSettings:()=>y});var a=s(22555),i=s(65043),n=s(6931),l=s(63248),r=s(47097),c=s(73375),o=s(92417),d=s(51704),m=s(19162),u=s(56790),h=s(87260),p=s(1457),x=s(87147),v=s(50516),f=s(88693),_=s(25851),b=s(70579);const g={amount:{msg_type_negative:"MSTPFRCB",tran_type_positive:774},fees:{min_amount:5e3,mcc_special:5542,mcc_special_date_from:"2026-01-01",mcc_special_rate:.005,mcc_special_max_fee:1e4,mcc_special_max_amount:1428571,mcc_5542_rate:.007,mcc_5542_max_fee:1e4,mcc_5542_max_amount:1428571,default_rate:.01,default_max_fee:1e4,default_max_amount:1e6,precision_decimals:6},acq:{pos_rate:.7,non_pos_rate:.65},match_tolerance:1e-4};function y(){const{toast:e}=(0,d.dj)(),t=(0,l.jE)(),s=(0,_.T)("rtgs_settings","edit"),[y,A]=(0,i.useState)(g),{data:j,isLoading:C}=(0,n.I)({queryKey:["rtgs-settings"],queryFn:async()=>(await m.A.get("/rtgs/settings")).data});(0,i.useEffect)(()=>{var e;j&&A({amount:(0,a.A)((0,a.A)({},g.amount),j.amount||{}),fees:(0,a.A)((0,a.A)({},g.fees),j.fees||{}),acq:(0,a.A)((0,a.A)({},g.acq),j.acq||{}),match_tolerance:null!==(e=j.match_tolerance)&&void 0!==e?e:g.match_tolerance})},[j]);const N=(0,r.n)({mutationFn:async e=>(await m.A.put("/rtgs/settings",e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["rtgs-settings"]}),e({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u062d\u0641\u0638 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u062d\u062a\u0633\u0627\u0628 RTGS \u0628\u0646\u062c\u0627\u062d"})},onError:t=>{var s,a;e({title:"\u062e\u0637\u0623",description:(null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"\u062d\u062f\u062b \u062e\u0637\u0623",variant:"destructive"})}}),w=(e,t,s)=>{A(i=>(0,a.A)((0,a.A)({},i),{},{[e]:(0,a.A)((0,a.A)({},i[e]),{},{[t]:s})}))};if(C)return(0,b.jsxs)("div",{className:"space-y-6 p-6",children:[(0,b.jsx)(o.E,{className:"h-10 w-64"}),(0,b.jsx)(o.E,{className:"h-96"})]});const k=e=>{let{icon:t,title:s,children:a}=e;return(0,b.jsxs)("div",{className:"rounded-xl p-5 border-2 mb-5",style:{borderColor:"var(--border-card)",background:"linear-gradient(180deg, #fafbfc 0%, #ffffff 100%)"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(2, 97, 116, 0.1)"},children:(0,b.jsx)(t,{className:"w-5 h-5",style:{color:"var(--primary-600)"}})}),(0,b.jsx)("h2",{className:"text-base font-bold m-0",style:{color:"var(--text-strong)"},children:s})]}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))"},children:a})]})},M=e=>{let{label:t,value:s,onChange:a,min:i,max:n,step:l,hint:r}=e;return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-1",style:{color:"var(--text-strong)"},children:t}),(0,b.jsx)("input",{type:"number",min:i,max:n,step:null!==l&&void 0!==l?l:1,value:s,onChange:e=>a(parseFloat(e.target.value)||0),className:"ds-input w-full py-2 px-3 rounded-lg border-2 focus:border-[#026174] focus:ring-2 focus:ring-[#026174]/20 text-sm",dir:"ltr"}),r&&(0,b.jsx)("p",{className:"text-xs mt-0.5 m-0",style:{color:"var(--text-muted)"},children:r})]})};return(0,b.jsx)("div",{className:"min-h-screen p-6 md:p-8",dir:"rtl",style:{background:"linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%)"},children:(0,b.jsxs)("div",{className:"mx-auto",style:{maxWidth:"900px"},children:[(0,b.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"page-header-teal rounded-xl p-6 mb-6",style:{background:"linear-gradient(135deg, #026174 0%, #068294 100%)",color:"#fff",boxShadow:"0 10px 30px rgba(2, 97, 116, 0.35)"},children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"rgba(255,255,255,0.2)"},children:(0,b.jsx)(p.A,{className:"w-7 h-7 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold m-0 text-white",children:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u062d\u062a\u0633\u0627\u0628 RTGS"}),(0,b.jsx)("p",{className:"text-sm opacity-95 mt-1 m-0 text-white",children:"\u0639\u0648\u0627\u0645\u0644 \u0627\u062d\u062a\u0633\u0627\u0628 \u0627\u0644\u0639\u0645\u0648\u0644\u0629 \u0648 ACQ \u2014 \u062a\u064f\u0633\u062a\u062e\u062f\u0645 \u0641\u064a \u0627\u0644\u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0648\u0627\u0644\u0639\u0631\u0636 \u0648\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"})]})]})}),(0,b.jsx)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"rounded-2xl p-6 border-2",style:{background:"var(--surface)",borderColor:"var(--border-card)",boxShadow:"var(--shadow-card)"},children:(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await N.mutateAsync(y)},className:"space-y-2",children:[(0,b.jsxs)(k,{icon:u.A,title:"\u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u0628\u0644\u063a (Amount)",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"MESSAGETYPE \u0644\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0633\u0627\u0644\u0628"}),(0,b.jsx)("input",{type:"text",value:y.amount.msg_type_negative,onChange:e=>w("amount","msg_type_negative",e.target.value),className:"ds-input w-full py-2 px-3 rounded-lg text-sm",dir:"ltr"}),(0,b.jsx)("p",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:"\u0625\u0630\u0627 \u0643\u0627\u0646 MESSAGETYPE \u0647\u0630\u0627 \u2192 amount = -TRANSACTIONAMOUNT"})]}),(0,b.jsx)(M,{label:"TRANTYPE \u0644\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0648\u062c\u0628",value:y.amount.tran_type_positive,onChange:e=>w("amount","tran_type_positive",e),hint:"\u0625\u0630\u0627 \u0643\u0627\u0646 TRANTYPE \u0647\u0630\u0627 \u2192 amount \u0645\u0648\u062c\u0628"})]}),(0,b.jsxs)(k,{icon:x.A,title:"\u0627\u0644\u0639\u0645\u0648\u0644\u0629 (Fees)",children:[(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0644\u0644\u0645\u0628\u0644\u063a (IQD)",value:y.fees.min_amount,onChange:e=>w("fees","min_amount",e),hint:"\u0623\u0642\u0644 \u0645\u0646 \u0647\u0630\u0627 \u2192 \u0627\u0644\u0639\u0645\u0648\u0644\u0629 = 0"}),(0,b.jsx)(M,{label:"MCC \u0627\u0644\u062e\u0627\u0635 (\u0645\u062b\u0644\u0627\u064b 5542)",value:y.fees.mcc_special,onChange:e=>w("fees","mcc_special",e)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e (MCC \u0627\u0644\u062e\u0627\u0635)"}),(0,b.jsx)("input",{type:"date",value:y.fees.mcc_special_date_from,onChange:e=>w("fees","mcc_special_date_from",e.target.value),className:"ds-input w-full py-2 px-3 rounded-lg text-sm",dir:"ltr"})]}),(0,b.jsx)(M,{label:"\u0646\u0633\u0628\u0629 MCC \u0627\u0644\u062e\u0627\u0635 \u0628\u0639\u062f \u0627\u0644\u062a\u0627\u0631\u064a\u062e",value:y.fees.mcc_special_rate,onChange:e=>w("fees","mcc_special_rate",e),step:.001,hint:"\u0645\u062b\u0644\u0627\u064b 0.005 = 0.5%"}),(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0639\u0645\u0648\u0644\u0629 (MCC \u062e\u0627\u0635)",value:y.fees.mcc_special_max_fee,onChange:e=>w("fees","mcc_special_max_fee",e)}),(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0645\u0628\u0644\u063a (MCC \u062e\u0627\u0635)",value:y.fees.mcc_special_max_amount,onChange:e=>w("fees","mcc_special_max_amount",e)}),(0,b.jsx)(M,{label:"\u0646\u0633\u0628\u0629 MCC 5542 \u0642\u0628\u0644 \u0627\u0644\u062a\u0627\u0631\u064a\u062e",value:y.fees.mcc_5542_rate,onChange:e=>w("fees","mcc_5542_rate",e),step:.001,hint:"\u0645\u062b\u0644\u0627\u064b 0.007 = 0.7%"}),(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0639\u0645\u0648\u0644\u0629 (MCC 5542)",value:y.fees.mcc_5542_max_fee,onChange:e=>w("fees","mcc_5542_max_fee",e)}),(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0645\u0628\u0644\u063a (MCC 5542)",value:y.fees.mcc_5542_max_amount,onChange:e=>w("fees","mcc_5542_max_amount",e)}),(0,b.jsx)(M,{label:"\u0627\u0644\u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a\u0629",value:y.fees.default_rate,onChange:e=>w("fees","default_rate",e),step:.001,hint:"\u0645\u062b\u0644\u0627\u064b 0.01 = 1%"}),(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0639\u0645\u0648\u0644\u0629 (\u0627\u0641\u062a\u0631\u0627\u0636\u064a)",value:y.fees.default_max_fee,onChange:e=>w("fees","default_max_fee",e)}),(0,b.jsx)(M,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0645\u0628\u0644\u063a (\u0627\u0641\u062a\u0631\u0627\u0636\u064a)",value:y.fees.default_max_amount,onChange:e=>w("fees","default_max_amount",e)}),(0,b.jsx)(M,{label:"\u0645\u0646\u0627\u0632\u0644 \u0639\u0634\u0631\u064a\u0629 \u0644\u0644\u062f\u0642\u0629",value:y.fees.precision_decimals,onChange:e=>w("fees","precision_decimals",e),min:2,max:8,hint:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u0627\u0632\u0644 \u0628\u0639\u062f \u0627\u0644\u0641\u0627\u0635\u0644\u0629"})]}),(0,b.jsxs)(k,{icon:h.A,title:"\u0639\u0645\u0648\u0644\u0629 \u0627\u0644\u0645\u062d\u0635\u0644 (ACQ)",children:[(0,b.jsx)(M,{label:"\u0646\u0633\u0628\u0629 POS",value:y.acq.pos_rate,onChange:e=>w("acq","pos_rate",e),min:0,max:1,step:.01,hint:"\u0645\u062b\u0644\u0627\u064b 0.7 = 70%"}),(0,b.jsx)(M,{label:"\u0646\u0633\u0628\u0629 \u063a\u064a\u0631 POS",value:y.acq.non_pos_rate,onChange:e=>w("acq","non_pos_rate",e),min:0,max:1,step:.01,hint:"\u0645\u062b\u0644\u0627\u064b 0.65 = 65%"})]}),(0,b.jsx)(k,{icon:p.A,title:"\u0645\u0637\u0627\u0628\u0642\u0629 CT",children:(0,b.jsx)(M,{label:"\u0647\u0627\u0645\u0634 \u0627\u0644\u062a\u0637\u0627\u0628\u0642",value:y.match_tolerance,onChange:e=>A(t=>(0,a.A)((0,a.A)({},t),{},{match_tolerance:e})),step:1e-4,hint:"\u0625\u0630\u0627 \u0627\u0644\u0641\u0631\u0642 \u0623\u0642\u0644 \u0645\u0646 \u0647\u0630\u0627 \u2192 \u0645\u0637\u0627\u0628\u0642"})}),(0,b.jsxs)("div",{className:"flex gap-3 flex-wrap pt-4 border-t-2",style:{borderColor:"var(--border-card)"},children:[s&&(0,b.jsx)("button",{type:"submit",disabled:N.isPending,className:"ds-btn ds-btn-primary px-6 py-2.5 rounded-xl font-semibold shadow-lg flex items-center gap-2",style:{background:"linear-gradient(135deg, #026174 0%, #068294 100%)"},children:N.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.A,{className:"h-4 w-4 animate-spin"}),"\u062c\u0627\u0631\u064a \u0627\u0644\u062d\u0641\u0638..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.A,{className:"h-4 w-4"}),"\u062d\u0641\u0638"]})}),(0,b.jsxs)("a",{href:"/rtgs",className:"ds-btn ds-btn-outline px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2",children:[(0,b.jsx)(p.A,{className:"h-4 w-4"}),"\u0635\u0641\u062d\u0629 RTGS"]})]})]})})]})})}},47097(e,t,s){s.d(t,{n:()=>j});var a,i,n,l,r,c=s(22555),o=s(65043),d=s(39790),m=s(55149),u=s(38458),h=s(26562),p=s(24558),x=s(25239),v=s(11454),f=s(60329),_=s(99723),b=(a=new WeakMap,i=new WeakMap,n=new WeakMap,l=new WeakMap,r=new WeakSet,class extends f.Q{constructor(e,t){super(),(0,d.A)(this,r),(0,m.A)(this,a,void 0),(0,m.A)(this,i,void 0),(0,m.A)(this,n,void 0),(0,m.A)(this,l,void 0),(0,p.A)(a,this,e),this.setOptions(t),this.bindMethods(),(0,h.A)(r,this,g).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=(0,u.A)(a,this).defaultMutationOptions(e),(0,_.f8)(this.options,s)||(0,u.A)(a,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,u.A)(n,this),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&(0,_.EN)(s.mutationKey)!==(0,_.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(t=(0,u.A)(n,this))||void 0===t?void 0:t.state.status)&&(0,u.A)(n,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,u.A)(n,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,h.A)(r,this,g).call(this),(0,h.A)(r,this,y).call(this,e)}getCurrentResult(){return(0,u.A)(i,this)}reset(){var e;null===(e=(0,u.A)(n,this))||void 0===e||e.removeObserver(this),(0,p.A)(n,this,void 0),(0,h.A)(r,this,g).call(this),(0,h.A)(r,this,y).call(this)}mutate(e,t){var s;return(0,p.A)(l,this,t),null===(s=(0,u.A)(n,this))||void 0===s||s.removeObserver(this),(0,p.A)(n,this,(0,u.A)(a,this).getMutationCache().build((0,u.A)(a,this),this.options)),(0,u.A)(n,this).addObserver(this),(0,u.A)(n,this).execute(e)}});function g(){var e,t;const s=null!==(e=null===(t=(0,u.A)(n,this))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,x.$)();(0,p.A)(i,this,(0,c.A)((0,c.A)({},s),{},{isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset}))}function y(e){v.jG.batch(()=>{if((0,u.A)(l,this)&&this.hasListeners()){const p=(0,u.A)(i,this).variables,x=(0,u.A)(i,this).context,v={client:(0,u.A)(a,this),meta:this.options.meta,mutationKey:this.options.mutationKey};if("success"===(null===e||void 0===e?void 0:e.type)){try{var t,s;null===(t=(s=(0,u.A)(l,this)).onSuccess)||void 0===t||t.call(s,e.data,p,x,v)}catch(h){Promise.reject(h)}try{var n,r;null===(n=(r=(0,u.A)(l,this)).onSettled)||void 0===n||n.call(r,e.data,null,p,x,v)}catch(h){Promise.reject(h)}}else if("error"===(null===e||void 0===e?void 0:e.type)){try{var c,o;null===(c=(o=(0,u.A)(l,this)).onError)||void 0===c||c.call(o,e.error,p,x,v)}catch(h){Promise.reject(h)}try{var d,m;null===(d=(m=(0,u.A)(l,this)).onSettled)||void 0===d||d.call(m,void 0,e.error,p,x,v)}catch(h){Promise.reject(h)}}}this.listeners.forEach(e=>{e((0,u.A)(i,this))})})}var A=s(63248);function j(e,t){const s=(0,A.jE)(t),[a]=o.useState(()=>new b(s,e));o.useEffect(()=>{a.setOptions(e)},[a,e]);const i=o.useSyncExternalStore(o.useCallback(e=>a.subscribe(v.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),n=o.useCallback((e,t)=>{a.mutate(e,t).catch(_.lQ)},[a]);if(i.error&&(0,_.GU)(a.options.throwOnError,[i.error]))throw i.error;return(0,c.A)((0,c.A)({},i),{},{mutate:n,mutateAsync:i.mutate})}},50516(e,t,s){s.d(t,{A:()=>a});const a=(0,s(21639).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},87147(e,t,s){s.d(t,{A:()=>a});const a=(0,s(21639).A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},88693(e,t,s){s.d(t,{A:()=>a});const a=(0,s(21639).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},92417(e,t,s){s.d(t,{E:()=>c});var a=s(22555),i=s(53986),n=s(15074),l=s(70579);const r=["className"];function c(e){let{className:t}=e,s=(0,i.A)(e,r);return(0,l.jsx)("div",(0,a.A)({className:(0,n.cn)("animate-pulse rounded-md bg-muted",t)},s))}}}]);
//# sourceMappingURL=636.8aabf450.chunk.js.map
{"version":3,"file":"static/js/651.e6a42ef6.chunk.js","mappings":"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","sources":["hooks/useHasPermission.ts","components/ui/dialog.tsx","components/Loading.js","pages/admin/CtMatching.tsx"],"sourcesContent":["import { useAuthStore } from '@/store/useAuthStore';\nimport { hasPermission } from '@/lib/permissions';\n\n/**\n * التحقق من صلاحية المستخدم لصفحة + إجراء\n * admin يملك كل الصلاحيات تلقائياً\n */\nexport function useHasPermission(pageKey: string, actionKey: string): boolean {\n  const user = useAuthStore((s) => s.user);\n  if (!user) return false;\n  return hasPermission(user.permissions, user.role, pageKey, actionKey);\n}\n\n/**\n * التحقق من صلاحية عرض صفحة (view)\n */\nexport function useCanViewPage(pageKey: string): boolean {\n  return useHasPermission(pageKey, 'view');\n}\n","import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\nconst DialogTrigger = DialogPrimitive.Trigger\nconst DialogPortal = DialogPrimitive.Portal\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    style={{\n      background: 'rgba(42, 110, 133, 0.2)',\n      ...(props.style || {})\n    }}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, style, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-5 border-2 p-6 shadow-2xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-2xl\",\n        className\n      )}\n      style={{\n        background: '#ffffff',\n        borderColor: 'rgba(6, 130, 148, 0.25)',\n        boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(6, 130, 148, 0.08)',\n        ...(style || {})\n      }}\n      aria-describedby={undefined}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close \n        className=\"absolute right-4 top-4 rounded-xl p-1.5 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-white focus:outline-none focus:ring-2 focus:ring-[#068294] focus:ring-offset-2 disabled:pointer-events-none\" \n        style={{ color: '#2A6E85' }}\n      >\n        <X className=\"h-5 w-5\" />\n        <span className=\"sr-only\">إغلاق</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-right\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-bold leading-none tracking-tight\",\n      className\n    )}\n    style={{ color: '#2A6E85', fontWeight: 700, ...(props.style || {}) }}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import React from 'react';\n\nexport default function Loading({ message = 'جاري التحميل...' }) {\n  return (\n    <div className=\"loading-wrapper\">\n      <div className=\"loading-spinner\" />\n      <p className=\"loading-message\">{message}</p>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useHasPermission } from '@/hooks/useHasPermission';\nimport { Link } from 'react-router-dom';\nimport { toPng } from 'html-to-image';\nimport api from '@/lib/api';\nimport { useToast } from '@/hooks/use-toast';\nimport Loading from '@/components/Loading';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Calendar,\n  FileCheck,\n  Plus,\n  Printer,\n  CheckCircle2,\n  XCircle,\n  Edit,\n  Trash2,\n  X,\n  Filter,\n  Hash,\n  ArrowRight,\n  LayoutGrid,\n  Table2,\n  Eye,\n  Download,\n} from 'lucide-react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LabelList } from 'recharts';\n\ninterface AcqFeesSummary {\n  sttl_date_from: string;\n  sttl_date_to: string;\n  total_movements: number;\n  sum_fees: number;\n  sum_acq: number;\n  sum_acq_plus_fees: number;\n}\n\ninterface CtRecord {\n  id: number;\n  sttl_date_from: string;\n  sttl_date_to: string;\n  ct_value: number;\n  sum_acq: number;\n  sum_fees: number;\n  ct_received_date: string | null;\n  match_status: 'matched' | 'not_matched';\n  user_name: string | null;\n  notes: string | null;\n  created_at: string;\n}\n\ninterface ByDirectorateGovernorate {\n  governorate: string;\n  directorate_name: string;\n  movement_count: number;\n  sum_amount: number;\n  sum_fees: number;\n  sum_acq: number;\n}\n\ninterface CtMatchingReportData {\n  period: { sttl_date_from: string; sttl_date_to: string };\n  summary: { total_movements: number; total_amount: number; sum_fees: number; sum_acq: number };\n  by_bank: Array<{ bank_name: string; movement_count: number; sum_amount: number; sum_fees: number; sum_acq: number }>;\n  by_day: Array<{ sttl_date: string; movement_count: number; sum_amount: number; sum_fees: number; sum_acq: number }>;\n  by_directorate_governorate?: ByDirectorateGovernorate[];\n  ct_records: Array<{\n    id: number;\n    sttl_date_from: string;\n    sttl_date_to: string;\n    ct_value: number;\n    sum_acq: number;\n    sum_fees: number;\n    ct_received_date: string | null;\n    user_name: string | null;\n    created_at: string;\n    match_status: string;\n  }>;\n}\n\n/** عرض التاريخ بصيغة YYYY/MM/DD فقط — دون تحويل للتوقيت المحلي لتفادي ظهور يوم خاطئ (مثلاً 9 بدل 10). */\nconst formatDate = (d: string | Date | null) => {\n  if (d == null) return '—';\n  let s: string;\n  if (typeof d === 'string') s = d.slice(0, 10);\n  else if (d instanceof Date && !isNaN(d.getTime())) s = d.toISOString().slice(0, 10);\n  else s = '';\n  if (!s || s.length < 10) return '—';\n  return s.replace(/-/g, '/');\n};\n\n/** عرض الأرقام مع دقة كافية للعمولة — 6 منازل عشرية لضمان التطابق */\nconst formatNum = (n: number | null) => {\n  if (n == null) return '—';\n  return Number(n).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 6 });\n};\n\n/** صنف موحد لحقل التاريخ — متناسق مع التصميم */\nconst dateInputClass = 'ds-input w-full py-2.5 pl-4 pr-11 [&::-webkit-calendar-picker-indicator]:opacity-0 [&::-webkit-calendar-picker-indicator]:absolute [&::-webkit-calendar-picker-indicator]:inset-0 [&::-webkit-calendar-picker-indicator]:w-full [&::-webkit-calendar-picker-indicator]:cursor-pointer';\nconst dateInputWrapperClass = 'relative flex items-center rounded-xl overflow-hidden border border-slate-200 focus-within:border-[var(--primary-600)] focus-within:ring-2 focus-within:ring-[var(--primary-600)]/20 focus-within:outline-none transition-all';\n\nexport function CtMatching() {\n  const [sttlDateFrom, setSttlDateFrom] = useState('');\n  const [sttlDateTo, setSttlDateTo] = useState('');\n  const [ctValue, setCtValue] = useState('');\n  const [ctReceivedDate, setCtReceivedDate] = useState('');\n  const [notes, setNotes] = useState('');\n  const [summary, setSummary] = useState<AcqFeesSummary | null>(null);\n  const [summaryLoading, setSummaryLoading] = useState(false);\n  const [records, setRecords] = useState<CtRecord[]>([]);\n  const [recordsLoading, setRecordsLoading] = useState(true);\n  const [filterDateFrom, setFilterDateFrom] = useState('');\n  const [filterDateTo, setFilterDateTo] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [editingRecord, setEditingRecord] = useState<CtRecord | null>(null);\n  const [editForm, setEditForm] = useState({\n    sttl_date_from: '',\n    sttl_date_to: '',\n    ct_value: '',\n    ct_received_date: '',\n    notes: '',\n  });\n  const [updateSubmitting, setUpdateSubmitting] = useState(false);\n  const [deletingId, setDeletingId] = useState<number | null>(null);\n  const [reportOpen, setReportOpen] = useState(false);\n  const [reportData, setReportData] = useState<CtMatchingReportData | null>(null);\n  const [reportLoading, setReportLoading] = useState(false);\n  const [viewMode, setViewMode] = useState<'cards' | 'table'>('cards');\n  const [detailRecord, setDetailRecord] = useState<CtRecord | null>(null);\n  const [detailViewMode, setDetailViewMode] = useState<'table' | 'cards'>('table');\n  const [downloadingImage, setDownloadingImage] = useState(false);\n  const reportContentRef = useRef<HTMLDivElement>(null);\n  const detailContentRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n  const canCreateCt = useHasPermission('ct_matching', 'create_ct');\n  const canEditCt = useHasPermission('ct_matching', 'edit_ct');\n  const canDeleteCt = useHasPermission('ct_matching', 'delete_ct');\n\n  const fetchSummary = async () => {\n    if (!sttlDateFrom || !sttlDateTo) {\n      setSummary(null);\n      return;\n    }\n    try {\n      setSummaryLoading(true);\n      const params = new URLSearchParams({ sttl_date_from: sttlDateFrom, sttl_date_to: sttlDateTo });\n      const res = await api.get(`/rtgs/acq-fees-summary?${params.toString()}`);\n      setSummary(res.data);\n    } catch {\n      setSummary(null);\n    } finally {\n      setSummaryLoading(false);\n    }\n  };\n\n  const fetchRecords = async () => {\n    try {\n      setRecordsLoading(true);\n      const params = new URLSearchParams({ limit: '100' });\n      if (filterDateFrom && filterDateTo) {\n        params.set('date_from', filterDateFrom.slice(0, 10));\n        params.set('date_to', filterDateTo.slice(0, 10));\n      }\n      const res = await api.get(`/rtgs/ct-records?${params.toString()}`);\n      setRecords(res.data?.data ?? []);\n    } catch {\n      setRecords([]);\n    } finally {\n      setRecordsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchRecords();\n  }, [filterDateFrom, filterDateTo]);\n\n  useEffect(() => {\n    if (sttlDateFrom && sttlDateTo) fetchSummary();\n    else setSummary(null);\n  }, [sttlDateFrom, sttlDateTo]);\n\n  const handleInsertCt = async () => {\n    if (!sttlDateFrom || !sttlDateTo || !ctReceivedDate || ctValue === '') {\n      toast({ title: 'تنبيه', description: 'مطلوب: من تاريخ التسوية، إلى تاريخ التسوية، تاريخ استلام CT من البنك المركزي، وقيمة CT', variant: 'destructive' });\n      return;\n    }\n    const num = parseFloat(String(ctValue).replace(/,/g, ''));\n    if (isNaN(num)) {\n      toast({ title: 'تنبيه', description: 'قيمة CT يجب أن تكون رقماً', variant: 'destructive' });\n      return;\n    }\n    try {\n      setSubmitting(true);\n      await api.post('/rtgs/ct-records', {\n        sttl_date_from: sttlDateFrom,\n        sttl_date_to: sttlDateTo,\n        ct_value: num,\n        ct_received_date: ctReceivedDate,\n        notes: notes || undefined,\n      });\n      toast({ title: 'تم', description: 'تم إدراج سجل CT للمطابقة بنجاح' });\n      setCtValue('');\n      setCtReceivedDate('');\n      setNotes('');\n      fetchSummary();\n      fetchRecords();\n    } catch (e: unknown) {\n      const err = e as { response?: { data?: { error?: string } } };\n      toast({ title: 'خطأ', description: err.response?.data?.error ?? 'فشل إدراج سجل CT', variant: 'destructive' });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handlePrintReport = () => {\n    if (!filterDateFrom || !filterDateTo) {\n      toast({ title: 'تنبيه', description: 'اختر من تاريخ وإلى تاريخ (فلتر الفترة) لطباعة تقرير المطابقة الشامل', variant: 'destructive' });\n      return;\n    }\n    setReportOpen(true);\n    setReportData(null);\n    setReportLoading(true);\n    const params = new URLSearchParams({ date_from: filterDateFrom.slice(0, 10), date_to: filterDateTo.slice(0, 10) });\n    api.get(`/rtgs/ct-matching-report?${params.toString()}`)\n      .then((res) => {\n        setReportData(res.data);\n      })\n      .catch(() => {\n        toast({ title: 'خطأ', description: 'فشل جلب بيانات التقرير', variant: 'destructive' });\n        setReportOpen(false);\n      })\n      .finally(() => setReportLoading(false));\n  };\n\n  const closeReport = () => {\n    setReportOpen(false);\n    setReportData(null);\n  };\n\n  useEffect(() => {\n    if (reportOpen) {\n      document.body.classList.add('ct-report-open');\n      const prevTitle = document.title;\n      document.title = ' ';\n      return () => {\n        document.body.classList.remove('ct-report-open');\n        document.title = prevTitle;\n      };\n    } else {\n      document.body.classList.remove('ct-report-open');\n    }\n  }, [reportOpen]);\n\n  const printReportWindow = () => {\n    const el = reportContentRef.current ?? document.querySelector<HTMLDivElement>('#ct-matching-report-print .ct-report-content');\n    if (!el) {\n      window.print();\n      return;\n    }\n    const origin = window.location.origin;\n    let html = el.innerHTML.trim();\n    if (!html || html.length < 100) {\n      window.print();\n      return;\n    }\n    html = html.replace(/src=\"\\//g, `src=\"${origin}/`);\n    const printWin = window.open('', '_blank', 'noopener,noreferrer');\n    if (!printWin) {\n      window.print();\n      return;\n    }\n    const styles = `\n      @page { size: A4; margin: 15mm 0; }\n      *, *::before, *::after { box-sizing: border-box; }\n      body { margin: 0; padding: 16px 0; font-family: 'Cairo', 'Segoe UI', sans-serif; direction: rtl; font-size: 14px; color: #0f172a; background: #fff; line-height: 1.5; -webkit-print-color-adjust: exact; print-color-adjust: exact; }\n      .ct-report-content { max-width: 100%; padding: 0; margin: 0; }\n      article { padding: 0; margin: 0; overflow: visible; }\n      .report-print-header { background: linear-gradient(135deg, #026174 0%, #068294 100%) !important; padding: 20px 24px; margin-bottom: 24px; border-radius: 12px; }\n      .report-print-header h1, .report-print-header p, .report-print-header span { color: #ffffff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }\n      .report-print-period { background: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.4); padding: 12px 20px; font-weight: 600; color: #ffffff !important; font-size: 0.9rem; border-radius: 6px; margin-top: 12px; }\n      section { margin-bottom: 28px; page-break-inside: avoid; overflow: visible; }\n      section h2 { page-break-after: avoid; }\n      section div { overflow: visible; border-radius: 0; }\n      section h2 { font-size: 1rem; font-weight: 700; color: #0f172a; margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #026174; }\n      table { width: 100%; border-collapse: collapse; direction: rtl; table-layout: fixed; font-size: 0.8rem; page-break-inside: auto; }\n      th, td { min-width: 0; box-sizing: border-box; }\n      table.print-cols-5 th:nth-child(1), table.print-cols-5 td:nth-child(1) { width: 20%; }\n      table.print-cols-5 th:nth-child(2), table.print-cols-5 td:nth-child(2) { width: 20%; }\n      table.print-cols-5 th:nth-child(3), table.print-cols-5 td:nth-child(3) { width: 20%; }\n      table.print-cols-5 th:nth-child(4), table.print-cols-5 td:nth-child(4) { width: 20%; }\n      table.print-cols-5 th:nth-child(5), table.print-cols-5 td:nth-child(5) { width: 20%; }\n      table.print-cols-7 th:nth-child(1), table.print-cols-7 td:nth-child(1) { width: 14.29%; }\n      table.print-cols-7 th:nth-child(2), table.print-cols-7 td:nth-child(2) { width: 14.29%; }\n      table.print-cols-7 th:nth-child(3), table.print-cols-7 td:nth-child(3) { width: 14.29%; }\n      table.print-cols-7 th:nth-child(4), table.print-cols-7 td:nth-child(4) { width: 14.29%; }\n      table.print-cols-7 th:nth-child(5), table.print-cols-7 td:nth-child(5) { width: 14.29%; }\n      table.print-cols-7 th:nth-child(6), table.print-cols-7 td:nth-child(6) { width: 14.29%; }\n      table.print-cols-7 th:nth-child(7), table.print-cols-7 td:nth-child(7) { width: 14.26%; }\n      table.print-cols-5 col:nth-child(1) { width: 20%; } table.print-cols-5 col:nth-child(2) { width: 20%; } table.print-cols-5 col:nth-child(3) { width: 20%; } table.print-cols-5 col:nth-child(4) { width: 20%; } table.print-cols-5 col:nth-child(5) { width: 20%; }\n      table.print-cols-7 col:nth-child(1) { width: 14.29%; } table.print-cols-7 col:nth-child(2) { width: 14.29%; } table.print-cols-7 col:nth-child(3) { width: 14.29%; } table.print-cols-7 col:nth-child(4) { width: 14.29%; } table.print-cols-7 col:nth-child(5) { width: 14.29%; } table.print-cols-7 col:nth-child(6) { width: 14.29%; } table.print-cols-7 col:nth-child(7) { width: 14.26%; }\n      thead { display: table-header-group; }\n      thead tr, .report-table-head, .table-header-dark { display: table-row; background: linear-gradient(135deg, #026174 0%, #068294 100%) !important; }\n      thead th, .report-table-head th, .table-header-dark th { display: table-cell; padding: 10px; text-align: right; vertical-align: middle; font-weight: 700; color: #ffffff !important; background: linear-gradient(135deg, #026174 0%, #068294 100%) !important; border: 1px solid rgba(255,255,255,0.2); font-size: 0.85rem; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }\n      tbody td { display: table-cell; }\n      tbody tr { page-break-inside: avoid; }\n      tbody tr:nth-child(even) { background: #f8fafc; }\n      tbody td { padding: 10px; text-align: right; vertical-align: middle; border: 1px solid #e2e8f0; color: #334155; writing-mode: horizontal-tb; word-break: normal; white-space: normal; line-height: 1.4; min-height: 36px; }\n      tbody td[dir=\"ltr\"] { direction: ltr; text-align: right; }\n      footer { margin-top: 32px; padding-top: 20px; border-top: 2px solid #cbd5e1; page-break-inside: avoid; display: flex; justify-content: flex-end; direction: rtl; }\n      footer p { display: none !important; }\n      footer img { margin-right: auto; margin-left: 0; }\n      img { max-width: 100%; height: auto; }\n      article > div { background: #f6fafb !important; }\n      [style*=\"border: 2px solid var(--border-card)\"] { border-color: #cbd5e1 !important; }\n      [style*=\"border:2px solid var(--border-card)\"] { border-color: #cbd5e1 !important; }\n    `;\n    printWin.document.open();\n    printWin.document.write(\n      `<!DOCTYPE html><html dir=\"rtl\"><head><meta charset=\"utf-8\"><base href=\"${origin}/\"><title> </title><style>${styles}</style></head><body></body></html>`\n    );\n    printWin.document.close();\n    printWin.document.body.innerHTML = html;\n    printWin.focus();\n    setTimeout(() => {\n      printWin.print();\n      printWin.onafterprint = () => printWin.close();\n    }, 500);\n  };\n\n  const openEditModal = (r: CtRecord) => {\n    setEditingRecord(r);\n    setEditForm({\n      sttl_date_from: r.sttl_date_from?.slice(0, 10) ?? '',\n      sttl_date_to: r.sttl_date_to?.slice(0, 10) ?? '',\n      ct_value: String(r.ct_value ?? ''),\n      ct_received_date: r.ct_received_date?.slice(0, 10) ?? '',\n      notes: r.notes ?? '',\n    });\n  };\n\n  const closeEditModal = () => {\n    setEditingRecord(null);\n    setEditForm({ sttl_date_from: '', sttl_date_to: '', ct_value: '', ct_received_date: '', notes: '' });\n  };\n\n  const handleUpdateCt = async () => {\n    if (!editingRecord) return;\n    const num = parseFloat(String(editForm.ct_value).replace(/,/g, ''));\n    if (editForm.sttl_date_from === '' || editForm.sttl_date_to === '' || editForm.ct_received_date === '' || editForm.ct_value === '' || isNaN(num)) {\n      toast({ title: 'تنبيه', description: 'مطلوب: من تاريخ التسوية، إلى تاريخ التسوية، تاريخ استلام CT، وقيمة CT', variant: 'destructive' });\n      return;\n    }\n    try {\n      setUpdateSubmitting(true);\n      await api.put(`/rtgs/ct-records/${editingRecord.id}`, {\n        sttl_date_from: editForm.sttl_date_from,\n        sttl_date_to: editForm.sttl_date_to,\n        ct_value: num,\n        ct_received_date: editForm.ct_received_date,\n        notes: editForm.notes || undefined,\n      });\n      toast({ title: 'تم', description: 'تم تعديل سجل CT بنجاح' });\n      closeEditModal();\n      fetchRecords();\n    } catch (e: unknown) {\n      const err = e as { response?: { data?: { error?: string } } };\n      toast({ title: 'خطأ', description: err.response?.data?.error ?? 'فشل تعديل سجل CT', variant: 'destructive' });\n    } finally {\n      setUpdateSubmitting(false);\n    }\n  };\n\n  const handleDeleteCt = async (r: CtRecord) => {\n    if (!window.confirm(`هل أنت متأكد من حذف سجل CT (من ${formatDate(r.sttl_date_from)} إلى ${formatDate(r.sttl_date_to)})؟`)) return;\n    try {\n      setDeletingId(r.id);\n      await api.delete(`/rtgs/ct-records/${r.id}`);\n      toast({ title: 'تم', description: 'تم حذف سجل CT بنجاح' });\n      fetchRecords();\n    } catch (e: unknown) {\n      const err = e as { response?: { data?: { error?: string } } };\n      toast({ title: 'خطأ', description: err.response?.data?.error ?? 'فشل حذف سجل CT', variant: 'destructive' });\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  const ctNum = ctValue !== '' ? parseFloat(String(ctValue).replace(/,/g, '')) : NaN;\n  const sumAcq = summary ? (typeof summary.sum_acq === 'number' ? summary.sum_acq : parseFloat(String(summary.sum_acq)) || 0) : 0;\n  const ctRounded = !isNaN(ctNum) ? Math.round(ctNum * 1000000) / 1000000 : NaN;\n  const acqRounded = Math.round(sumAcq * 1000000) / 1000000;\n  const isMatched = summary && !isNaN(ctRounded)\n    ? Math.abs(ctRounded - acqRounded) < 0.0001\n    : null;\n\n  const kpiTotal = records.length;\n  const kpiMatched = records.filter((r) => r.match_status === 'matched').length;\n  const kpiNotMatched = records.filter((r) => r.match_status === 'not_matched').length;\n  const kpiTotalCtValue = records.reduce((sum, r) => sum + (Number(r.ct_value) || 0), 0);\n  const hasActiveFilters = filterDateFrom || filterDateTo;\n\n  const resetFilters = () => {\n    setFilterDateFrom('');\n    setFilterDateTo('');\n  };\n\n  const handleDownloadAsImage = async () => {\n    if (!detailContentRef.current || !detailRecord) return;\n    setDownloadingImage(true);\n    try {\n      const dataUrl = await toPng(detailContentRef.current, {\n        quality: 1,\n        pixelRatio: 2,\n        backgroundColor: '#ffffff',\n      });\n      const link = document.createElement('a');\n      const safeFrom = formatDate(detailRecord.sttl_date_from).replace(/\\//g, '-');\n      const safeTo = formatDate(detailRecord.sttl_date_to).replace(/\\//g, '-');\n      link.download = `ct_${safeFrom}_${safeTo}.png`;\n      link.href = dataUrl;\n      link.click();\n      toast({ title: 'تم التحميل', description: 'تم حفظ الصورة بنجاح' });\n    } catch (err) {\n      toast({ title: 'خطأ', description: 'فشل حفظ الصورة', variant: 'destructive' });\n    } finally {\n      setDownloadingImage(false);\n    }\n  };\n\n  return (\n    <div\n      className=\"min-h-screen\"\n      style={{\n        padding: '1.5rem 2rem',\n        background: 'linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%)',\n      }}\n    >\n      <div className=\"mx-auto print:max-w-none\" style={{ maxWidth: '1400px' }}>\n        {/* Header */}\n        <div\n          className=\"page-header-teal rounded-xl flex flex-wrap items-center justify-between gap-4 p-5 mb-6\"\n          style={{\n            background: 'linear-gradient(135deg, #026174 0%, #068294 100%)',\n            color: '#ffffff',\n            boxShadow: '0 10px 30px rgba(2, 97, 116, 0.35)',\n          }}\n        >\n          <div>\n            <h1 className=\"text-2xl font-bold m-0 text-white\">مطابقة العمولات (CT و عمولة التحصيل الحكومي)</h1>\n            <p className=\"text-sm opacity-90 mt-1 m-0 text-white\">\n              إدراج قيمة CT من البنك المركزي ومطابقتها مع عمولة التحصيل الحكومي (ACQ) لفترة التسوية\n            </p>\n          </div>\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <div className=\"flex rounded-full overflow-hidden border border-white/30 bg-white/10 p-0.5\">\n              <button\n                type=\"button\"\n                onClick={() => setViewMode('cards')}\n                className={`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ${viewMode === 'cards' ? 'bg-white text-[#026174] shadow' : 'text-white/90 hover:bg-white/10'}`}\n              >\n                <LayoutGrid className=\"w-4 h-4\" />\n                كروت\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setViewMode('table')}\n                className={`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ${viewMode === 'table' ? 'bg-white text-[#026174] shadow' : 'text-white/90 hover:bg-white/10'}`}\n              >\n                <Table2 className=\"w-4 h-4\" />\n                جدول\n              </button>\n            </div>\n            <Link\n              to=\"/rtgs\"\n              className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium bg-white text-[#026174] hover:bg-white/95 transition-colors shadow\"\n            >\n              <ArrowRight className=\"w-4 h-4\" />\n              العودة إلى RTGS\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"grid gap-4 mb-6\" style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))' }}>\n          {[\n            { label: 'إجمالي السجلات', value: kpiTotal },\n            { label: 'مطابق', value: kpiMatched },\n            { label: 'غير مطابق', value: kpiNotMatched },\n            { label: 'إجمالي قيمة CT (IQD)', value: formatNum(kpiTotalCtValue) },\n          ].map((item, i) => (\n            <div key={i} className=\"rounded-2xl p-5 border-2\" style={{ borderColor: 'var(--border-card)', background: 'var(--surface)' }}>\n              <p className=\"text-xs font-bold m-0 mb-1\" style={{ color: 'var(--text-muted)' }}>{item.label}</p>\n              <p className=\"text-xl font-extrabold m-0 tabular-nums\" style={{ color: 'var(--text-strong)' }} dir=\"ltr\">{item.value}</p>\n            </div>\n          ))}\n        </div>\n\n        {canCreateCt && (\n        <div\n          className=\"rounded-2xl mb-6 overflow-hidden print:break-inside-avoid\"\n          style={{\n            background: 'var(--surface)',\n            boxShadow: 'var(--shadow-card)',\n            border: '2px solid var(--border-card)',\n          }}\n        >\n          <div className=\"px-5 py-4 border-b flex items-center gap-2\" style={{ borderColor: 'var(--border-card)', background: 'linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%)' }}>\n            <Plus className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} />\n            <span className=\"font-bold text-base\" style={{ color: 'var(--text-strong)' }}>إدراج CT للمطابقة</span>\n          </div>\n          <div className=\"p-5\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">من تاريخ التسوية <span className=\"text-red-500\">*</span></label>\n                <div className={dateInputWrapperClass}>\n                  <input\n                    type=\"date\"\n                    value={sttlDateFrom}\n                    onChange={(e) => setSttlDateFrom(e.target.value)}\n                    className={dateInputClass}\n                  />\n                  <span className=\"absolute right-0 top-0 bottom-0 w-11 flex items-center justify-center bg-teal-100/80 text-teal-600 pointer-events-none rounded-l-xl\">\n                    <Calendar className=\"w-5 h-5\" strokeWidth={2} />\n                  </span>\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">إلى تاريخ التسوية <span className=\"text-red-500\">*</span></label>\n                <div className={dateInputWrapperClass}>\n                  <input\n                    type=\"date\"\n                    value={sttlDateTo}\n                    onChange={(e) => setSttlDateTo(e.target.value)}\n                    className={dateInputClass}\n                  />\n                  <span className=\"absolute right-0 top-0 bottom-0 w-11 flex items-center justify-center bg-teal-100/80 text-teal-600 pointer-events-none rounded-l-xl\">\n                    <Calendar className=\"w-5 h-5\" strokeWidth={2} />\n                  </span>\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">قيمة CT <span className=\"text-red-500\">*</span></label>\n                <input\n                  type=\"text\"\n                  inputMode=\"decimal\"\n                  value={ctValue}\n                  onChange={(e) => setCtValue(e.target.value)}\n                  placeholder=\"0.00\"\n                  className=\"ds-input w-full py-2.5 px-4\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">تاريخ استلام CT من البنك المركزي <span className=\"text-red-500\">*</span></label>\n                <div className={dateInputWrapperClass}>\n                  <input\n                    type=\"date\"\n                    value={ctReceivedDate}\n                    onChange={(e) => setCtReceivedDate(e.target.value)}\n                    className={dateInputClass}\n                  />\n                  <span className=\"absolute right-0 top-0 bottom-0 w-11 flex items-center justify-center bg-teal-100/80 text-teal-600 pointer-events-none rounded-l-xl\">\n                    <Calendar className=\"w-5 h-5\" strokeWidth={2} />\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex items-end\">\n                <button\n                  type=\"button\"\n                  onClick={handleInsertCt}\n                  disabled={submitting}\n                  className=\"ds-btn ds-btn-primary w-full py-2.5 px-5\"\n                >\n                  {submitting ? 'جاري الحفظ...' : 'إدراج CT للمطابقة'}\n                </button>\n              </div>\n            </div>\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-semibold text-neutral-700 mb-2\">ملاحظات (اختياري)</label>\n                <input\n                  type=\"text\"\n                  value={notes}\n                  onChange={(e) => setNotes(e.target.value)}\n                  placeholder=\"ملاحظات...\"\n                  className=\"ds-input w-full py-2.5 px-4\"\n                />\n            </div>\n\n            {/* ملخص عمولة التحصيل الحكومي للفترة */}\n            {sttlDateFrom && sttlDateTo && (\n              <div className=\"rounded-lg border border-neutral-200 bg-neutral-50 p-4\">\n                <p className=\"text-sm font-bold text-neutral-700 m-0 mb-3\">ملخص عمولة التحصيل الحكومي للفترة {formatDate(sttlDateFrom)} → {formatDate(sttlDateTo)}</p>\n                {summaryLoading ? (\n                  <Loading message=\"جاري جلب الملخص...\" />\n                ) : summary ? (\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"order-1\">\n                      <p className=\"text-xs font-semibold text-neutral-600 m-0\">عمولة التحصيل الحكومي (ACQ) — تُقارن مع قيمة CT</p>\n                      <p className=\"text-lg font-bold text-slate-800 m-0 tabular-nums\" dir=\"ltr\">{formatNum(summary.sum_acq)}</p>\n                    </div>\n                    <div className=\"order-2\">\n                      <p className=\"text-xs font-semibold text-neutral-600 m-0\">عدد الحركات</p>\n                      <p className=\"text-lg font-bold text-neutral-900 m-0 tabular-nums\" dir=\"ltr\">{Number(summary.total_movements).toLocaleString('en-US')}</p>\n                    </div>\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-neutral-600 m-0\">لا توجد حركات في هذه الفترة أو حدث خطأ في الجلب.</p>\n                )}\n                {summary && ctValue !== '' && !isNaN(ctRounded) && (\n                  <div className=\"mt-3 pt-3 border-t border-neutral-200 flex items-center gap-2\">\n                    {isMatched ? (\n                      <>\n                        <CheckCircle2 className=\"w-5 h-5 text-green-600 shrink-0\" />\n                        <span className=\"text-base font-semibold text-green-700\">قيمة CT ({formatNum(ctRounded)}) تطابق عمولة التحصيل الحكومي ({formatNum(acqRounded)})</span>\n                      </>\n                    ) : (\n                      <>\n                        <XCircle className=\"w-5 h-5 text-amber-600 shrink-0\" />\n                        <span className=\"text-base font-semibold text-amber-700\">\n                          قيمة CT ({formatNum(ctRounded)}) لا تطابق عمولة التحصيل الحكومي ({formatNum(acqRounded)}). الفرق: {formatNum(Math.abs(ctRounded - acqRounded))}\n                        </span>\n                      </>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n        )}\n\n        {/* سجل CT وطباعة التقرير */}\n        <div\n          className=\"rounded-2xl overflow-hidden print:break-inside-avoid\"\n          style={{\n            background: 'var(--surface)',\n            boxShadow: 'var(--shadow-card)',\n            border: '2px solid var(--border-card)',\n          }}\n        >\n          {/* Filters */}\n          <div\n            className=\"rounded-t-2xl p-5 border-b\"\n            style={{\n              background: 'linear-gradient(180deg, #ffffff 0%, #f8fafc 100%)',\n              boxShadow: '0 4px 20px rgba(0,0,0,0.06)',\n              borderColor: 'var(--border-card)',\n            }}\n          >\n            <div className=\"flex items-center justify-between gap-4 flex-wrap mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"p-1.5 rounded-lg bg-slate-100\">\n                  <Filter className=\"w-4 h-4 text-slate-600\" />\n                </div>\n                <span className=\"text-base font-semibold text-slate-700\">الفلاتر — سجل CT</span>\n              </div>\n              <div className=\"flex items-center gap-3 flex-wrap\">\n                <button\n                  type=\"button\"\n                  onClick={resetFilters}\n                  disabled={!hasActiveFilters}\n                  className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium ds-btn ds-btn-outline disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <X className=\"w-4 h-4\" />\n                  إلغاء الفلاتر\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handlePrintReport}\n                  className=\"ds-btn ds-btn-primary flex items-center gap-2 px-4 py-2\"\n                >\n                  <Printer className=\"w-4 h-4\" />\n                  طباعة تقرير مطابقة\n                </button>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-xs font-medium text-slate-500 mb-1\">من تاريخ</label>\n                <div className=\"relative\">\n                  <Calendar className=\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none\" />\n                  <input\n                    type=\"date\"\n                    value={filterDateFrom}\n                    onChange={(e) => setFilterDateFrom(e.target.value)}\n                    className=\"ds-input w-full pl-3 pr-10 py-2\"\n                  />\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-slate-500 mb-1\">إلى تاريخ</label>\n                <div className=\"relative\">\n                  <Calendar className=\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none\" />\n                  <input\n                    type=\"date\"\n                    value={filterDateTo}\n                    onChange={(e) => setFilterDateTo(e.target.value)}\n                    className=\"ds-input w-full pl-3 pr-10 py-2\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          {recordsLoading ? (\n            <div className=\"p-16 flex justify-center\">\n              <Loading message=\"جاري تحميل السجل...\" />\n            </div>\n          ) : records.length === 0 ? (\n            <div className=\"p-16 text-center\">\n              <div className=\"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center\" style={{ background: 'rgba(8, 131, 149, 0.08)' }}>\n                <FileCheck className=\"w-8 h-8\" style={{ color: 'var(--primary-600)' }} />\n              </div>\n              <p className=\"text-lg font-bold m-0\" style={{ color: 'var(--text-strong)' }}>لا توجد سجلات CT حتى الآن</p>\n              <p className=\"text-sm mt-2 m-0\" style={{ color: 'var(--text-muted)' }}>استخدم «إدراج CT للمطابقة» أعلاه</p>\n            </div>\n          ) : viewMode === 'cards' ? (\n            <div className=\"p-6\">\n              <div className=\"grid gap-5 sm:grid-cols-2 xl:grid-cols-3\">\n                <AnimatePresence>\n                  {records.map((r, index) => (\n                    <motion.div\n                      key={r.id}\n                      initial={{ opacity: 0, y: 16 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, scale: 0.98 }}\n                      transition={{ duration: 0.25, delay: index * 0.03, ease: [0.25, 0.46, 0.45, 0.94] }}\n                      whileHover={{\n                        scale: 1.03,\n                        y: -6,\n                        zIndex: 20,\n                        boxShadow: '0 20px 40px rgba(2, 97, 116, 0.18), 0 0 0 1px rgba(8, 131, 149, 0.2)',\n                        transition: { duration: 0.3, ease: [0.25, 0.46, 0.45, 0.94] },\n                      }}\n                      className=\"group relative flex flex-col rounded-2xl overflow-hidden cursor-default\"\n                      style={{\n                        background: 'var(--surface)',\n                        border: '2px solid var(--border-card)',\n                        boxShadow: '0 2px 8px rgba(15, 23, 42, 0.06), inset 0 1px 0 rgba(255,255,255,0.8)',\n                      }}\n                    >\n                      <div className=\"card-shine-hover absolute inset-0 opacity-0 group-hover:opacity-100 pointer-events-none overflow-hidden rounded-2xl\" />\n                      <div\n                        className=\"absolute top-0 bottom-0 w-1 rounded-r-full opacity-80 group-hover:opacity-100 group-hover:w-1.5 transition-all duration-300\"\n                        style={{ right: 0, background: r.match_status === 'matched' ? 'linear-gradient(180deg, #059669 0%, #047857 100%)' : 'linear-gradient(180deg, #d97706 0%, #b45309 100%)' }}\n                      />\n                      <div className=\"p-5 flex flex-col gap-3\">\n                        <h3 className=\"text-lg font-bold leading-snug\" style={{ color: 'var(--text-strong)' }}>\n                          CT: {formatDate(r.sttl_date_from)} → {formatDate(r.sttl_date_to)}\n                        </h3>\n                        <div className=\"rounded-xl p-3 text-sm\" style={{ background: 'rgba(2, 97, 116, 0.04)', border: '1px solid var(--border)' }}>\n                          <div className=\"grid grid-cols-2 gap-x-4 gap-y-1.5 text-xs\">\n                            <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>قيمة CT</span><span className=\"tabular-nums font-bold\" style={{ color: 'var(--primary-800)' }} dir=\"ltr\">{formatNum(r.ct_value)} IQD</span></div>\n                            <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>عمولة التحصيل</span><span className=\"tabular-nums font-medium\" dir=\"ltr\">{formatNum(r.sum_acq)} IQD</span></div>\n                            <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>تاريخ استلام CT</span><span className=\"tabular-nums\" dir=\"ltr\">{formatDate(r.ct_received_date)}</span></div>\n                            <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>المستخدم</span><span>{r.user_name ?? '—'}</span></div>\n                          </div>\n                        </div>\n                        <div className={`rounded-xl px-3 py-2 text-sm font-bold ${r.match_status === 'matched' ? 'bg-emerald-100 text-emerald-800' : 'bg-amber-100 text-amber-800'}`}>\n                          {r.match_status === 'matched' ? (\n                            <span className=\"inline-flex items-center gap-1.5\"><CheckCircle2 className=\"w-4 h-4\" /> مطابق</span>\n                          ) : (\n                            <span className=\"inline-flex items-center gap-1.5\"><XCircle className=\"w-4 h-4\" /> غير مطابق</span>\n                          )}\n                        </div>\n                        {/* زر عرض التفصيل + ختم التسويات (الختم في الجهة اليسرى — مثل التسويات الحكومية) */}\n                        <div className=\"flex items-center justify-between gap-3 mt-3 pt-3 border-t\" style={{ borderColor: 'var(--border)' }}>\n                          <div className=\"flex items-center gap-2\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setDetailRecord(r)}\n                              className=\"ds-btn ds-btn-primary flex items-center gap-2 px-4 py-2 text-sm\"\n                            >\n                              <Eye className=\"w-4 h-4\" />\n                              عرض التفصيل\n                            </button>\n                            {canEditCt && (\n                            <button type=\"button\" onClick={() => openEditModal(r)} className=\"ds-btn ds-btn-outline p-2 rounded-lg\" title=\"تعديل\">\n                              <Edit className=\"w-4 h-4\" />\n                            </button>\n                            )}\n                            {canDeleteCt && (\n                            <button type=\"button\" onClick={() => handleDeleteCt(r)} disabled={deletingId === r.id} className=\"p-2 rounded-lg border-red-200 bg-red-50 text-red-700 hover:bg-red-100 disabled:opacity-50\" title=\"حذف\">\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                            )}\n                          </div>\n                          <div className=\"flex-shrink-0 ms-auto\" style={{ alignSelf: 'flex-end' }}>\n                            <img src=\"/stamp-settlement-reconciliation.png\" alt=\"ختم التسويات\" className=\"h-14 w-auto object-contain opacity-90\" />\n                          </div>\n                        </div>\n                      </div>\n                    </motion.div>\n                  ))}\n                </AnimatePresence>\n              </div>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto overflow-y-visible\" style={{ isolation: 'isolate' }}>\n              <table className=\"ds-table w-full\" style={{ minWidth: '760px', borderCollapse: 'separate', borderSpacing: 0 }}>\n                <thead>\n                  <tr className=\"table-header-dark\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">من تاريخ</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">إلى تاريخ</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">قيمة CT (IQD)</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">تاريخ استلام CT</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">عمولة التحصيل (IQD)</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">الحالة</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">المستخدم</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white\">التاريخ</th>\n                    <th className=\"text-end py-4 px-4 font-bold text-white print:hidden\">إجراءات</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {records.map((r) => (\n                    <tr\n                      key={r.id}\n                      className=\"hover:bg-slate-50/80 transition-shadow duration-200\"\n                      style={{ position: 'relative', cursor: 'default' }}\n                    >\n                      <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatDate(r.sttl_date_from)}</td>\n                      <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatDate(r.sttl_date_to)}</td>\n                      <td className=\"py-3 px-4 font-bold tabular-nums\" style={{ color: 'var(--primary-800)' }} dir=\"ltr\">{formatNum(r.ct_value)}</td>\n                      <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatDate(r.ct_received_date)}</td>\n                      <td className=\"py-3 px-4 tabular-nums\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatNum(r.sum_acq)}</td>\n                      <td className=\"py-3 px-4\">\n                        {r.match_status === 'matched' ? (\n                          <span className=\"inline-flex items-center gap-1 text-green-700 font-semibold\"><CheckCircle2 className=\"w-4 h-4\" /> مطابق</span>\n                        ) : (\n                          <span className=\"inline-flex items-center gap-1 text-amber-700 font-semibold\"><XCircle className=\"w-4 h-4\" /> غير مطابق</span>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }}>{r.user_name ?? '—'}</td>\n                      <td className=\"py-3 px-4\" style={{ color: 'var(--text-muted)' }} dir=\"ltr\">{formatDate(r.created_at?.slice(0, 10))}</td>\n                      <td className=\"py-3 px-4 print:hidden\">\n                        <div className=\"flex items-center gap-2 justify-end\">\n                          {canEditCt && (\n                          <button type=\"button\" onClick={() => openEditModal(r)} className=\"ds-btn ds-btn-outline p-2 rounded-lg\" title=\"تعديل\">\n                            <Edit className=\"w-4 h-4\" />\n                          </button>\n                          )}\n                          {canDeleteCt && (\n                          <button type=\"button\" onClick={() => handleDeleteCt(r)} disabled={deletingId === r.id} className=\"p-2 rounded-lg border-red-200 bg-red-50 text-red-700 hover:bg-red-100 disabled:opacity-50\" title=\"حذف\">\n                            <Trash2 className=\"w-4 h-4\" />\n                          </button>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {/* نافذة تقرير مطابقة CT الشامل */}\n        {reportOpen && (\n          <div className=\"ct-report-print-overlay fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 print:bg-white print:p-0 backdrop-blur-sm\" onClick={closeReport}>\n            <div className=\"rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-auto print:max-h-none print:overflow-visible print:shadow-none print:rounded-none print:bg-white\" style={{ background: 'var(--surface)', border: '2px solid var(--border-card)' }} onClick={(e) => e.stopPropagation()} id=\"ct-matching-report-print\">\n              {reportLoading ? (\n                <div className=\"p-12 flex justify-center\">\n                  <Loading message=\"جاري تحميل التقرير...\" />\n                </div>\n              ) : reportData ? (\n                <>\n                  <div ref={reportContentRef} className=\"ct-report-content p-6 print:p-0 max-w-4xl mx-auto\">\n                    {/* ورق التقرير — خلفية وهمية للصفحة */}\n                    <article className=\"bg-white rounded-2xl shadow-xl print:shadow-none print:rounded-none overflow-hidden print:overflow-visible min-h-[80vh] print:min-h-0\">\n                      <div className=\"p-8 print:py-8 print:px-0\" style={{ background: 'var(--bg, #f6fafb)' }}>\n                        {/* رأس التقرير — نفس تصميم الهيدر التيل */}\n                        <header\n                          className=\"report-print-header text-center mb-10 pt-6 pb-6 px-6 rounded-xl\"\n                          style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)', boxShadow: '0 10px 30px rgba(2, 97, 116, 0.35)' }}\n                        >\n                          <div className=\"flex flex-col sm:flex-row items-center justify-center gap-6 mb-6\">\n                            <div className=\"flex-shrink-0 w-20 h-20 rounded-2xl bg-white/20 border-2 border-white/40 shadow-md flex items-center justify-center p-2\">\n                              <img src=\"/logo.png\" alt=\"شعار الشركة\" className=\"max-h-full max-w-full object-contain\" />\n                            </div>\n                            <div>\n                              <h1 className=\"text-2xl sm:text-3xl font-extrabold m-0 tracking-tight text-white\">تقرير مطابقة CT</h1>\n                              <p className=\"text-white/95 mt-2 m-0 text-base font-semibold\">شركة الساقي لخدمات الدفع الإلكتروني</p>\n                              <p className=\"text-white/90 font-bold mt-0.5 m-0 text-sm\">قسم التسويات والمطابقات</p>\n                            </div>\n                          </div>\n                          <div className=\"report-print-period inline-flex flex-wrap items-center justify-center gap-x-8 gap-y-2 py-3 px-6 rounded-lg text-sm font-semibold\" style={{ background: 'rgba(255,255,255,0.2)', border: '1px solid rgba(255,255,255,0.4)' }}>\n                            <span className=\"text-white\">فترة التسوية: <span className=\"font-bold\" dir=\"ltr\">{formatDate(reportData.period.sttl_date_from)} — {formatDate(reportData.period.sttl_date_to)}</span></span>\n                            <span className=\"text-white/95\" dir=\"ltr\">تاريخ الإصدار: {new Date().toLocaleDateString('ar-IQ', { year: 'numeric', month: 'long', day: 'numeric' })}</span>\n                          </div>\n                        </header>\n\n                        {/* مؤشرات الأداء (KPI) — نفس تصميم KPI Cards */}\n                        <section className=\"mb-10\">\n                          <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 pb-2 w-fit\" style={{ color: 'var(--text-strong)', borderBottom: '2px solid var(--primary-600)' }}>\n                            <Hash className=\"w-5 h-5\" style={{ color: 'var(--primary-600)' }} /> مؤشرات الأداء\n                          </h2>\n                          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n                            {[\n                              { label: 'عدد الحركات', value: reportData.summary.total_movements.toLocaleString('en-US'), accent: 'linear-gradient(135deg, #068294 0%, #026174 100%)' },\n                              { label: 'إجمالي المبلغ (IQD)', value: formatNum(reportData.summary.total_amount), accent: 'linear-gradient(135deg, #059669 0%, #047857 100%)' },\n                              { label: 'الرسوم (Fees)', value: formatNum(reportData.summary.sum_fees), accent: 'linear-gradient(135deg, #64748b 0%, #475569 100%)' },\n                              { label: 'عمولة التحصيل (ACQ)', value: formatNum(reportData.summary.sum_acq), accent: 'linear-gradient(135deg, #026174 0%, #0f172a 100%)', primary: true },\n                            ].map((kpi, i) => (\n                              <div\n                                key={i}\n                                className=\"rounded-2xl p-5 relative overflow-hidden\"\n                                style={{ background: 'var(--surface)', border: '2px solid var(--border-card)', boxShadow: '0 4px 20px rgba(15,23,42,0.08)' }}\n                              >\n                                <div className=\"absolute inset-y-0 start-0 w-1 rounded-s-2xl opacity-80\" style={{ background: kpi.accent }} />\n                                <p className=\"text-xs font-semibold uppercase tracking-wider m-0 mb-2\" style={{ color: 'var(--text-muted)' }}>{kpi.label}</p>\n                                <p className=\"text-2xl font-bold m-0 tabular-nums\" dir=\"ltr\" style={{ color: kpi.primary ? 'var(--primary-800)' : 'var(--text-strong)' }}>{kpi.value}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </section>\n\n                        {/* مخطط عمولة التحصيل باليوم */}\n                        <section className=\"mb-10 print:break-inside-avoid\">\n                          <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 pb-2 w-fit\" style={{ color: 'var(--text-strong)', borderBottom: '2px solid var(--primary-600)' }}>مخطط عمولة التحصيل الحكومي (ACQ) باليوم</h2>\n                          <div className=\"rounded-2xl p-5 h-[300px] print:h-[280px]\" style={{ border: '2px solid var(--border-card)', background: 'var(--surface)', boxShadow: '0 4px 20px rgba(15,23,42,0.08)' }}>\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\n                              <BarChart data={[...reportData.by_day].sort((a, b) => (a.sttl_date || '').localeCompare(b.sttl_date || '')).map((d) => ({ ...d, date: formatDate(d.sttl_date), acq: Number(d.sum_acq) }))} margin={{ top: 36, right: 24, left: 24, bottom: 24 }}>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" vertical={false} />\n                                <XAxis dataKey=\"date\" tick={{ fontSize: 12, fill: '#475569', fontWeight: 500 }} tickMargin={10} axisLine={{ stroke: '#94a3b8' }} />\n                                <YAxis tick={{ fontSize: 12, fill: '#475569', fontWeight: 500 }} tickFormatter={(v) => Number(v).toLocaleString('en-US', { maximumFractionDigits: 0 })} width={58} axisLine={{ stroke: '#94a3b8' }} />\n                                <Tooltip formatter={(value: number) => [value?.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 2 }), 'عمولة التحصيل (ACQ)']} contentStyle={{ borderRadius: 12, border: '1px solid #e2e8f0' }} />\n                                <Bar dataKey=\"acq\" name=\"عمولة التحصيل (ACQ)\" fill=\"#026174\" radius={[6, 6, 0, 0]} maxBarSize={56}>\n                                  <LabelList dataKey=\"acq\" position=\"top\" formatter={(v: number) => Number(v).toLocaleString('en-US', { maximumFractionDigits: 0 })} style={{ fontSize: 13, fontWeight: 700, fill: '#0f172a' }} />\n                                </Bar>\n                              </BarChart>\n                            </ResponsiveContainer>\n                          </div>\n                        </section>\n\n                        {/* تفصيل حسب المصارف — مرتب أبجدياً حسب اسم المصرف */}\n                        <section className=\"mb-10 print:break-inside-avoid\" dir=\"rtl\">\n                          <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 pb-2 w-fit\" style={{ color: 'var(--text-strong)', borderBottom: '2px solid var(--primary-600)' }}>تفصيل حسب المصارف</h2>\n                          <div className=\"overflow-x-auto rounded-2xl print:shadow-none\" style={{ border: '2px solid var(--border-card)', boxShadow: '0 4px 20px rgba(15,23,42,0.08)' }}>\n                            <table className=\"w-full border-collapse text-sm print-cols-5 ds-table\" dir=\"rtl\" role=\"grid\">\n                              <colgroup className=\"print-cols-5-group\">\n                                <col /><col /><col /><col /><col />\n                              </colgroup>\n                              <thead>\n                                <tr className=\"table-header-dark report-table-head\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white first:rounded-tr-2xl\">المصرف</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">عدد الحركات</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">إجمالي المبلغ</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">الرسوم</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white last:rounded-tl-2xl\">عمولة التحصيل (ACQ)</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {[...reportData.by_bank].sort((a, b) => (a.bank_name || '').localeCompare(b.bank_name || '', 'ar')).map((row, i) => (\n                                  <tr key={i} className={i % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}>\n                                    <td className=\"text-right py-3 px-5 text-slate-800 font-medium border-b border-slate-100\">{row.bank_name}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{row.movement_count.toLocaleString('en-US')}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_amount)}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_fees)}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-teal-700 font-semibold border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_acq)}</td>\n                                  </tr>\n                                ))}\n                              </tbody>\n                            </table>\n                          </div>\n                        </section>\n\n                        {/* تفصيل عمولة التحصيل حسب المديرية والمحافظة */}\n                        <section className=\"mb-10 print:break-inside-avoid\" dir=\"rtl\">\n                          <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 pb-2 w-fit\" style={{ color: 'var(--text-strong)', borderBottom: '2px solid var(--primary-600)' }}>تفصيل عمولة التحصيل حسب المديرية والمحافظة</h2>\n                          {(reportData.by_directorate_governorate?.length ?? 0) > 0 ? (() => {\n                            const list = [...(reportData.by_directorate_governorate ?? [])].sort((a, b) => (b.sum_acq ?? 0) - (a.sum_acq ?? 0));\n                            const totalAcq = reportData.summary.sum_acq || 1;\n                            return (\n                              <div className=\"overflow-x-auto rounded-2xl print:shadow-none\" style={{ border: '2px solid var(--border-card)', boxShadow: '0 4px 20px rgba(15,23,42,0.08)' }}>\n                                  <table className=\"w-full border-collapse text-sm print-cols-7 ds-table\" dir=\"rtl\" role=\"grid\">\n                                    <colgroup className=\"print-cols-7-group\">\n                                      <col /><col /><col /><col /><col /><col /><col />\n                                    </colgroup>\n                                    <thead>\n                                      <tr className=\"table-header-dark report-table-head\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">المحافظة</th>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">المديرية</th>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">عدد الحركات</th>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">إجمالي المبلغ</th>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">الرسوم</th>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">عمولة التحصيل (ACQ)</th>\n                                        <th scope=\"col\" className=\"text-right py-4 px-3 font-bold text-sm text-white\">النسبة من الإجمالي</th>\n                                      </tr>\n                                    </thead>\n                                    <tbody>\n                                      {list.map((row, i) => (\n                                        <tr key={i} className={i % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}>\n                                          <td className=\"text-right py-3 px-3 text-slate-800 font-medium border-b border-slate-100\">{row.governorate}</td>\n                                          <td className=\"text-right py-3 px-3 text-slate-800 border-b border-slate-100\">{row.directorate_name}</td>\n                                          <td className=\"text-right py-3 px-3 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{row.movement_count.toLocaleString('en-US')}</td>\n                                          <td className=\"text-right py-3 px-3 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_amount)}</td>\n                                          <td className=\"text-right py-3 px-3 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_fees)}</td>\n                                          <td className=\"text-right py-3 px-3 tabular-nums text-teal-700 font-semibold border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_acq)}</td>\n                                          <td className=\"text-right py-3 px-3 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{totalAcq ? `${((row.sum_acq / totalAcq) * 100).toFixed(1)}%` : '—'}</td>\n                                        </tr>\n                                      ))}\n                                    </tbody>\n                                  </table>\n                                </div>\n                            );\n                          })() : (\n                            <p className=\"text-slate-500 bg-slate-50 rounded-xl border border-slate-200 py-6 px-4 text-center\">لا توجد بيانات مجمّعة حسب المديرية والمحافظة. تأكد من ربط حركات RTGS بالتجار في جدول التجار (merchants) حتى تظهر المحافظة واسم المديرية.</p>\n                          )}\n                        </section>\n\n                        {/* عمولة التحصيل باليوم — جدول مرتب حسب التاريخ من الأقدم إلى الأحدث */}\n                        <section className=\"mb-10 print:break-inside-avoid\" dir=\"rtl\">\n                          <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 pb-2 w-fit\" style={{ color: 'var(--text-strong)', borderBottom: '2px solid var(--primary-600)' }}>عمولة التحصيل (ACQ) باليوم — تفصيل</h2>\n                          <div className=\"overflow-x-auto rounded-2xl print:shadow-none\" style={{ border: '2px solid var(--border-card)', boxShadow: '0 4px 20px rgba(15,23,42,0.08)' }}>\n                            <table className=\"w-full border-collapse text-sm print-cols-5 ds-table\" dir=\"rtl\" role=\"grid\">\n                              <colgroup className=\"print-cols-5-group\">\n                                <col /><col /><col /><col /><col />\n                              </colgroup>\n                              <thead>\n                                <tr className=\"table-header-dark report-table-head\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white first:rounded-tr-2xl\">التاريخ</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">عدد الحركات</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">إجمالي المبلغ</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">الرسوم</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white last:rounded-tl-2xl\">عمولة التحصيل (ACQ)</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {[...reportData.by_day].sort((a, b) => (a.sttl_date || '').localeCompare(b.sttl_date || '')).map((row, i) => (\n                                  <tr key={i} className={i % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}>\n                                    <td className=\"text-right py-3 px-5 font-medium text-slate-800 border-b border-slate-100\" dir=\"ltr\">{formatDate(row.sttl_date)}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{row.movement_count.toLocaleString('en-US')}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_amount)}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-slate-700 border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_fees)}</td>\n                                    <td className=\"text-right py-3 px-5 tabular-nums text-teal-700 font-semibold border-b border-slate-100\" dir=\"ltr\">{formatNum(row.sum_acq)}</td>\n                                  </tr>\n                                ))}\n                              </tbody>\n                            </table>\n                          </div>\n                        </section>\n\n                        {/* المطابقة (CT مقابل عمولة التحصيل) — مرتب حسب من تاريخ من الأحدث إلى الأقدم */}\n                        <section className=\"mb-10 print:break-inside-avoid\" dir=\"rtl\">\n                          <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2 pb-2 w-fit\" style={{ color: 'var(--text-strong)', borderBottom: '2px solid var(--primary-600)' }}>المطابقة (CT مقابل عمولة التحصيل الحكومي)</h2>\n                          <div className=\"overflow-x-auto rounded-2xl print:shadow-none\" style={{ border: '2px solid var(--border-card)', boxShadow: '0 4px 20px rgba(15,23,42,0.08)' }}>\n                            <table className=\"w-full border-collapse text-sm print-cols-7 ds-table\" dir=\"rtl\" role=\"grid\">\n                              <colgroup className=\"print-cols-7-group\">\n                                <col /><col /><col /><col /><col /><col /><col />\n                              </colgroup>\n                              <thead>\n                                <tr className=\"table-header-dark report-table-head\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white first:rounded-tr-2xl\">من تاريخ</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">إلى تاريخ</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">قيمة CT</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">عمولة التحصيل</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">الحالة</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white\">المستخدم</th>\n                                  <th scope=\"col\" className=\"text-right py-4 px-5 font-bold text-sm text-white last:rounded-tl-2xl\">تاريخ الإدخال</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {reportData.ct_records.length === 0 ? (\n                                  <tr><td colSpan={7} className=\"text-center py-8 text-slate-500 bg-slate-50\">لا يوجد سجل CT لهذه الفترة</td></tr>\n                                ) : (\n                                  [...reportData.ct_records].sort((a, b) => (b.sttl_date_from || '').localeCompare(a.sttl_date_from || '') || (b.created_at || '').localeCompare(a.created_at || '')).map((r) => (\n                                    <tr key={r.id} className=\"bg-white even:bg-slate-50/50\">\n                                      <td className=\"text-right py-3 px-5 border-b border-slate-100\" dir=\"ltr\">{formatDate(r.sttl_date_from)}</td>\n                                      <td className=\"text-right py-3 px-5 border-b border-slate-100\" dir=\"ltr\">{formatDate(r.sttl_date_to)}</td>\n                                      <td className=\"text-right py-3 px-5 tabular-nums font-semibold border-b border-slate-100\" dir=\"ltr\">{formatNum(r.ct_value)}</td>\n                                      <td className=\"text-right py-3 px-5 tabular-nums text-teal-700 font-semibold border-b border-slate-100\" dir=\"ltr\">{formatNum(r.sum_acq)}</td>\n                                      <td className=\"text-right py-3 px-5 border-b border-slate-100\">\n                                        <span className={`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${r.match_status === 'matched' ? 'bg-green-100 text-green-800' : 'bg-amber-100 text-amber-800'}`}>{r.match_status === 'matched' ? 'مطابق' : 'غير مطابق'}</span>\n                                      </td>\n                                      <td className=\"text-right py-3 px-5 text-slate-700 border-b border-slate-100\">{r.user_name ?? '—'}</td>\n                                      <td className=\"text-right py-3 px-5 border-b border-slate-100\" dir=\"ltr\">{formatDate(r.created_at)}</td>\n                                    </tr>\n                                  ))\n                                )}\n                              </tbody>\n                            </table>\n                          </div>\n                        </section>\n\n                        {/* تذييل — الختم في جهة اليسار (نفس التصميم) */}\n                        <footer className=\"mt-12 pt-8 pb-4 rounded-2xl px-8 -mx-8 print:mx-0 print:px-0 print:rounded-none print:flex print:justify-end print:items-end\" dir=\"rtl\" style={{ borderTop: '2px solid var(--border-card)' }}>\n                          <p className=\"text-sm font-bold mb-4 print:hidden\" style={{ color: 'var(--text-strong)' }}>ختم قسم التسويات والمطابقات</p>\n                          <img src=\"/stamp-settlement-reconciliation.png\" alt=\"ختم قسم التسويات والمطابقات\" className=\"h-32 w-auto object-contain mx-auto print:h-36 print:mx-0 print:mr-auto print:ml-0 opacity-90\" />\n                        </footer>\n                      </div>\n                    </article>\n                  </div>\n                  <div className=\"sticky bottom-0 p-4 bg-slate-50 border-t border-slate-200 flex flex-col gap-3 print:hidden\">\n                    <div className=\"rounded-lg bg-amber-50 border border-amber-200 px-4 py-2\">\n                      <p className=\"text-sm font-medium text-amber-900 m-0\">لطباعة التقرير بدون ترويسة أو تذييل (فارغة تماماً — بدون عنوان، تاريخ، وقت، أو رابط):</p>\n                      <p className=\"text-sm text-amber-800 m-0 mt-1\">في نافذة الطباعة اضغط «المزيد من الإعدادات» ثم أزل تحديد «الترويسات والتذييلات».</p>\n                    </div>\n                    <div className=\"flex gap-3 justify-end\">\n                      <button type=\"button\" onClick={closeReport} className=\"ds-btn ds-btn-outline px-4 py-2\">إغلاق</button>\n                      <button type=\"button\" onClick={printReportWindow} className=\"ds-btn ds-btn-primary px-4 py-2 inline-flex items-center gap-2\">\n                        <Printer className=\"w-4 h-4\" /> طباعة\n                      </button>\n                    </div>\n                  </div>\n                </>\n              ) : null}\n            </div>\n          </div>\n        )}\n\n        {/* نافذة تعديل سجل CT */}\n        <Dialog open={!!editingRecord} onOpenChange={(open) => { if (!open) closeEditModal(); }}>\n          <DialogContent className=\"max-w-lg w-full rounded-2xl gap-0 p-0 overflow-hidden\" style={{ border: '2px solid var(--border-card)' }}>\n            <DialogHeader className=\"p-6 pb-4 border-b flex-row justify-between items-center\" style={{ borderColor: 'var(--border-card)' }}>\n              <DialogTitle className=\"text-xl font-bold m-0\" style={{ color: 'var(--text-strong)' }}>تعديل سجل CT</DialogTitle>\n              <button type=\"button\" onClick={closeEditModal} className=\"p-2 rounded-lg hover:bg-slate-100 transition-colors\" aria-label=\"إغلاق\">\n                <X className=\"w-5 h-5\" style={{ color: 'var(--text-muted)' }} />\n              </button>\n            </DialogHeader>\n            {editingRecord && (\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">من تاريخ التسوية <span className=\"text-red-500\">*</span></label>\n                  <div className={dateInputWrapperClass}>\n                    <input\n                      type=\"date\"\n                      value={editForm.sttl_date_from}\n                      onChange={(e) => setEditForm((f) => ({ ...f, sttl_date_from: e.target.value }))}\n                      className={dateInputClass}\n                    />\n                    <span className=\"absolute right-0 top-0 bottom-0 w-11 flex items-center justify-center bg-teal-100/80 text-teal-600 pointer-events-none rounded-l-xl\">\n                      <Calendar className=\"w-5 h-5\" strokeWidth={2} />\n                    </span>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">إلى تاريخ التسوية <span className=\"text-red-500\">*</span></label>\n                  <div className={dateInputWrapperClass}>\n                    <input\n                      type=\"date\"\n                      value={editForm.sttl_date_to}\n                      onChange={(e) => setEditForm((f) => ({ ...f, sttl_date_to: e.target.value }))}\n                      className={dateInputClass}\n                    />\n                    <span className=\"absolute right-0 top-0 bottom-0 w-11 flex items-center justify-center bg-teal-100/80 text-teal-600 pointer-events-none rounded-l-xl\">\n                      <Calendar className=\"w-5 h-5\" strokeWidth={2} />\n                    </span>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">قيمة CT <span className=\"text-red-500\">*</span></label>\n                  <input\n                    type=\"text\"\n                    inputMode=\"decimal\"\n                    value={editForm.ct_value}\n                    onChange={(e) => setEditForm((f) => ({ ...f, ct_value: e.target.value }))}\n                    placeholder=\"0.00\"\n                    className=\"ds-input w-full py-2.5 px-4\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">تاريخ استلام CT من البنك المركزي <span className=\"text-red-500\">*</span></label>\n                  <div className={dateInputWrapperClass}>\n                    <input\n                      type=\"date\"\n                      value={editForm.ct_received_date}\n                      onChange={(e) => setEditForm((f) => ({ ...f, ct_received_date: e.target.value }))}\n                      className={dateInputClass}\n                    />\n                    <span className=\"absolute right-0 top-0 bottom-0 w-11 flex items-center justify-center bg-teal-100/80 text-teal-600 pointer-events-none rounded-l-xl\">\n                      <Calendar className=\"w-5 h-5\" strokeWidth={2} />\n                    </span>\n                  </div>\n                </div>\n                <div className=\"sm:col-span-2\">\n                  <label className=\"block text-sm font-semibold text-neutral-700 mb-2\">ملاحظات</label>\n                  <input\n                    type=\"text\"\n                    value={editForm.notes}\n                    onChange={(e) => setEditForm((f) => ({ ...f, notes: e.target.value }))}\n                    placeholder=\"ملاحظات...\"\n                    className=\"ds-input w-full py-2.5 px-4\"\n                  />\n                </div>\n              </div>\n              <DialogFooter className=\"flex items-center gap-3 justify-end pt-4 border-t\" style={{ borderColor: 'var(--border)' }}>\n                <button type=\"button\" onClick={closeEditModal} className=\"ds-btn ds-btn-outline px-4 py-2.5\">\n                  إلغاء\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleUpdateCt}\n                  disabled={updateSubmitting}\n                  className=\"ds-btn ds-btn-primary px-4 py-2.5 disabled:opacity-50\"\n                >\n                  {updateSubmitting ? 'جاري الحفظ...' : 'حفظ التعديل'}\n                </button>\n              </DialogFooter>\n            </div>\n            )}\n          </DialogContent>\n        </Dialog>\n\n        {/* نافذة عرض التفصيل — بحجم الشاشة (مثل التسويات الحكومية) */}\n        <Dialog open={!!detailRecord} onOpenChange={(open) => { if (!open) { setDetailRecord(null); setDetailViewMode('table'); } }}>\n          <DialogContent className=\"max-w-[95vw] w-full max-h-[95vh] h-full overflow-y-auto p-0 gap-0 rounded-2xl\">\n            {detailRecord && (\n              <>\n                <DialogHeader className=\"p-6 pb-4 border-b flex-row justify-between items-center gap-4 flex-wrap\" style={{ borderColor: 'var(--border-card)' }}>\n                  <DialogTitle className=\"text-xl font-bold\" style={{ color: 'var(--text-strong)' }}>\n                    CT: {formatDate(detailRecord.sttl_date_from)} → {formatDate(detailRecord.sttl_date_to)}\n                  </DialogTitle>\n                  <div className=\"flex items-center gap-2 flex-wrap\">\n                    <div className=\"flex rounded-lg overflow-hidden border border-slate-200 p-0.5\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setDetailViewMode('table')}\n                        className={`px-3 py-2 text-sm font-medium rounded-md transition-colors ${detailViewMode === 'table' ? 'bg-[#068294] text-white' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}\n                      >\n                        <Table2 className=\"w-4 h-4 inline-block ms-1\" />\n                        جدول\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => setDetailViewMode('cards')}\n                        className={`px-3 py-2 text-sm font-medium rounded-md transition-colors ${detailViewMode === 'cards' ? 'bg-[#068294] text-white' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}\n                      >\n                        <LayoutGrid className=\"w-4 h-4 inline-block ms-1\" />\n                        كروت\n                      </button>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={handleDownloadAsImage}\n                      disabled={downloadingImage}\n                      className=\"ds-btn ds-btn-primary flex items-center gap-2 px-4 py-2 text-sm disabled:opacity-70\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      {downloadingImage ? 'جاري التحميل...' : 'تحميل كصورة'}\n                    </button>\n                  </div>\n                </DialogHeader>\n                <div className=\"p-6 overflow-auto bg-white flex justify-center\">\n                  <div\n                    ref={detailContentRef}\n                    className=\"bg-white\"\n                    style={{ width: 'fit-content', maxWidth: '100%', paddingBottom: '4rem' }}\n                  >\n                    {detailViewMode === 'table' ? (\n                      <>\n                        <div className=\"overflow-x-auto\">\n                          <table className=\"ds-table w-full\">\n                            <thead>\n                              <tr className=\"table-header-dark\" style={{ background: 'linear-gradient(135deg, #026174 0%, #068294 100%)' }}>\n                                <th className=\"text-end py-4 px-4 font-bold text-white\">من تاريخ</th>\n                                <th className=\"text-end py-4 px-4 font-bold text-white\">إلى تاريخ</th>\n                                <th className=\"text-end py-4 px-4 font-bold text-white\">قيمة CT (IQD)</th>\n                                <th className=\"text-end py-4 px-4 font-bold text-white\">تاريخ استلام CT</th>\n                                <th className=\"text-end py-4 px-4 font-bold text-white\">عمولة التحصيل (IQD)</th>\n                                <th className=\"text-end py-4 px-4 font-bold text-white\">الحالة</th>\n                              </tr>\n                            </thead>\n                            <tbody>\n                              <tr className=\"hover:bg-slate-50/80\">\n                                <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatDate(detailRecord.sttl_date_from)}</td>\n                                <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatDate(detailRecord.sttl_date_to)}</td>\n                                <td className=\"py-3 px-4 font-bold tabular-nums\" style={{ color: 'var(--primary-800)' }} dir=\"ltr\">{formatNum(detailRecord.ct_value)}</td>\n                                <td className=\"py-3 px-4\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatDate(detailRecord.ct_received_date)}</td>\n                                <td className=\"py-3 px-4 tabular-nums\" style={{ color: 'var(--text)' }} dir=\"ltr\">{formatNum(detailRecord.sum_acq)}</td>\n                                <td className=\"py-3 px-4\">\n                                  {detailRecord.match_status === 'matched' ? (\n                                    <span className=\"inline-flex items-center gap-1 text-green-700 font-semibold\"><CheckCircle2 className=\"w-4 h-4\" /> مطابق</span>\n                                  ) : (\n                                    <span className=\"inline-flex items-center gap-1 text-amber-700 font-semibold\"><XCircle className=\"w-4 h-4\" /> غير مطابق</span>\n                                  )}\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <div className=\"mt-6 mb-6 flex justify-end\">\n                          <img src=\"/stamp-settlement-reconciliation.png\" alt=\"ختم التسويات\" className=\"h-24 w-auto object-contain opacity-90\" />\n                        </div>\n                      </>\n                    ) : (\n                      <div className=\"flex flex-col gap-4\" style={{ maxWidth: '480px' }}>\n                        <div\n                          className=\"rounded-2xl overflow-hidden flex flex-col relative\"\n                          style={{\n                            background: 'var(--surface)',\n                            border: '2px solid var(--border-card)',\n                            boxShadow: '0 2px 8px rgba(15, 23, 42, 0.06), inset 0 1px 0 rgba(255,255,255,0.8)',\n                          }}\n                        >\n                          <div className=\"absolute top-0 bottom-0 w-1 rounded-r-full opacity-80\" style={{ right: 0, background: detailRecord.match_status === 'matched' ? 'linear-gradient(180deg, #059669 0%, #047857 100%)' : 'linear-gradient(180deg, #d97706 0%, #b45309 100%)' }} aria-hidden />\n                          <div className=\"p-6 flex flex-col gap-4\">\n                            <h3 className=\"text-xl font-bold leading-snug\" style={{ color: 'var(--text-strong)' }}>\n                              CT: {formatDate(detailRecord.sttl_date_from)} → {formatDate(detailRecord.sttl_date_to)}\n                            </h3>\n                            <div className=\"rounded-xl p-3 text-sm\" style={{ background: 'rgba(2, 97, 116, 0.04)', border: '1px solid var(--border)' }}>\n                              <div className=\"grid grid-cols-2 gap-x-4 gap-y-1.5 text-xs\">\n                                <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>قيمة CT</span><span className=\"tabular-nums font-bold\" style={{ color: 'var(--primary-800)' }} dir=\"ltr\">{formatNum(detailRecord.ct_value)} IQD</span></div>\n                                <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>عمولة التحصيل</span><span className=\"tabular-nums font-medium\" dir=\"ltr\">{formatNum(detailRecord.sum_acq)} IQD</span></div>\n                                <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>تاريخ استلام CT</span><span className=\"tabular-nums\" dir=\"ltr\">{formatDate(detailRecord.ct_received_date)}</span></div>\n                                <div className=\"flex justify-between\"><span style={{ color: 'var(--text-muted)' }}>المستخدم</span><span>{detailRecord.user_name ?? '—'}</span></div>\n                              </div>\n                            </div>\n                            <div className={`rounded-xl px-3 py-2 text-sm font-bold ${detailRecord.match_status === 'matched' ? 'bg-emerald-100 text-emerald-800' : 'bg-amber-100 text-amber-800'}`}>\n                              {detailRecord.match_status === 'matched' ? (\n                                <span className=\"inline-flex items-center gap-1.5\"><CheckCircle2 className=\"w-4 h-4\" /> مطابق</span>\n                              ) : (\n                                <span className=\"inline-flex items-center gap-1.5\"><XCircle className=\"w-4 h-4\" /> غير مطابق</span>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center justify-end pt-2 border-t\" style={{ borderColor: 'var(--border)' }}>\n                          <img src=\"/stamp-settlement-reconciliation.png\" alt=\"ختم التسويات\" className=\"h-20 w-auto object-contain opacity-90\" />\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </>\n            )}\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n\nexport default CtMatching;\n"],"names":["useHasPermission","pageKey","actionKey","user","useAuthStore","s","hasPermission","permissions","role","Dialog","DialogPrimitive","DialogPortal","DialogOverlay","React","_ref","ref","className","props","_objectWithoutProperties","_excluded","_jsx","_objectSpread","cn","style","background","displayName","DialogContent","_ref2","children","_excluded2","_jsxs","borderColor","boxShadow","undefined","color","X","DialogHeader","_ref3","_excluded3","DialogFooter","_ref4","_excluded4","DialogTitle","_ref5","_excluded5","fontWeight","_ref6","_excluded6","Loading","message","formatDate","d","slice","Date","isNaN","getTime","toISOString","length","replace","formatNum","n","Number","toLocaleString","minimumFractionDigits","maximumFractionDigits","dateInputClass","dateInputWrapperClass","CtMatching","_reportData$by_direct","_reportData$by_direct2","_detailRecord$user_na","sttlDateFrom","setSttlDateFrom","useState","sttlDateTo","setSttlDateTo","ctValue","setCtValue","ctReceivedDate","setCtReceivedDate","notes","setNotes","summary","setSummary","summaryLoading","setSummaryLoading","records","setRecords","recordsLoading","setRecordsLoading","filterDateFrom","setFilterDateFrom","filterDateTo","setFilterDateTo","submitting","setSubmitting","editingRecord","setEditingRecord","editForm","setEditForm","sttl_date_from","sttl_date_to","ct_value","ct_received_date","updateSubmitting","setUpdateSubmitting","deletingId","setDeletingId","reportOpen","setReportOpen","reportData","setReportData","reportLoading","setReportLoading","viewMode","setViewMode","detailRecord","setDetailRecord","detailViewMode","setDetailViewMode","downloadingImage","setDownloadingImage","reportContentRef","useRef","detailContentRef","toast","useToast","canCreateCt","canEditCt","canDeleteCt","fetchSummary","async","params","URLSearchParams","res","api","get","concat","toString","data","_unused","fetchRecords","_res$data$data","_res$data","limit","set","_unused2","useEffect","closeReport","document","body","classList","add","prevTitle","title","remove","openEditModal","r","_r$sttl_date_from$sli","_r$sttl_date_from","_r$sttl_date_to$slice","_r$sttl_date_to","_r$ct_value","_r$ct_received_date$s","_r$ct_received_date","_r$notes","String","closeEditModal","handleDeleteCt","window","confirm","id","delete","description","e","_err$response$data$er3","_err$response3","_err$response3$data","response","error","variant","ctNum","parseFloat","NaN","sumAcq","sum_acq","ctRounded","Math","round","acqRounded","isMatched","abs","kpiTotal","kpiMatched","filter","match_status","kpiNotMatched","kpiTotalCtValue","reduce","sum","hasActiveFilters","padding","maxWidth","type","onClick","LayoutGrid","Table2","Link","to","ArrowRight","gridTemplateColumns","label","value","map","item","i","dir","border","Plus","onChange","target","Calendar","strokeWidth","inputMode","placeholder","num","post","_err$response$data$er","_err$response","_err$response$data","disabled","total_movements","_Fragment","CheckCircle2","XCircle","Filter","resetFilters","handlePrintReport","date_from","date_to","then","catch","finally","Printer","FileCheck","AnimatePresence","index","_r$user_name","motion","div","initial","opacity","y","animate","exit","scale","transition","duration","delay","ease","whileHover","zIndex","right","user_name","Eye","Edit","Trash2","alignSelf","src","alt","isolation","minWidth","borderCollapse","borderSpacing","_r$user_name2","_r$created_at","position","cursor","created_at","stopPropagation","period","toLocaleDateString","year","month","day","borderBottom","Hash","accent","total_amount","sum_fees","primary","kpi","ResponsiveContainer","width","height","BarChart","by_day","sort","a","b","sttl_date","localeCompare","date","acq","margin","top","left","bottom","CartesianGrid","strokeDasharray","stroke","vertical","XAxis","dataKey","tick","fontSize","fill","tickMargin","axisLine","YAxis","tickFormatter","v","Tooltip","formatter","contentStyle","borderRadius","Bar","name","radius","maxBarSize","LabelList","scope","by_bank","bank_name","row","movement_count","sum_amount","by_directorate_governorate","_reportData$by_direct3","list","_b$sum_acq","_a$sum_acq","totalAcq","governorate","directorate_name","toFixed","ct_records","colSpan","_r$user_name3","borderTop","printReportWindow","_reportContentRef$cur","el","current","querySelector","print","origin","location","html","innerHTML","trim","printWin","open","write","close","focus","setTimeout","onafterprint","onOpenChange","f","put","_err$response$data$er2","_err$response2","_err$response2$data","dataUrl","toPng","quality","pixelRatio","backgroundColor","link","createElement","safeFrom","safeTo","download","href","click","err","Download","paddingBottom"],"ignoreList":[],"sourceRoot":""}
"use strict";(self.webpackChunksttlment_client=self.webpackChunksttlment_client||[]).push([[673],{40382(e,s,t){t.d(s,{A0:()=>g,BF:()=>j,Hj:()=>b,XI:()=>f,nA:()=>y,nd:()=>N});var a=t(22555),r=t(53986),l=t(65043),n=t(15074),o=t(70579);const i=["className"],d=["className"],c=["className"],m=["className"],x=["className"],h=["className"],p=["className"],u=["className"],f=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,i);return(0,o.jsx)("div",{className:"relative w-full overflow-auto",children:(0,o.jsx)("table",(0,a.A)({ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",t)},l))})});f.displayName="Table";const g=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,d);return(0,o.jsx)("thead",(0,a.A)({ref:s,className:(0,n.cn)("[&_tr]:border-b",t)},l))});g.displayName="TableHeader";const j=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,c);return(0,o.jsx)("tbody",(0,a.A)({ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",t)},l))});j.displayName="TableBody";l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,m);return(0,o.jsx)("tfoot",(0,a.A)({ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t)},l))}).displayName="TableFooter";const b=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,x);return(0,o.jsx)("tr",(0,a.A)({ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t)},l))});b.displayName="TableRow";const N=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,h);return(0,o.jsx)("th",(0,a.A)({ref:s,className:(0,n.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t)},l))});N.displayName="TableHead";const y=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,p);return(0,o.jsx)("td",(0,a.A)({ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t)},l))});y.displayName="TableCell";l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,u);return(0,o.jsx)("caption",(0,a.A)({ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",t)},l))}).displayName="TableCaption"},49954(e,s,t){t.d(s,{p:()=>m});var a=t(22555),r=t(53986),l=t(65043),n=t(15074),o=t(70579);const i=["className","type","style","error","errorId","onFocus","onBlur"],d="rgba(220, 38, 38, 0.6)",c="rgba(2, 97, 116, 0.25)",m=l.forwardRef((e,s)=>{let{className:t,type:l,style:m,error:x,errorId:h,onFocus:p,onBlur:u}=e,f=(0,r.A)(e,i);return(0,o.jsx)("input",(0,a.A)({type:l,className:(0,n.cn)("flex h-10 w-full rounded-xl border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#026174]/40 disabled:cursor-not-allowed disabled:opacity-50 transition-all",t),style:(0,a.A)({borderColor:x?d:c,background:"#ffffff",color:"#0f172a"},m||{}),onFocus:e=>{e.target.style.borderColor=x?d:"#068294",e.target.style.boxShadow=x?"none":"0 0 0 2px rgba(2, 97, 116, 0.25)",null===p||void 0===p||p(e)},onBlur:e=>{e.target.style.borderColor=x?d:c,e.target.style.boxShadow="none",null===u||void 0===u||u(e)},ref:s,"aria-invalid":!!x||void 0,"aria-describedby":x&&h?h:void 0},f))});m.displayName="Input"},92417(e,s,t){t.d(s,{E:()=>i});var a=t(22555),r=t(53986),l=t(15074),n=t(70579);const o=["className"];function i(e){let{className:s}=e,t=(0,r.A)(e,o);return(0,n.jsx)("div",(0,a.A)({className:(0,l.cn)("animate-pulse rounded-md bg-muted",s)},t))}},94673(e,s,t){t.d(s,{ReportsV2:()=>O});var a=t(65043),r=t(6931),l=t(25262),n=t(73375),o=t(96938),i=t(21327),d=t(86150),c=t(50108),m=t(17869),x=t(4240),h=t(87734),p=t(38643),u=t(52185),f=t(6026),g=t(82291),j=t(60163),b=t(6742),N=t(69772),y=t(49954),v=t(92417),w=t(40382),k=t(6171),_=t(19162),A=t(56790),S=t(53639),C=t(28646),R=t(46403),T=t(36327),B=t(62649),F=t(22754),z=t(7118),Z=t(70579);const W=(new Date).toISOString().slice(0,10),I=(new Date).getMonth()+1,D=(new Date).getFullYear();function E(){const e=new Date,s=new Date(e);return s.setDate(s.getDate()-6),[s.toISOString().slice(0,10),e.toISOString().slice(0,10)]}function H(e){return String(null!==e&&void 0!==e?e:0)}const P=["#026174","#068294","#0ea5e9","#38bdf8","#7dd3fc","#0d9488","#14b8a6","#2dd4bf"],L="linear-gradient(135deg, #026174 0%, #068294 100%)",K={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},M={hidden:{opacity:0,y:12},show:{opacity:1,y:0}};function $(e){let{rows:s,templateSearch:t,onTemplateSearchChange:r,num:o}=e;const i=(0,a.useRef)(null),d=(0,l.Te)({count:s.length,getScrollElement:()=>i.current,estimateSize:()=>48,overscan:8}),c=d.getVirtualItems(),m=d.getTotalSize();return(0,Z.jsx)(n.P.div,{variants:M,children:(0,Z.jsxs)(b.Zp,{className:"overflow-hidden shadow-md print:break-inside-avoid",children:[(0,Z.jsxs)(b.aR,{className:"bg-slate-50/80 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Z.jsxs)(b.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,Z.jsx)(T.A,{className:"h-5 w-5 text-[#026174]"}),"\u0627\u0644\u0645\u0647\u0627\u0645 \u062d\u0633\u0628 \u0627\u0644\u0642\u0627\u0644\u0628 \u0648\u0627\u0644\u0641\u0626\u0629"]}),(0,Z.jsx)(y.p,{placeholder:"\u0628\u062d\u062b (\u0642\u0627\u0644\u0628 \u0623\u0648 \u0641\u0626\u0629)...",value:t,onChange:e=>r(e.target.value),className:"max-w-xs no-print"})]}),(0,Z.jsx)(b.Wu,{className:"pt-6",children:s.length>0?(0,Z.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,Z.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_auto] bg-slate-100 border-b px-4 py-3 text-sm font-semibold text-slate-700",children:[(0,Z.jsx)("span",{children:"\u0627\u0644\u0642\u0627\u0644\u0628"}),(0,Z.jsx)("span",{children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Z.jsx)("span",{className:"text-left font-mono",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0647\u0627\u0645"})]}),(0,Z.jsx)("div",{ref:i,className:"overflow-auto",style:{maxHeight:400},children:(0,Z.jsx)("div",{style:{height:m,width:"100%",position:"relative"},children:c.map(e=>{const t=s[e.index];return(0,Z.jsxs)("div",{"data-index":e.index,className:"grid grid-cols-[1fr_1fr_auto] border-b border-slate-200 px-4 py-3 text-sm hover:bg-slate-50 even:bg-slate-50/50 items-center",style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(e.start,"px)"),height:48},children:[(0,Z.jsx)("span",{className:"font-medium truncate",title:t.template_title,children:t.template_title}),(0,Z.jsx)("span",{className:"truncate",title:t.category_name,children:t.category_name}),(0,Z.jsx)("span",{className:"font-mono text-left",children:o(t.task_count)})]},e.key)})})})]}):(0,Z.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:t?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u0644\u0644\u0628\u062d\u062b.":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0647\u0627\u0645 \u0641\u064a \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629."})})]})})}function O(){var e,s,t,l;const T=(0,a.useRef)(null),[O,G]=(0,a.useState)("month"),[U,X]=(0,a.useState)(W),[Y,q]=(0,a.useState)(I),[V,J]=(0,a.useState)(D),[Q]=(0,a.useState)(E),[ee,se]=(0,a.useState)(Q[0]),[te,ae]=(0,a.useState)(Q[1]),[re,le]=(0,a.useState)("tasks"),[ne,oe]=(0,a.useState)(""),ie=new URLSearchParams;ie.set("period",O),"day"===O&&ie.set("date",U),"month"===O&&(ie.set("month",String(Y)),ie.set("year",String(V))),"custom"!==O&&"week"!==O||(ee&&ie.set("dateFrom",ee),te&&ie.set("dateTo",te));const{data:de,isLoading:ce,refetch:me}=(0,r.I)({queryKey:["report-full",O,U,Y,V,ee,te],queryFn:async()=>(await _.A.get("/reports/full?".concat(ie.toString()))).data,enabled:"custom"!==O&&"week"!==O||!(!ee||!te),staleTime:9e4}),xe=null!==(e=null===de||void 0===de?void 0:de.settlementsByBank)&&void 0!==e?e:[],he=null!==(s=null===de||void 0===de?void 0:de.tasksByCategory)&&void 0!==s?s:[],pe=null!==(t=null===de||void 0===de?void 0:de.tasksByTemplateAndCategory)&&void 0!==t?t:[],ue=null!==(l=null===de||void 0===de?void 0:de.employees)&&void 0!==l?l:[],fe=xe.reduce((e,s)=>e+s.settlement_count,0),ge=he.reduce((e,s)=>e+s.task_count,0),je=(0,a.useMemo)(()=>{const e=[...ue];return"name"===re&&e.sort((e,s)=>(e.name||"").localeCompare(s.name||"","ar")),"tasks"===re&&e.sort((e,s)=>s.tasks_done-e.tasks_done),"attendance"===re&&e.sort((e,s)=>s.attendance_days-e.attendance_days),e},[ue,re]),be=(0,a.useMemo)(()=>{if(!ne.trim())return pe;const e=ne.trim().toLowerCase();return pe.filter(s=>(s.template_title||"").toLowerCase().includes(e)||(s.category_name||"").toLowerCase().includes(e))},[pe,ne]);return(0,Z.jsxs)("div",{className:"space-y-6",children:[(0,Z.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"\u0627\u0644\u062a\u0642\u0631\u064a\u0631"}),(0,Z.jsx)("p",{className:"text-muted-foreground mt-1",children:"\u0645\u062d\u0635\u0644\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0645\u0635\u0631\u0641\u060c \u0645\u0647\u0627\u0645 \u062d\u0633\u0628 \u0627\u0644\u0641\u0626\u0629 \u0648\u0627\u0644\u0642\u0627\u0644\u0628\u060c \u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"})]}),de&&(0,Z.jsxs)(N.$,{variant:"outline",size:"sm",className:"no-print gap-2",onClick:()=>{if(!T.current)return void window.print();document.body.innerHTML;const e=T.current.cloneNode(!0);e.classList.add("report-print-root");const s=window.open("","_blank","noopener,noreferrer");s?(s.document.write("\n      <!DOCTYPE html><html dir=\"rtl\"><head>\n        <meta charset=\"utf-8\"><title>\u0627\u0644\u062a\u0642\u0631\u064a\u0631</title>\n        <style>\n          * { margin: 0; padding: 0; box-sizing: border-box; }\n          body { font-family: 'Cairo', 'Segoe UI', Tahoma, sans-serif; padding: 24px; color: #0f172a; background: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }\n          .report-print-root { max-width: 100%; }\n          .report-print-root .no-print { display: none !important; }\n          .report-print-root table { width: 100%; border-collapse: collapse; margin: 12px 0; }\n          .report-print-root th, .report-print-root td { border: 1px solid #e2e8f0; padding: 8px 12px; text-align: right; }\n          .report-print-root th { background: #026174; color: #fff; font-weight: 600; }\n          .report-print-root tr:nth-child(even) { background: #f8fafc; }\n          .report-print-root .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }\n          .report-print-root .kpi-card { background: linear-gradient(135deg, #026174, #068294); color: #fff; padding: 16px; border-radius: 12px; text-align: center; }\n          .report-print-root .kpi-card .value { font-size: 1.5rem; font-weight: 700; }\n          .report-print-root h1 { font-size: 1.5rem; margin-bottom: 8px; }\n          .report-print-root h2 { font-size: 1.1rem; margin: 16px 0 8px; padding-bottom: 4px; border-bottom: 2px solid #068294; }\n          .report-print-root .chart-placeholder { height: 200px; background: #f1f5f9; border-radius: 8px; margin: 12px 0; display: flex; align-items: center; justify-content: center; color: #64748b; }\n          .report-print-root .employee-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }\n          .report-print-root .employee-card { border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; text-align: center; }\n          .report-print-root .employee-card img { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; margin: 0 auto 8px; display: block; }\n        </style>\n      </head><body>".concat(e.outerHTML,"</body></html>")),s.document.close(),s.focus(),setTimeout(()=>{s.print(),s.close()},400)):window.print()},children:[(0,Z.jsx)(F.A,{className:"h-4 w-4"}),"\u0637\u0628\u0627\u0639\u0629"]})]}),(0,Z.jsxs)(b.Zp,{className:"no-print",children:[(0,Z.jsx)(b.aR,{children:(0,Z.jsxs)(b.ZB,{className:"flex items-center gap-2",children:[(0,Z.jsx)(C.A,{className:"h-5 w-5"}),"\u0627\u0644\u0641\u062a\u0631\u0629"]})}),(0,Z.jsxs)(b.Wu,{children:[(0,Z.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,Z.jsx)("div",{className:"flex gap-2",children:["day","week","month","custom"].map(e=>(0,Z.jsxs)(N.$,{variant:O===e?"default":"outline",size:"sm",onClick:()=>G(e),children:["day"===e&&"\u064a\u0648\u0645","week"===e&&"\u0623\u0633\u0628\u0648\u0639","month"===e&&"\u0634\u0647\u0631","custom"===e&&"\u0645\u062e\u0635\u0635"]},e))}),"day"===O&&(0,Z.jsx)(y.p,{type:"date",value:U,onChange:e=>X(e.target.value),className:"w-40"}),"month"===O&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(y.p,{type:"number",min:1,max:12,value:Y,onChange:e=>q(parseInt(e.target.value)||1),className:"w-20"}),(0,Z.jsx)(y.p,{type:"number",min:2020,max:2100,value:V,onChange:e=>J(parseInt(e.target.value)||D),className:"w-24"})]}),("custom"===O||"week"===O)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(y.p,{type:"date",placeholder:"\u0645\u0646",value:ee,onChange:e=>se(e.target.value),className:"w-40"}),(0,Z.jsx)(y.p,{type:"date",placeholder:"\u0625\u0644\u0649",value:te,onChange:e=>ae(e.target.value),className:"w-40"})]}),(0,Z.jsx)(N.$,{onClick:()=>me(),children:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0631\u064a\u0631"})]}),de&&(0,Z.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["\u0645\u0646 ",de.dateFrom," \u0625\u0644\u0649 ",de.dateTo]})]})]}),ce?(0,Z.jsxs)("div",{className:"space-y-6",children:[(0,Z.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((e,s)=>(0,Z.jsx)(v.E,{className:"h-24 rounded-xl"},s))}),(0,Z.jsx)(v.E,{className:"h-80 w-full rounded-xl"}),(0,Z.jsx)(v.E,{className:"h-64 w-full rounded-xl"}),(0,Z.jsx)(v.E,{className:"h-48 w-full rounded-xl"}),(0,Z.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(8)].map((e,s)=>(0,Z.jsx)(v.E,{className:"h-36 rounded-xl"},s))})]}):de?(0,Z.jsxs)(n.P.div,{ref:T,className:"space-y-8",variants:K,initial:"hidden",animate:"show",children:[(0,Z.jsxs)(n.P.div,{variants:M,className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Z.jsx)(b.Zp,{className:"overflow-hidden border-0 shadow-lg",style:{background:L},children:(0,Z.jsxs)(b.Wu,{className:"pt-4 pb-4 text-white",children:[(0,Z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Z.jsx)(A.A,{className:"h-5 w-5 opacity-90"}),(0,Z.jsx)("span",{className:"text-sm font-medium opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"})]}),(0,Z.jsx)("p",{className:"mt-1 text-2xl font-bold tabular-nums",children:H(fe)})]})}),(0,Z.jsx)(b.Zp,{className:"overflow-hidden border-0 shadow-lg",style:{background:L},children:(0,Z.jsxs)(b.Wu,{className:"pt-4 pb-4 text-white",children:[(0,Z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Z.jsx)(R.A,{className:"h-5 w-5 opacity-90"}),(0,Z.jsx)("span",{className:"text-sm font-medium opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0647\u0627\u0645"})]}),(0,Z.jsx)("p",{className:"mt-1 text-2xl font-bold tabular-nums",children:H(ge)})]})}),(0,Z.jsx)(b.Zp,{className:"overflow-hidden border-0 shadow-lg",style:{background:L},children:(0,Z.jsxs)(b.Wu,{className:"pt-4 pb-4 text-white",children:[(0,Z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Z.jsx)(S.A,{className:"h-5 w-5 opacity-90"}),(0,Z.jsx)("span",{className:"text-sm font-medium opacity-90",children:"\u0627\u0644\u0645\u0635\u0627\u0631\u0641"})]}),(0,Z.jsx)("p",{className:"mt-1 text-2xl font-bold tabular-nums",children:H(xe.length)})]})}),(0,Z.jsx)(b.Zp,{className:"overflow-hidden border-0 shadow-lg",style:{background:L},children:(0,Z.jsxs)(b.Wu,{className:"pt-4 pb-4 text-white",children:[(0,Z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Z.jsx)(z.A,{className:"h-5 w-5 opacity-90"}),(0,Z.jsx)("span",{className:"text-sm font-medium opacity-90",children:"\u0627\u0644\u0645\u0648\u0638\u0641\u0648\u0646"})]}),(0,Z.jsx)("p",{className:"mt-1 text-2xl font-bold tabular-nums",children:H(je.length)})]})})]}),(0,Z.jsx)(n.P.div,{variants:M,children:(0,Z.jsxs)(b.Zp,{className:"overflow-hidden shadow-md print:break-inside-avoid",children:[(0,Z.jsx)(b.aR,{className:"bg-slate-50/80 border-b",children:(0,Z.jsxs)(b.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,Z.jsx)(A.A,{className:"h-5 w-5 text-[#026174]"}),"\u0627\u0644\u0645\u062d\u0635\u0644\u0627\u062a \u2014 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0645\u0635\u0631\u0641"]})}),(0,Z.jsx)(b.Wu,{className:"pt-6 space-y-6",children:xe.length>0?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"h-80",children:(0,Z.jsx)(c.u,{width:"100%",height:"100%",children:(0,Z.jsxs)(g.E,{data:xe,layout:"vertical",margin:{left:140,right:24},children:[(0,Z.jsx)(h.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,Z.jsx)(u.W,{type:"number",tickFormatter:e=>H(e),stroke:"#64748b"}),(0,Z.jsx)(f.h,{type:"category",dataKey:"bank_name",width:130,tick:{fontSize:12},stroke:"#64748b"}),(0,Z.jsx)(d.m,{formatter:e=>[H(e),"\u0639\u062f\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"],contentStyle:{borderRadius:8,border:"1px solid #e2e8f0"}}),(0,Z.jsx)(p.y,{dataKey:"settlement_count",name:"\u062a\u0633\u0648\u064a\u0627\u062a",fill:"url(#barGradient)",radius:[0,4,4,0],maxBarSize:32}),(0,Z.jsx)("defs",{children:(0,Z.jsxs)("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[(0,Z.jsx)("stop",{offset:"0%",stopColor:"#026174"}),(0,Z.jsx)("stop",{offset:"100%",stopColor:"#068294"})]})})]})})}),(0,Z.jsxs)(w.XI,{children:[(0,Z.jsx)(w.A0,{children:(0,Z.jsxs)(w.Hj,{className:"bg-slate-100 hover:bg-slate-100",children:[(0,Z.jsx)(w.nd,{children:"\u0627\u0644\u0645\u0635\u0631\u0641"}),(0,Z.jsx)(w.nd,{className:"text-left font-mono",children:"\u0639\u062f\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"})]})}),(0,Z.jsx)(w.BF,{children:xe.map((e,s)=>(0,Z.jsxs)(w.Hj,{className:"hover:bg-slate-50",children:[(0,Z.jsx)(w.nA,{className:"font-medium",children:e.bank_name}),(0,Z.jsx)(w.nA,{className:"font-mono text-left",children:H(e.settlement_count)})]},s))})]})]}):(0,Z.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u062a\u0633\u0648\u064a\u0627\u062a \u0641\u064a \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629."})})]})}),(0,Z.jsx)(n.P.div,{variants:M,children:(0,Z.jsxs)(b.Zp,{className:"overflow-hidden shadow-md print:break-inside-avoid",children:[(0,Z.jsx)(b.aR,{className:"bg-slate-50/80 border-b",children:(0,Z.jsxs)(b.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,Z.jsx)(B.A,{className:"h-5 w-5 text-[#026174]"}),"\u0627\u0644\u0645\u0647\u0627\u0645 \u062d\u0633\u0628 \u0627\u0644\u0641\u0626\u0629"]})}),(0,Z.jsx)(b.Wu,{className:"pt-6 space-y-6",children:he.length>0?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Z.jsx)("div",{className:"h-80",children:(0,Z.jsx)(c.u,{width:"100%",height:"100%",children:(0,Z.jsxs)(j.r,{children:[(0,Z.jsx)(x.F,{data:he,dataKey:"task_count",nameKey:"category_name",cx:"50%",cy:"50%",outerRadius:110,innerRadius:40,paddingAngle:2,label:e=>{let{category_name:s,task_count:t}=e;return"".concat(s,": ").concat(H(t))},children:he.map((e,s)=>(0,Z.jsx)(m.f,{fill:P[s%P.length],stroke:"#fff",strokeWidth:2},s))}),(0,Z.jsx)(d.m,{formatter:(e,s,t)=>{var a,r;return[H(e),null!==(a=null===(r=t.payload)||void 0===r?void 0:r.category_name)&&void 0!==a?a:"\u0645\u0647\u0627\u0645"]},contentStyle:{borderRadius:8,border:"1px solid #e2e8f0"}}),(0,Z.jsx)(i.s,{})]})})}),(0,Z.jsx)("div",{className:"h-80",children:(0,Z.jsx)(c.u,{width:"100%",height:"100%",children:(0,Z.jsxs)(g.E,{data:he,margin:{top:12,right:24,left:12,bottom:12},children:[(0,Z.jsx)(h.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,Z.jsx)(u.W,{dataKey:"category_name",tick:{fontSize:11},stroke:"#64748b"}),(0,Z.jsx)(f.h,{tickFormatter:e=>H(e),stroke:"#64748b"}),(0,Z.jsx)(d.m,{formatter:e=>[H(e),"\u0645\u0647\u0627\u0645"],contentStyle:{borderRadius:8,border:"1px solid #e2e8f0"}}),(0,Z.jsx)(p.y,{dataKey:"task_count",name:"\u0645\u0647\u0627\u0645",fill:"#068294",radius:[4,4,0,0],maxBarSize:48})]})})})]}),(0,Z.jsxs)(w.XI,{children:[(0,Z.jsx)(w.A0,{children:(0,Z.jsxs)(w.Hj,{className:"bg-slate-100 hover:bg-slate-100",children:[(0,Z.jsx)(w.nd,{children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Z.jsx)(w.nd,{className:"text-left font-mono",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0647\u0627\u0645"})]})}),(0,Z.jsx)(w.BF,{children:he.map((e,s)=>(0,Z.jsxs)(w.Hj,{className:"hover:bg-slate-50",children:[(0,Z.jsx)(w.nA,{className:"font-medium",children:e.category_name}),(0,Z.jsx)(w.nA,{className:"font-mono text-left",children:H(e.task_count)})]},s))})]})]}):(0,Z.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0647\u0627\u0645 \u0641\u064a \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629."})})]})}),(0,Z.jsx)($,{rows:be,templateSearch:ne,onTemplateSearchChange:oe,num:H}),(0,Z.jsx)(n.P.div,{variants:M,children:(0,Z.jsxs)(b.Zp,{className:"overflow-hidden shadow-md print:break-inside-avoid",children:[(0,Z.jsxs)(b.aR,{className:"bg-slate-50/80 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Z.jsxs)(b.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,Z.jsx)(z.A,{className:"h-5 w-5 text-[#026174]"}),"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"]}),(0,Z.jsxs)("div",{className:"flex gap-2 no-print",children:[(0,Z.jsx)(N.$,{variant:"tasks"===re?"default":"outline",size:"sm",onClick:()=>le("tasks"),children:"\u062d\u0633\u0628 \u0627\u0644\u0645\u0647\u0627\u0645"}),(0,Z.jsx)(N.$,{variant:"attendance"===re?"default":"outline",size:"sm",onClick:()=>le("attendance"),children:"\u062d\u0633\u0628 \u0627\u0644\u062d\u0636\u0648\u0631"}),(0,Z.jsx)(N.$,{variant:"name"===re?"default":"outline",size:"sm",onClick:()=>le("name"),children:"\u062d\u0633\u0628 \u0627\u0644\u0627\u0633\u0645"})]})]}),(0,Z.jsx)(b.Wu,{className:"pt-6",children:je.length>0?(0,Z.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(0,Z.jsx)(o.N,{mode:"popLayout",children:je.map((e,s)=>{var t,a,r;const l=e.avatar_url?e.avatar_url.startsWith("http")?e.avatar_url:"".concat(window.location.origin).concat(e.avatar_url):void 0,o=e.tasks_done>0?Math.round(e.on_time/e.tasks_done*100):0;return(0,Z.jsx)(n.P.div,{layout:!0,initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{delay:.02*s},children:(0,Z.jsx)(b.Zp,{className:"overflow-hidden h-full transition-shadow hover:shadow-lg border-slate-200",children:(0,Z.jsx)(b.Wu,{className:"pt-5 pb-5",children:(0,Z.jsxs)("div",{className:"flex flex-col items-center text-center gap-3",children:[(0,Z.jsx)(k.e,{src:null!==l&&void 0!==l?l:void 0,alt:e.name,fallback:null!==(t=null===(a=e.name)||void 0===a||null===(r=a.slice(0,1))||void 0===r?void 0:r.toUpperCase())&&void 0!==t?t:"?",size:"xl",className:"h-20 w-20 ring-2 ring-slate-200"}),(0,Z.jsxs)("div",{className:"w-full",children:[(0,Z.jsx)("p",{className:"font-semibold text-slate-800",children:e.name}),(0,Z.jsxs)("div",{className:"mt-2 space-y-1.5 text-sm",children:[(0,Z.jsxs)("div",{className:"flex justify-between",children:[(0,Z.jsx)("span",{className:"text-muted-foreground",children:"\u0623\u064a\u0627\u0645 \u0627\u0644\u062d\u0636\u0648\u0631"}),(0,Z.jsx)("span",{className:"font-mono text-foreground",children:H(e.attendance_days)})]}),(0,Z.jsxs)("div",{className:"flex justify-between",children:[(0,Z.jsx)("span",{className:"text-muted-foreground",children:"\u0645\u0647\u0627\u0645 \u0645\u0646\u062c\u0632\u0629"}),(0,Z.jsx)("span",{className:"font-mono text-foreground",children:H(e.tasks_done)})]}),(0,Z.jsxs)("div",{className:"flex justify-between",children:[(0,Z.jsx)("span",{className:"text-muted-foreground",children:"\u0641\u064a \u0627\u0644\u0648\u0642\u062a"}),(0,Z.jsx)("span",{className:"font-mono text-foreground",children:H(e.on_time)})]}),(0,Z.jsxs)("div",{className:"flex justify-between",children:[(0,Z.jsx)("span",{className:"text-muted-foreground",children:"\u0645\u062a\u0623\u062e\u0631\u0629"}),(0,Z.jsx)("span",{className:"font-mono text-foreground",children:H(e.late)})]})]}),e.tasks_done>0&&(0,Z.jsxs)("div",{className:"mt-3",children:[(0,Z.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[(0,Z.jsx)("span",{children:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0625\u0646\u062c\u0627\u0632 \u0641\u064a \u0627\u0644\u0648\u0642\u062a"}),(0,Z.jsxs)("span",{className:"font-mono",children:[H(o),"%"]})]}),(0,Z.jsx)("div",{className:"h-2 rounded-full bg-slate-200 overflow-hidden",children:(0,Z.jsx)(n.P.div,{className:"h-full rounded-full",style:{background:"linear-gradient(90deg, #026174, #068294)"},initial:{width:0},animate:{width:"".concat(o,"%")},transition:{duration:.6,delay:.03*s}})})]})]})]})})})},e.id)})})}):(0,Z.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"\u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0648\u0638\u0641\u0648\u0646."})})]})})]}):(0,Z.jsx)(b.Zp,{children:(0,Z.jsxs)(b.Wu,{className:"py-12 text-center text-muted-foreground",children:[(0,Z.jsx)(C.A,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,Z.jsx)("p",{children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u062a\u0631\u0629 \u0648\u0627\u0636\u063a\u0637 \xab\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0631\u064a\u0631\xbb \u0644\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0631\u064a\u0631."}),(0,Z.jsx)("p",{className:"text-sm mt-1",children:"\u0641\u064a \u0648\u0636\u0639 \u0623\u0633\u0628\u0648\u0639 \u0623\u0648 \u0645\u062e\u0635\u0635 \u0623\u062f\u062e\u0644 \u062a\u0627\u0631\u064a\u062e \u0645\u0646 \u0648\u0625\u0644\u0649."})]})})]})}}}]);
//# sourceMappingURL=673.00f70796.chunk.js.map
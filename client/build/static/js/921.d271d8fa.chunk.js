/*! For license information please see 921.d271d8fa.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksttlment_client=self.webpackChunksttlment_client||[]).push([[921],{8800(e,t,a){a.d(t,{A:()=>s});const s=(0,a(21639).A)("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},64265(e,t,a){a.d(t,{A:()=>s});const s=(0,a(21639).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},92921(e,t,a){a.r(t),a.d(t,{default:()=>U});var s=a(22555),l=a(65043),n=a(6931),i=a(96938),r=a(73375),d=a(69772),c=a(49954),o=a(72147),u=a(70492),x=a(53986),m=a(63248),h=a(47097),p=a(19162),y=a(51704);const v=["id"];function g(){const e=(0,m.jE)(),{toast:t}=(0,y.dj)();return(0,h.n)({mutationFn:async e=>{let{id:t}=e,a=(0,x.A)(e,v);return(await p.A.put("/schedules/".concat(t),a)).data},onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),t({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062c\u062f\u0648\u0644 \u0628\u0646\u062c\u0627\u062d"})},onError:e=>{var a,s;t({title:"\u062e\u0637\u0623",description:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||"\u062d\u062f\u062b \u062e\u0637\u0623",variant:"destructive"})}})}var f=a(95919),b=a(66709),j=a(71360),N=a(56804),w=a(8800),k=a(28646),A=a(95258),_=a(38298),O=a(39292),S=a(40614),C=a(64265),q=a(21639);const I=(0,q.A)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),T=(0,q.A)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);var M=a(9855),L=a(38449),W=a(75088),P=a(14459),Z=a(95773),D=a(60271),E=a(50490),F=a(25851),V=a(70579);const K=[{value:0,label:"\u0627\u0644\u0623\u062d\u062f"},{value:1,label:"\u0627\u0644\u0627\u062b\u0646\u064a\u0646"},{value:2,label:"\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621"},{value:3,label:"\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621"},{value:4,label:"\u0627\u0644\u062e\u0645\u064a\u0633"},{value:5,label:"\u0627\u0644\u062c\u0645\u0639\u0629"},{value:6,label:"\u0627\u0644\u0633\u0628\u062a"}];const U=function(){var e;const{toast:t}=(0,y.dj)(),a=(0,F.T)("schedules","create"),x=(0,F.T)("schedules","edit"),v=(0,F.T)("schedules","delete"),[q,U]=(0,l.useState)(!1),[H,Q]=(0,l.useState)(null),[z,$]=(0,l.useState)(""),[B,G]=(0,l.useState)(""),[R,J]=(0,l.useState)(""),[X,Y]=(0,l.useState)(""),[ee,te]=(0,l.useState)(""),[ae,se]=(0,l.useState)("cards"),[le,ne]=(0,l.useState)({templateId:"",frequencyType:"daily",daysOfWeek:[],dayOfWeekSingle:0,dayOfMonth:1,dueTime:"",graceMinutes:0,defaultAssigneeUserId:"",active:!0,settlementOffsetDays:0}),{data:ie=[],isLoading:re}=(0,n.I)({queryKey:["schedules",de],queryFn:async()=>{const e=void 0!==de?"?active=".concat(de):"";return(await p.A.get("/schedules".concat(e))).data}});var de;const ce=function(){const e=(0,m.jE)(),{toast:t}=(0,y.dj)();return(0,h.n)({mutationFn:async e=>(await p.A.post("/schedules",e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),t({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062c\u062f\u0648\u0644 \u0628\u0646\u062c\u0627\u062d"})},onError:e=>{var a,s;t({title:"\u062e\u0637\u0623",description:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||"\u062d\u062f\u062b \u062e\u0637\u0623",variant:"destructive"})}})}(),oe=g(),ue=function(){const e=(0,m.jE)(),{toast:t}=(0,y.dj)();return(0,h.n)({mutationFn:async e=>(await p.A.delete("/schedules/".concat(e))).data,onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),t({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u062c\u062f\u0648\u0644 \u0628\u0646\u062c\u0627\u062d"})},onError:e=>{var a,s;t({title:"\u062e\u0637\u0623",description:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||"\u062d\u062f\u062b \u062e\u0637\u0623",variant:"destructive"})}})}(),xe=function(){const e=(0,m.jE)(),{toast:t}=(0,y.dj)();return g(),(0,h.n)({mutationFn:async e=>{let{id:t,active:a}=e;return(await p.A.put("/schedules/".concat(t),{active:a})).data},onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),t({title:"\u0646\u062c\u062d",description:"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u062c\u062f\u0648\u0644 \u0628\u0646\u062c\u0627\u062d"})},onError:e=>{var a,s;t({title:"\u062e\u0637\u0623",description:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||"\u062d\u062f\u062b \u062e\u0637\u0623",variant:"destructive"})}})}(),{data:me=[]}=(0,n.I)({queryKey:["templates"],queryFn:async()=>(await p.A.get("/templates?active=true")).data}),{data:he=[]}=(0,n.I)({queryKey:["users"],queryFn:async()=>(await p.A.get("/users")).data.filter(e=>"employee"===e.role&&e.active)}),{data:pe=[]}=(0,n.I)({queryKey:["categories"],queryFn:async()=>(await p.A.get("/categories?active=true")).data}),ye=e=>{const t=null!=e.settlement_offset_days?parseInt(e.settlement_offset_days,10):0,a=0===t?"\u062a\u0633\u0648\u064a\u0629 \u0646\u0641\u0633 \u0627\u0644\u064a\u0648\u0645":-1===t?"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0628\u0642":-2===t?"\u062a\u0633\u0648\u064a\u0629 \u064a\u0648\u0645\u064a\u0646 \u0642\u0628\u0644\u0647":-3===t?"\u062a\u0633\u0648\u064a\u0629 3 \u0623\u064a\u0627\u0645 \u0642\u0628\u0644\u0647":0!==t?"\u062a\u0633\u0648\u064a\u0629 ".concat(t," \u0623\u064a\u0627\u0645"):null,s=a?" \u2014 ".concat(a):"";if("daily"===e.frequency_type){if(!e.days_of_week||0===e.days_of_week.length)return"\u064a\u0648\u0645\u064a\u0629 (\u0628\u062f\u0648\u0646 \u0623\u064a\u0627\u0645)".concat(s);const t=e.days_of_week.map(e=>{var t;return null===(t=K.find(t=>t.value===e))||void 0===t?void 0:t.label}).filter(Boolean);return"\u064a\u0648\u0645\u064a\u0629: ".concat(t.join(", ")).concat(s)}if("weekly"===e.frequency_type){var l;const t=(null===(l=K.find(t=>t.value===e.day_of_week_single))||void 0===l?void 0:l.label)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";return"\u0623\u0633\u0628\u0648\u0639\u064a\u0629: \u0643\u0644 ".concat(t).concat(s)}return"monthly"===e.frequency_type?"\u0634\u0647\u0631\u064a\u0629: \u064a\u0648\u0645 ".concat(e.day_of_month," \u0645\u0646 \u0643\u0644 \u0634\u0647\u0631").concat(s):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},ve=e=>{var t,a,s;e?(Q(e),ne({templateId:(null===(t=e.template_id)||void 0===t?void 0:t.toString())||"",frequencyType:e.frequency_type||"daily",daysOfWeek:e.days_of_week||[],dayOfWeekSingle:e.day_of_week_single||0,dayOfMonth:e.day_of_month||1,dueTime:e.due_time||"",graceMinutes:e.grace_minutes||0,defaultAssigneeUserId:(null===(a=e.default_assignee_user_id)||void 0===a?void 0:a.toString())||"",active:!1!==e.active,settlementOffsetDays:null!==(s=e.settlement_offset_days)&&void 0!==s?s:0})):(Q(null),ne({templateId:"",frequencyType:"daily",daysOfWeek:[],dayOfWeekSingle:0,dayOfMonth:1,dueTime:"",graceMinutes:0,defaultAssigneeUserId:"",active:!0,settlementOffsetDays:0}));U(!0)},ge=le.templateId?me.find(e=>{var t;return(null===(t=e.id)||void 0===t?void 0:t.toString())===le.templateId}):null,fe="government_settlement_bank"===(null===ge||void 0===ge||null===(e=ge.required_fields)||void 0===e?void 0:e.category_type),be=async e=>{window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u062c\u062f\u0648\u0644\u061f")&&await ue.mutateAsync(e)},je=async(e,t)=>{await xe.mutateAsync({id:e,active:!t})},Ne=ie.filter(e=>{if(z){var t,a,s;const l=z.toLowerCase();if(!((null===(t=e.template_title)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(a=e.category_name)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(s=e.assignee_name)||void 0===s?void 0:s.toLowerCase().includes(l))))return!1}if(B){if("active"===B&&!e.active)return!1;if("inactive"===B&&e.active)return!1}var l,n;if(R&&(null===(l=e.category_id)||void 0===l?void 0:l.toString())!==R)return!1;if(X&&e.frequency_type!==X)return!1;if(ee&&(null===(n=e.default_assignee_user_id)||void 0===n?void 0:n.toString())!==ee)return!1;return!0}),we=ie.filter(e=>e.active).length,ke=ie.filter(e=>!e.active).length;return(0,V.jsx)("div",{className:"min-h-screen",style:{padding:"1.5rem 2rem",background:"linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%)"},children:(0,V.jsxs)("div",{className:"mx-auto",style:{maxWidth:"1400px"},children:[(0,V.jsxs)("div",{className:"page-header-teal rounded-xl flex flex-wrap items-center justify-between gap-4 p-5 mb-6",style:{background:"linear-gradient(135deg, #026174 0%, #068294 100%)",color:"#ffffff",boxShadow:"0 10px 30px rgba(2, 97, 116, 0.35)"},children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h1",{className:"text-2xl font-bold m-0 text-white",children:"\u0627\u0644\u062c\u062f\u0627\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064a\u0629"}),(0,V.jsx)("p",{className:"text-sm opacity-90 mt-1 m-0 text-white",children:"\u0625\u062f\u0627\u0631\u0629 \u062c\u062f\u0627\u0648\u0644 \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u062c\u062f\u0648\u0644\u0629"})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,V.jsxs)("div",{className:"flex rounded-full overflow-hidden border border-white/30 bg-white/10 p-0.5",children:[(0,V.jsxs)("button",{type:"button",onClick:()=>se("cards"),className:"flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ".concat("cards"===ae?"bg-white text-[#026174] shadow":"text-white/90 hover:bg-white/10"),children:[(0,V.jsx)(f.A,{className:"w-4 h-4"}),"\u0643\u0631\u0648\u062a"]}),(0,V.jsxs)("button",{type:"button",onClick:()=>se("table"),className:"flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ".concat("table"===ae?"bg-white text-[#026174] shadow":"text-white/90 hover:bg-white/10"),children:[(0,V.jsx)(b.A,{className:"w-4 h-4"}),"\u062c\u062f\u0648\u0644"]})]}),a&&(0,V.jsxs)("button",{type:"button",onClick:()=>ve(),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium bg-white text-[#026174] cursor-pointer hover:bg-white/95 transition-colors shadow",children:[(0,V.jsx)(j.A,{className:"w-4 h-4"}),"\u062c\u062f\u0648\u0644 \u062c\u062f\u064a\u062f"]})]})]}),(0,V.jsx)(E.Q,{items:[{label:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062c\u062f\u0627\u0648\u0644",value:ie.length,Icon:N.A,color:"#068294",glow:"rgba(6, 130, 148, 0.4)",gradient:"linear-gradient(135deg, #068294 0%, #026174 100%)"},{label:"\u062c\u062f\u0627\u0648\u0644 \u0646\u0634\u0637\u0629",value:we,Icon:w.A,color:"#059669",glow:"rgba(5, 150, 105, 0.4)",gradient:"linear-gradient(135deg, #059669 0%, #047857 100%)"},{label:"\u062c\u062f\u0627\u0648\u0644 \u063a\u064a\u0631 \u0646\u0634\u0637\u0629",value:ke,Icon:k.A,color:"#64748b",glow:"rgba(100, 116, 139, 0.35)",gradient:"linear-gradient(135deg, #64748b 0%, #475569 100%)"},{label:"\u0627\u0644\u0642\u0648\u0627\u0644\u0628",value:me.length,Icon:A.A,color:"#0369a1",glow:"rgba(3, 105, 161, 0.4)",gradient:"linear-gradient(135deg, #0369a1 0%, #0284c7 100%)"}]}),(0,V.jsxs)("div",{className:"rounded-2xl p-5 mb-6 border border-slate-200/80",style:{background:"linear-gradient(180deg, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 4px 20px rgba(0,0,0,0.06)"},children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,V.jsx)("div",{className:"p-1.5 rounded-lg bg-slate-100",children:(0,V.jsx)(_.A,{className:"w-4 h-4 text-slate-600"})}),(0,V.jsx)("span",{className:"text-base font-semibold text-slate-700",children:"\u0627\u0644\u0641\u0644\u0627\u062a\u0631 \u0648\u0627\u0644\u0628\u062d\u062b"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,V.jsxs)("div",{className:"lg:col-span-2",children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"\u0628\u062d\u062b"}),(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsx)(O.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,V.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0642\u0627\u0644\u0628 \u0623\u0648 \u0627\u0644\u0641\u0626\u0629 \u0623\u0648 \u0627\u0644\u0645\u0633\u0624\u0648\u0644...",value:z,onChange:e=>$(e.target.value),className:"w-full pr-10 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-[#068294]/30 focus:border-[#068294] bg-white text-slate-800"})]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,V.jsx)(o.Z,{value:B,onChange:G,options:[{value:"",label:"\u0627\u0644\u0643\u0644"},{value:"active",label:"\u0646\u0634\u0637"},{value:"inactive",label:"\u063a\u064a\u0631 \u0646\u0634\u0637"}],getOptionLabel:e=>e.label,getOptionValue:e=>e.value,placeholder:"\u0627\u0644\u0643\u0644",searchPlaceholder:"\u0627\u0628\u062d\u062b..."})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,V.jsx)(o.Z,{value:R,onChange:J,options:[{id:"",name:"\u0627\u0644\u0643\u0644"},...pe],getOptionLabel:e=>e.name,getOptionValue:e=>{var t;return(null===(t=e.id)||void 0===t?void 0:t.toString())||""},placeholder:"\u0627\u0644\u0643\u0644",searchPlaceholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0641\u0626\u0629..."})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0643\u0631\u0627\u0631"}),(0,V.jsx)(o.Z,{value:X,onChange:Y,options:[{value:"",label:"\u0627\u0644\u0643\u0644"},{value:"daily",label:"\u064a\u0648\u0645\u064a\u0629"},{value:"weekly",label:"\u0623\u0633\u0628\u0648\u0639\u064a\u0629"},{value:"monthly",label:"\u0634\u0647\u0631\u064a\u0629"}],getOptionLabel:e=>e.label,getOptionValue:e=>e.value,placeholder:"\u0627\u0644\u0643\u0644",searchPlaceholder:"\u0627\u0628\u062d\u062b..."})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644"}),(0,V.jsx)(o.Z,{value:ee,onChange:te,options:[{id:"",name:"\u0627\u0644\u0643\u0644"},...he],getOptionLabel:e=>e.name,getOptionValue:e=>{var t;return(null===(t=e.id)||void 0===t?void 0:t.toString())||""},placeholder:"\u0627\u0644\u0643\u0644",searchPlaceholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0633\u0624\u0648\u0644..."})]})]}),(z||B||R||X||ee)&&(0,V.jsxs)("div",{className:"mt-4 flex items-center gap-2 flex-wrap",children:[(0,V.jsxs)("button",{type:"button",onClick:()=>{$(""),G(""),J(""),Y(""),te("")},className:"px-4 py-2 rounded-lg text-sm font-medium bg-slate-100 text-slate-600 hover:bg-slate-200 flex items-center gap-1",children:[(0,V.jsx)(S.A,{className:"w-4 h-4"}),"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"]}),(0,V.jsxs)("span",{className:"text-sm text-slate-500",children:["\u0639\u0631\u0636 ",Ne.length," \u0645\u0646 ",ie.length," \u062c\u062f\u0648\u0644"]})]})]}),(0,V.jsx)("div",{className:"rounded-2xl overflow-hidden",style:{background:"var(--surface)",boxShadow:"var(--shadow-card)",border:"1px solid var(--border)"},children:re?(0,V.jsx)("div",{className:"p-16 flex justify-center",children:(0,V.jsxs)("div",{className:"animate-pulse flex flex-col items-center gap-4",children:[(0,V.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-slate-100"}),(0,V.jsx)("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u062c\u062f\u0627\u0648\u0644..."})]})}):0===Ne.length?(0,V.jsxs)("div",{className:"p-16 text-center",children:[(0,V.jsx)("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center",style:{background:"rgba(8, 131, 149, 0.08)"},children:(0,V.jsx)(k.A,{className:"w-8 h-8",style:{color:"var(--primary-600)"}})}),(0,V.jsx)("p",{className:"text-lg font-bold m-0",style:{color:"var(--text-strong)"},children:0===ie.length?"\u0644\u0627 \u062a\u0648\u062c\u062f \u062c\u062f\u0627\u0648\u0644 \u0632\u0645\u0646\u064a\u0629":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0628\u062d\u062b \u0648\u0627\u0644\u0641\u0644\u0627\u062a\u0631"}),0===ie.length&&a&&(0,V.jsxs)("button",{type:"button",onClick:()=>ve(),className:"mt-5 ds-btn ds-btn-primary inline-flex items-center gap-2",children:[(0,V.jsx)(j.A,{className:"w-4 h-4"}),"\u0625\u0646\u0634\u0627\u0621 \u062c\u062f\u0648\u0644 \u062c\u062f\u064a\u062f"]})]}):"table"===ae?(0,V.jsx)("div",{className:"overflow-x-auto",children:(0,V.jsxs)("table",{className:"ds-table w-full",children:[(0,V.jsx)("thead",{children:(0,V.jsxs)("tr",{className:"table-header-dark",style:{background:"linear-gradient(135deg, #026174 0%, #068294 100%)"},children:[(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0627\u0644\u0642\u0627\u0644\u0628"}),(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0627\u0644\u062a\u0643\u0631\u0627\u0631"}),(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0648\u0642\u062a \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642"}),(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644"}),(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,V.jsx)("th",{className:"text-end py-4 px-4 font-bold text-white",children:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,V.jsx)("tbody",{children:Ne.map(e=>(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"py-3 px-4 font-medium",style:{color:"var(--text-strong)"},children:e.template_title}),(0,V.jsx)("td",{className:"py-3 px-4",style:{color:"var(--text)"},children:e.category_name||"\u2014"}),(0,V.jsx)("td",{className:"py-3 px-4 text-sm",style:{color:"var(--text)"},children:ye(e)}),(0,V.jsx)("td",{className:"py-3 px-4",style:{color:"var(--text)"},dir:"ltr",children:(0,D.cd)(e.due_time)}),(0,V.jsx)("td",{className:"py-3 px-4",style:{color:"var(--text)"},children:e.assignee_name||"\u2014"}),(0,V.jsx)("td",{className:"py-3 px-4",children:(0,V.jsx)("span",{className:"inline-flex px-2.5 py-1 rounded-lg text-xs font-bold",style:{background:e.active?"rgba(22, 163, 74, 0.12)":"rgba(100, 116, 139, 0.12)",color:e.active?"var(--success)":"var(--text-muted)"},children:e.active?"\u0646\u0634\u0637":"\u063a\u064a\u0631 \u0646\u0634\u0637"})}),(0,V.jsx)("td",{className:"py-3 px-4",children:(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[x&&(0,V.jsxs)("button",{type:"button",onClick:()=>ve(e),className:"ds-btn ds-btn-outline flex items-center gap-1.5 px-3 py-1.5 text-sm",children:[(0,V.jsx)(C.A,{className:"w-3.5 h-3.5"}),"\u062a\u0639\u062f\u064a\u0644"]}),x&&(0,V.jsx)("button",{type:"button",onClick:()=>je(e.id,e.active),className:"p-2 rounded-lg border hover:bg-slate-100 transition-colors",title:e.active?"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u0641\u0639\u064a\u0644":"\u062a\u0641\u0639\u064a\u0644",children:e.active?(0,V.jsx)(I,{className:"w-4 h-4"}):(0,V.jsx)(T,{className:"w-4 h-4"})}),v&&(0,V.jsx)("button",{type:"button",onClick:()=>be(e.id),className:"ds-btn ds-btn-danger p-2 rounded-lg",title:"\u062d\u0630\u0641",children:(0,V.jsx)(M.A,{className:"w-4 h-4"})})]})})]},e.id))})]})}):(0,V.jsx)("div",{className:"p-6",children:(0,V.jsx)("div",{className:"grid gap-5 sm:grid-cols-2 xl:grid-cols-3",children:(0,V.jsx)(i.N,{children:Ne.map((e,t)=>(0,V.jsxs)(r.P.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,scale:.98},whileHover:{scale:1.15,y:-8,zIndex:20,boxShadow:"0 28px 56px rgba(2, 97, 116, 0.2), 0 0 0 1px rgba(8, 131, 149, 0.3)",transition:{duration:.3,ease:[.25,.46,.45,.94]}},transition:{duration:.25,delay:.03*t,ease:[.25,.46,.45,.94]},className:"group relative flex flex-col rounded-2xl overflow-hidden cursor-pointer",style:{background:"var(--surface)",border:"2px solid var(--border-card)",boxShadow:"0 2px 8px rgba(15, 23, 42, 0.06), inset 0 1px 0 rgba(255,255,255,0.8)"},children:[(0,V.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 pointer-events-none overflow-hidden rounded-2xl card-shine-hover"}),(0,V.jsx)("div",{className:"absolute top-0 bottom-0 w-1 rounded-r-full opacity-80 group-hover:opacity-100 group-hover:w-1.5 transition-all duration-300",style:{right:0,background:e.active?"linear-gradient(180deg, var(--success), #22c55e)":"linear-gradient(180deg, var(--text-muted), #94a3b8)",boxShadow:e.active?"0 0 12px rgba(22, 163, 74, 0.3)":"0 0 8px rgba(100, 116, 139, 0.2)"}}),(0,V.jsx)("div",{className:"absolute top-0 right-0 left-0 h-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(90deg, var(--primary-600), var(--primary-800))"}}),(0,V.jsxs)("div",{className:"p-5 pl-5 pr-6 flex flex-col flex-1",children:[(0,V.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,V.jsx)("h3",{className:"text-lg font-bold leading-snug line-clamp-2 flex-1 min-w-0",style:{color:"var(--text-strong)"},children:e.template_title}),(0,V.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-bold shrink-0",style:{background:e.active?"rgba(22, 163, 74, 0.12)":"rgba(100, 116, 139, 0.12)",color:e.active?"var(--success)":"var(--text-muted)"},children:e.active?"\u0646\u0634\u0637":"\u063a\u064a\u0631 \u0646\u0634\u0637"})]}),e.category_name&&(0,V.jsxs)("div",{className:"inline-flex items-center gap-1.5 w-fit px-2.5 py-1 rounded-lg mb-3 text-sm font-medium",style:{background:"rgba(8, 131, 149, 0.08)",color:"var(--primary-800)"},children:[(0,V.jsx)(L.A,{className:"w-3.5 h-3.5"}),e.category_name]}),(0,V.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,V.jsx)(k.A,{className:"w-4 h-4 flex-shrink-0",style:{color:"var(--text-muted)"}}),(0,V.jsx)("span",{style:{color:"var(--text-muted)"},children:"\u0627\u0644\u062a\u0643\u0631\u0627\u0631:"}),(0,V.jsx)("span",{style:{color:"var(--text)"},children:ye(e)})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,V.jsx)(W.A,{className:"w-4 h-4 flex-shrink-0",style:{color:"var(--text-muted)"}}),(0,V.jsx)("span",{style:{color:"var(--text-muted)"},children:"\u0648\u0642\u062a \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642:"}),(0,V.jsx)("span",{style:{color:"var(--text)"},children:(0,D.cd)(e.due_time)})]}),e.assignee_name&&(0,V.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,V.jsx)(P.A,{className:"w-4 h-4 flex-shrink-0",style:{color:"var(--text-muted)"}}),(0,V.jsx)("span",{style:{color:"var(--text-muted)"},children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644:"}),(0,V.jsx)("span",{style:{color:"var(--text)"},children:e.assignee_name})]})]}),(0,V.jsxs)("div",{className:"flex gap-2 pt-4 mt-auto border-t",style:{borderColor:"var(--border)"},children:[x&&(0,V.jsxs)(r.P.button,{type:"button",onClick:t=>{t.stopPropagation(),ve(e)},className:"ds-btn ds-btn-outline flex-1 flex items-center justify-center gap-2 text-sm",whileHover:{scale:1.03},whileTap:{scale:.98},children:[(0,V.jsx)(C.A,{className:"w-4 h-4"}),"\u062a\u0639\u062f\u064a\u0644"]}),(0,V.jsx)(r.P.button,{type:"button",onClick:t=>{t.stopPropagation(),je(e.id,e.active)},className:"ds-btn ds-btn-ghost flex items-center justify-center p-2.5",title:e.active?"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u0641\u0639\u064a\u0644":"\u062a\u0641\u0639\u064a\u0644",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.active?(0,V.jsx)(I,{className:"w-4 h-4"}):(0,V.jsx)(T,{className:"w-4 h-4"})}),v&&(0,V.jsx)(r.P.button,{type:"button",onClick:t=>{t.stopPropagation(),be(e.id)},className:"ds-btn ds-btn-danger flex items-center justify-center p-2.5",title:"\u062d\u0630\u0641",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,V.jsx)(M.A,{className:"w-4 h-4"})})]})]})]},e.id))})})})}),(0,V.jsx)(u.lG,{open:q,onOpenChange:U,children:(0,V.jsxs)(u.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto ds-popover",children:[(0,V.jsxs)(u.c7,{children:[(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)(Z.v,{size:"sm",animated:!1}),(0,V.jsx)(u.L3,{className:"text-xl font-bold text-slate-900",children:H?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062c\u062f\u0648\u0644":"\u062c\u062f\u0648\u0644 \u062c\u062f\u064a\u062f"})]}),(0,V.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:H?"\u062a\u0639\u062f\u064a\u0644 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062c\u062f\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064a.":"\u0625\u0636\u0627\u0641\u0629 \u062c\u062f\u0648\u0644 \u0632\u0645\u0646\u064a \u062c\u062f\u064a\u062f \u0644\u062a\u0648\u0644\u064a\u062f \u0627\u0644\u0645\u0647\u0627\u0645 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b."})]}),(0,V.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!le.templateId)return void t({title:"\u062e\u0637\u0623",description:"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0642\u0627\u0644\u0628 \u0627\u0644\u0645\u0647\u0645\u0629",variant:"destructive"});if(!le.dueTime)return void t({title:"\u062e\u0637\u0623",description:"\u0648\u0642\u062a \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642 \u0645\u0637\u0644\u0648\u0628",variant:"destructive"});if("daily"===le.frequencyType&&0===le.daysOfWeek.length)return void t({title:"\u062e\u0637\u0623",description:"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u064a\u0648\u0645 \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",variant:"destructive"});const a={templateId:parseInt(le.templateId),frequencyType:le.frequencyType,dueTime:le.dueTime,graceMinutes:le.graceMinutes,active:le.active};"daily"===le.frequencyType?a.daysOfWeek=le.daysOfWeek:"weekly"===le.frequencyType?a.dayOfWeekSingle=le.dayOfWeekSingle:"monthly"===le.frequencyType&&(a.dayOfMonth=le.dayOfMonth),le.defaultAssigneeUserId&&(a.defaultAssigneeUserId=parseInt(le.defaultAssigneeUserId)),fe&&null!=le.settlementOffsetDays&&(a.settlementOffsetDays=parseInt(String(le.settlementOffsetDays),10));try{H?await oe.mutateAsync((0,s.A)({id:H.id},a)):await ce.mutateAsync(a),U(!1)}catch(l){}},className:"space-y-4",children:[(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u0642\u0627\u0644\u0628 \u0627\u0644\u0645\u0647\u0645\u0629 *"}),(0,V.jsx)(o.Z,{value:le.templateId,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{templateId:e})),options:me,getOptionLabel:e=>e.title,getOptionValue:e=>e.id.toString(),placeholder:"\u2014 \u0627\u062e\u062a\u0631 \u0642\u0627\u0644\u0628 \u2014",searchPlaceholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0642\u0627\u0644\u0628..."})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0643\u0631\u0627\u0631 *"}),(0,V.jsx)(o.Z,{value:le.frequencyType,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{frequencyType:e,daysOfWeek:[]})),options:[{value:"daily",label:"\u064a\u0648\u0645\u064a\u0629"},{value:"weekly",label:"\u0623\u0633\u0628\u0648\u0639\u064a\u0629"},{value:"monthly",label:"\u0634\u0647\u0631\u064a\u0629"}],getOptionLabel:e=>e.label,getOptionValue:e=>e.value,placeholder:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062a\u0643\u0631\u0627\u0631"})]}),fe&&(0,V.jsxs)("div",{className:"space-y-2 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u064a\u0648\u0645 \u0627\u0644\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 *"}),(0,V.jsx)(o.Z,{value:String(le.settlementOffsetDays),onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{settlementOffsetDays:parseInt(e,10)})),options:[{value:0,label:"\u062a\u0633\u0648\u064a\u0629 \u0646\u0641\u0633 \u0627\u0644\u064a\u0648\u0645"},{value:-1,label:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0630\u064a \u064a\u0633\u0628\u0642\u0647"},{value:-2,label:"\u062a\u0633\u0648\u064a\u0629 \u064a\u0648\u0645\u064a\u0646 \u0642\u0628\u0644\u0647"},{value:-3,label:"\u062a\u0633\u0648\u064a\u0629 3 \u0623\u064a\u0627\u0645 \u0642\u0628\u0644\u0647"}],getOptionLabel:e=>e.label,getOptionValue:e=>String(e.value),placeholder:"\u0627\u062e\u062a\u0631 \u062a\u0633\u0648\u064a\u0629...",searchPlaceholder:"\u0627\u0628\u062d\u062b..."}),(0,V.jsx)("p",{className:"text-xs text-slate-500",children:"\u0645\u062b\u0627\u0644: \u0639\u0646\u062f \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621 \u0648\xab\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0630\u064a \u064a\u0633\u0628\u0642\u0647\xbb \u062a\u064f\u0646\u0634\u0623 \u0645\u0647\u0645\u0629 \u062a\u0637\u0644\u0628 \u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621. \u064a\u0645\u0643\u0646 \u0625\u0646\u0634\u0627\u0621 \u0639\u062f\u0629 \u062c\u062f\u0627\u0648\u0644 \u0644\u0646\u0641\u0633 \u0627\u0644\u0642\u0627\u0644\u0628 (\u062a\u0633\u0648\u064a\u0629 \u0646\u0641\u0633 \u0627\u0644\u064a\u0648\u0645\u060c \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0628\u0642\u060c \u0625\u0644\u062e) \u0644\u064a\u0648\u0645 \u0648\u0627\u062d\u062f."})]}),"daily"===le.frequencyType&&(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u0623\u064a\u0627\u0645 \u0627\u0644\u0623\u0633\u0628\u0648\u0639 *"}),(0,V.jsx)("div",{className:"grid grid-cols-4 gap-2",children:K.map(e=>(0,V.jsx)(d.$,{type:"button",variant:le.daysOfWeek.includes(e.value)?"default":"outline",onClick:()=>{return t=e.value,void ne((0,s.A)((0,s.A)({},le),{},{daysOfWeek:le.daysOfWeek.includes(t)?le.daysOfWeek.filter(e=>e!==t):[...le.daysOfWeek,t]}));var t},className:"w-full",children:e.label},e.value))})]}),"weekly"===le.frequencyType&&(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u064a\u0648\u0645 \u0627\u0644\u0623\u0633\u0628\u0648\u0639 *"}),(0,V.jsx)(o.Z,{value:le.dayOfWeekSingle.toString(),onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{dayOfWeekSingle:parseInt(e)})),options:K,getOptionLabel:e=>e.label,getOptionValue:e=>e.value.toString(),placeholder:"\u0627\u062e\u062a\u0631 \u064a\u0648\u0645 \u0627\u0644\u0623\u0633\u0628\u0648\u0639"})]}),"monthly"===le.frequencyType&&(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u064a\u0648\u0645 \u0627\u0644\u0634\u0647\u0631 *"}),(0,V.jsx)(c.p,{type:"number",min:"1",max:"31",value:le.dayOfMonth,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{dayOfMonth:parseInt(e.target.value)||1}))})]}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u0648\u0642\u062a \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642 *"}),(0,V.jsx)(c.p,{type:"time",value:le.dueTime,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{dueTime:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u062f\u0642\u0627\u0626\u0642 \u0627\u0644\u0633\u0645\u0627\u062d"}),(0,V.jsx)(c.p,{type:"number",min:"0",value:le.graceMinutes,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{graceMinutes:parseInt(e.target.value)||0}))})]})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a"}),(0,V.jsx)(o.Z,{value:le.defaultAssigneeUserId,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{defaultAssigneeUserId:e})),options:[{id:"",name:"\u2014 \u0644\u0627 \u064a\u0648\u062c\u062f \u2014"},...he],getOptionLabel:e=>e.name,getOptionValue:e=>{var t;return(null===(t=e.id)||void 0===t?void 0:t.toString())||""},placeholder:"\u2014 \u0644\u0627 \u064a\u0648\u062c\u062f \u2014",searchPlaceholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0648\u0638\u0641..."})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)("input",{type:"checkbox",id:"active",checked:le.active,onChange:e=>ne((0,s.A)((0,s.A)({},le),{},{active:e.target.checked})),className:"custom-checkbox"}),(0,V.jsx)("label",{htmlFor:"active",className:"text-sm font-medium cursor-pointer text-slate-700",children:"\u0646\u0634\u0637"})]}),(0,V.jsxs)(u.Es,{className:"gap-2 pt-4 border-t border-slate-200",children:[(0,V.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>U(!1),className:"rounded-xl",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,V.jsx)(d.$,{type:"submit",disabled:ce.isPending||oe.isPending,className:"rounded-xl font-semibold",style:{background:"linear-gradient(135deg, #026174, #068294)"},children:ce.isPending||oe.isPending?"\u062c\u0627\u0631\u064a \u0627\u0644\u062d\u0641\u0638...":H?"\u062a\u062d\u062f\u064a\u062b":"\u0625\u0646\u0634\u0627\u0621"})]})]})]})})]})})}},95258(e,t,a){a.d(t,{A:()=>s});const s=(0,a(21639).A)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])}}]);
//# sourceMappingURL=921.d271d8fa.chunk.js.map